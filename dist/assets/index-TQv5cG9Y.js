var b1=Object.defineProperty;var w1=(e,t,r)=>t in e?b1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var nr=(e,t,r)=>w1(e,typeof t!="symbol"?t+"":t,r);import{r as w,a as ku,g as ex,c as ee,b as Tt,d as tr}from"./vendor-DE-6VouJ.js";import{u as Ar,a as j1,b as Us,c as _1,B as A1,R as uf,d as Ct}from"./router-CRSYxQPH.js";import{L as es,M as Zt,E as pc,a as jn,b as xc,i as N1,c as Xn,F as $e,C as gc,A as Za,U as Qt,I as tx,H as rx,B as nx,G as ax,d as ix,e as sx,f as ox,T as lx,S as sr,g as cx,D as va,h as ux,j as _t,k as Ie,l as Ur,X as Rt,m as vc,n as zs,o as pi,p as xi,q as Pu,r as dx,s as E1,t as fx,u as ra,v as C1,w as yc,x as xn,y as S1,z as Zo,J as Qo,K as el,N as bc,O as hx,P as mx,Q as px,R as xx,V as gx,W as vx,Y as xr,Z as wc,_ as yx,$ as jc,a0 as Qa,a1 as df,a2 as D1,a3 as bx,a4 as ei,a5 as wx,a6 as gr,a7 as k1,a8 as Ou,a9 as P1,aa as Tu,ab as jx,ac as ts,ad as O1,ae as T1,af as ff,ag as I1,ah as _x,ai as _n,aj as Ha,ak as rs,al as B1,am as F1,an as hf,ao as Ax,ap as tl,aq as Bi,ar as Qn,as as M1}from"./ui-C2-Us4Bl.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Nx={exports:{}},Ks={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=w,R1=Symbol.for("react.element"),L1=Symbol.for("react.fragment"),U1=Object.prototype.hasOwnProperty,z1=$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K1={key:!0,ref:!0,__self:!0,__source:!0};function Ex(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)U1.call(t,n)&&!K1.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:R1,type:e,key:i,ref:o,props:a,_owner:z1.current}}Ks.Fragment=L1;Ks.jsx=Ex;Ks.jsxs=Ex;Nx.exports=Ks;var s=Nx.exports,_c={},mf=ku;_c.createRoot=mf.createRoot,_c.hydrateRoot=mf.hydrateRoot;const q1="modulepreload",W1=function(e){return"/adminizer-demo/"+e},pf={},gi=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(d=>{if(d=W1(d),d in pf)return;pf[d]=!0;const c=d.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":q1,c||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},H1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gi(async()=>{const{default:n}=await Promise.resolve().then(()=>ya);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Iu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class G1 extends Iu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class xf extends Iu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class gf extends Iu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ac;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ac||(Ac={}));var V1=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(f){o(f)}}function d(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};class Y1{constructor(t,{headers:r={},customFetch:n,region:a=Ac.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=H1(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return V1(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:d}=r;d||(d=this.region);const c=new URL(`${this.url}/${t}`);d&&d!=="any"&&(l["x-region"]=d,c.searchParams.set("forceFunctionRegion",d));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const f=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(g=>{throw new G1(g)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new xf(f);if(!f.ok)throw new gf(f);let m=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return m==="application/json"?x=yield f.json():m==="application/octet-stream"?x=yield f.blob():m==="text/event-stream"?x=f:m==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof gf||a instanceof xf?a.context:void 0}}})}}var dt={},Bu={},qs={},vi={},Ws={},Hs={},X1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},na=X1();const J1=na.fetch,Cx=na.fetch.bind(na),Sx=na.Headers,Z1=na.Request,Q1=na.Response,ya=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sx,Request:Z1,Response:Q1,default:Cx,fetch:J1},Symbol.toStringTag,{value:"Module"})),ej=ex(ya);var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});let tj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Gs.default=tj;var Dx=ee&&ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hs,"__esModule",{value:!0});const rj=Dx(ej),nj=Dx(Gs);let aj=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=rj.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,d;let c=null,u=null,f=null,h=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{c=JSON.parse(g),Array.isArray(c)&&i.status===404&&(u=[],c=null,h=200,m="OK")}catch{i.status===404&&g===""?(h=204,m="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,h=200,m="OK"),c&&this.shouldThrowOnError)throw new nj.default(c)}return{error:c,data:u,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,d;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Hs.default=aj;var ij=ee&&ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ws,"__esModule",{value:!0});const sj=ij(Hs);let oj=class extends sj.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const d=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${d};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ws.default=oj;var lj=ee&&ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vi,"__esModule",{value:!0});const cj=lj(Ws);let uj=class extends cj.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};vi.default=uj;var dj=ee&&ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qs,"__esModule",{value:!0});const Ta=dj(vi);let fj=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ta.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ta.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const d=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ta.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Ta.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ta.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};qs.default=fj;var Vs={},Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.version=void 0;Ys.version="0.0.0-automated";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.DEFAULT_HEADERS=void 0;const hj=Ys;Vs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${hj.version}`};var kx=ee&&ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bu,"__esModule",{value:!0});const mj=kx(qs),pj=kx(vi),xj=Vs;let gj=class Px{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},xj.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new mj.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Px(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let d;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{l.searchParams.append(u,f)})):(o="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new pj.default({method:o,url:l,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};Bu.default=gj;var ba=ee&&ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dt,"__esModule",{value:!0});dt.PostgrestError=dt.PostgrestBuilder=dt.PostgrestTransformBuilder=dt.PostgrestFilterBuilder=dt.PostgrestQueryBuilder=dt.PostgrestClient=void 0;const Ox=ba(Bu);dt.PostgrestClient=Ox.default;const Tx=ba(qs);dt.PostgrestQueryBuilder=Tx.default;const Ix=ba(vi);dt.PostgrestFilterBuilder=Ix.default;const Bx=ba(Ws);dt.PostgrestTransformBuilder=Bx.default;const Fx=ba(Hs);dt.PostgrestBuilder=Fx.default;const Mx=ba(Gs);dt.PostgrestError=Mx.default;var vj=dt.default={PostgrestClient:Ox.default,PostgrestQueryBuilder:Tx.default,PostgrestFilterBuilder:Ix.default,PostgrestTransformBuilder:Bx.default,PostgrestBuilder:Fx.default,PostgrestError:Mx.default};const{PostgrestClient:yj,PostgrestQueryBuilder:oF,PostgrestFilterBuilder:lF,PostgrestTransformBuilder:cF,PostgrestBuilder:uF,PostgrestError:dF}=vj;function bj(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const wj=bj(),jj="2.11.15",_j=`realtime-js/${jj}`,Aj="1.0.0",$x=1e4,Nj=1e3;var Ga;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ga||(Ga={}));var et;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(et||(et={}));var Gt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Gt||(Gt={}));var Nc;(function(e){e.websocket="websocket"})(Nc||(Nc={}));var ln;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ln||(ln={}));class Ej{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const d=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:d,payload:c}}}class Rx{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ve;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ve||(ve={}));const vf=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=Cj(o,e,t,a),i),{})},Cj=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?Lx(i,o):Ec(o)},Lx=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Pj(t,r)}switch(e){case ve.bool:return Sj(t);case ve.float4:case ve.float8:case ve.int2:case ve.int4:case ve.int8:case ve.numeric:case ve.oid:return Dj(t);case ve.json:case ve.jsonb:return kj(t);case ve.timestamp:return Oj(t);case ve.abstime:case ve.date:case ve.daterange:case ve.int4range:case ve.int8range:case ve.money:case ve.reltime:case ve.text:case ve.time:case ve.timestamptz:case ve.timetz:case ve.tsrange:case ve.tstzrange:return Ec(t);default:return Ec(t)}},Ec=e=>e,Sj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Dj=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},kj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Pj=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Lx(t,l))}return e},Oj=e=>typeof e=="string"?e.replace(" ","T"):e,Ux=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class rl{constructor(t,r,n={},a=$x){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var yf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(yf||(yf={}));class Va{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Va.syncState(this.state,a,i,o),this.pendingDiffs.forEach(d=>{this.state=Va.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Va.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},d={};return this.map(i,(c,u)=>{o[c]||(d[c]=u)}),this.map(o,(c,u)=>{const f=i[c];if(f){const h=u.map(p=>p.presence_ref),m=f.map(p=>p.presence_ref),x=u.filter(p=>m.indexOf(p.presence_ref)<0),g=f.filter(p=>h.indexOf(p.presence_ref)<0);x.length>0&&(l[c]=x),g.length>0&&(d[c]=g)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:d},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,d)=>{var c;const u=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(d),u.length>0){const f=t[l].map(m=>m.presence_ref),h=u.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,u,d)}),this.map(o,(l,d)=>{let c=t[l];if(!c)return;const u=d.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),t[l]=c,a(l,c,d),c.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(bf||(bf={}));var wf;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(wf||(wf={}));var dr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(dr||(dr={}));class Fu{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new rl(this,Gt.join,this.params,this.timeout),this.rejoinTimer=new Rx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Va(this),this.broadcastEndpointURL=Ux(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==et.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(dr.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(dr.CLOSED));const d={},c={broadcast:i,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){t==null||t(dr.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,x=[];for(let g=0;g<m;g++){const p=h[g],{filter:{event:y,schema:b,table:v,filter:j}}=p,E=u&&u[g];if(E&&E.event===y&&E.schema===b&&E.table===v&&E.filter===j)x.push(Object.assign(Object.assign({},p),{id:E.id}));else{this.unsubscribe(),this.state=et.errored,t==null||t(dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(dr.SUBSCRIBED);return}}).receive("error",u=>{this.state=et.errored,t==null||t(dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=et.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new rl(this,Gt.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new rl(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:d,leave:c,join:u}=Gt;if(n&&[l,d,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var x,g,p;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((p=(g=m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var x,g,p,y,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,E=(x=m.filter)===null||x===void 0?void 0:x.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const j=(b=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const x=h.data,{schema:g,table:p,commit_timestamp:y,type:b,errors:v}=x;h=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:y,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(x))}m.callback(h,n)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Fu.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Gt.close,{},t)}_onError(t){this._on(Gt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=vf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=vf(t.columns,t.old_record)),r}}const jf=()=>{},Tj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ij{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$x,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jf,this.ref=0,this.logger=jf,this.conn=null,this.sendBuffer=[],this.serializer=new Ej,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>gi(async()=>{const{default:d}=await Promise.resolve().then(()=>ya);return{default:d}},void 0).then(({default:d})=>d(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Nc.websocket}`,this.httpEndpoint=Ux(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Rx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=wj),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Aj}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ga.connecting:return ln.Connecting;case Ga.open:return ln.Open;case Ga.closing:return ln.Closing;default:return ln.Closed}}isConnected(){return this.connectionState()===ln.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Fu(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:_j};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Gt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Nj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:o}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Gt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Tj],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Mu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ze(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Bj extends Mu{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Cc extends Mu{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Fj=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(f){o(f)}}function d(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};const zx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gi(async()=>{const{default:n}=await Promise.resolve().then(()=>ya);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Mj=()=>Fj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gi(()=>Promise.resolve().then(()=>ya),void 0)).Response:Response}),Sc=e=>{if(Array.isArray(e))return e.map(r=>Sc(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Sc(n)}),t};var kn=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(f){o(f)}}function d(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};const nl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$j=(e,t,r)=>kn(void 0,void 0,void 0,function*(){const n=yield Mj();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new Bj(nl(a),e.status||500))}).catch(a=>{t(new Cc(nl(a),a))}):t(new Cc(nl(e),e))}),Rj=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function yi(e,t,r,n,a,i){return kn(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,Rj(t,n,a,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>$j(d,l,n))})})}function ns(e,t,r,n){return kn(this,void 0,void 0,function*(){return yi(e,"GET",t,r,n)})}function Fr(e,t,r,n,a){return kn(this,void 0,void 0,function*(){return yi(e,"POST",t,n,a,r)})}function Lj(e,t,r,n,a){return kn(this,void 0,void 0,function*(){return yi(e,"PUT",t,n,a,r)})}function Uj(e,t,r,n){return kn(this,void 0,void 0,function*(){return yi(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Kx(e,t,r,n,a){return kn(this,void 0,void 0,function*(){return yi(e,"DELETE",t,n,a,r)})}var ct=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(f){o(f)}}function d(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};const zj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_f={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Kj{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=zx(a)}uploadOrUpdate(t,r,n,a){return ct(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},_f),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(ze(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return ct(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:_f.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",c.cacheControl)):(d=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:d,headers:u}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(d){if(ze(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return ct(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Fr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Mu("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}})}update(t,r,n){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ct(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ze(a))return{data:null,error:a};throw a}})}copy(t,r,n){return ct(this,void 0,void 0,function*(){try{return{data:{path:(yield Fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ze(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return ct(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Fr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(ze(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return ct(this,void 0,void 0,function*(){try{const a=yield Fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(ze(a))return{data:null,error:a};throw a}})}download(t,r){return ct(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ns(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ze(l))return{data:null,error:l};throw l}})}info(t){return ct(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ns(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Sc(n),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}})}exists(t){return ct(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Uj(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ze(n)&&n instanceof Cc){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&a.push(d);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(t){return ct(this,void 0,void 0,function*(){try{return{data:yield Kx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}})}list(t,r,n){return ct(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},zj),r),{prefix:t||""});return{data:yield Fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(ze(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const qj="2.7.1",Wj={"X-Client-Info":`storage-js/${qj}`};var Ln=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(f){o(f)}}function d(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};class Hj{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Wj),r),this.fetch=zx(n)}listBuckets(){return Ln(this,void 0,void 0,function*(){try{return{data:yield ns(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ze(t))return{data:null,error:t};throw t}})}getBucket(t){return Ln(this,void 0,void 0,function*(){try{return{data:yield ns(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ln(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ln(this,void 0,void 0,function*(){try{return{data:yield Lj(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ln(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ln(this,void 0,void 0,function*(){try{return{data:yield Kx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}})}}class Gj extends Hj{constructor(t,r={},n){super(t,r,n)}from(t){return new Kj(this.url,this.headers,t,this.fetch)}}const Vj="2.52.1";let Ka="";typeof Deno<"u"?Ka="deno":typeof document<"u"?Ka="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ka="react-native":Ka="node";const Yj={"X-Client-Info":`supabase-js-${Ka}/${Vj}`},Xj={headers:Yj},Jj={schema:"public"},Zj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qj={};var e2=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(f){o(f)}}function d(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};const t2=e=>{let t;return e?t=e:typeof fetch>"u"?t=Cx:t=fetch,(...r)=>t(...r)},r2=()=>typeof Headers>"u"?Sx:Headers,n2=(e,t,r)=>{const n=t2(r),a=r2();return(i,o)=>e2(void 0,void 0,void 0,function*(){var l;const d=(l=yield t())!==null&&l!==void 0?l:e;let c=new a(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var a2=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(f){o(f)}}function d(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};function i2(e){return e.endsWith("/")?e:e+"/"}function s2(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:d,auth:c,realtime:u,global:f}=t,h={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>a2(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const qx="2.71.1",Gn=30*1e3,Dc=3,al=Dc*Gn,o2="http://localhost:9999",l2="supabase.auth.token",c2={"X-Client-Info":`gotrue-js/${qx}`},kc="X-Supabase-Api-Version",Wx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},u2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,d2=10*60*1e3;class $u extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function se(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class f2 extends $u{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function h2(e){return se(e)&&e.name==="AuthApiError"}class Hx extends $u{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Gr extends $u{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Br extends Gr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function m2(e){return se(e)&&e.name==="AuthSessionMissingError"}class Fi extends Gr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mi extends Gr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $i extends Gr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function p2(e){return se(e)&&e.name==="AuthImplicitGrantRedirectError"}class Af extends Gr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pc extends Gr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function il(e){return se(e)&&e.name==="AuthRetryableFetchError"}class Nf extends Gr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Oc extends Gr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const as="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ef=` 	
\r=`.split(""),x2=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ef.length;t+=1)e[Ef[t].charCodeAt(0)]=-2;for(let t=0;t<as.length;t+=1)e[as[t].charCodeAt(0)]=t;return e})();function Cf(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(as[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(as[n]),t.queuedBits-=6}}function Gx(e,t,r){const n=x2[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Sf(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{y2(o,n,r)};for(let o=0;o<e.length;o+=1)Gx(e.charCodeAt(o),a,i);return t.join("")}function g2(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function v2(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}g2(n,t)}}function y2(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function b2(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Gx(e.charCodeAt(a),r,n);return new Uint8Array(t)}function w2(e){const t=[];return v2(e,r=>t.push(r)),new Uint8Array(t)}function j2(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Cf(a,r,n)),Cf(null,r,n),t.join("")}function _2(e){return Math.round(Date.now()/1e3)+e}function A2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ht=()=>typeof window<"u"&&typeof document<"u",tn={tested:!1,writable:!1},Vx=()=>{if(!Ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tn.tested)return tn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tn.tested=!0,tn.writable=!0}catch{tn.tested=!0,tn.writable=!1}return tn.writable};function N2(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const Yx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gi(async()=>{const{default:n}=await Promise.resolve().then(()=>ya);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},E2=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Vn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},rn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Or=async(e,t)=>{await e.removeItem(t)};class Xs{constructor(){this.promise=new Xs.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Xs.promiseConstructor=Promise;function sl(e){const t=e.split(".");if(t.length!==3)throw new Oc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!u2.test(t[n]))throw new Oc("JWT not in base64url format");return{header:JSON.parse(Sf(t[0])),payload:JSON.parse(Sf(t[1])),signature:b2(t[2]),raw:{header:t[0],payload:t[1]}}}async function C2(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function S2(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function D2(e){return("0"+e.toString(16)).substr(-2)}function k2(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,D2).join("")}async function P2(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function O2(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await P2(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Un(e,t,r=!1){const n=k2();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Vn(e,`${t}-code-verifier`,a);const i=await O2(n);return[i,n===i?"plain":"s256"]}const T2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function I2(e){const t=e.headers.get(kc);if(!t||!t.match(T2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function B2(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function F2(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const M2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zn(e){if(!M2.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ol(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Df(e){return JSON.parse(JSON.stringify(e))}var $2=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const nn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),R2=[502,503,504];async function kf(e){var t;if(!E2(e))throw new Pc(nn(e),0);if(R2.includes(e.status))throw new Pc(nn(e),e.status);let r;try{r=await e.json()}catch(i){throw new Hx(nn(i),i)}let n;const a=I2(e);if(a&&a.getTime()>=Wx["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Nf(nn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Br}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Nf(nn(r),e.status,r.weak_password.reasons);throw new f2(nn(r),e.status||500,n)}const L2=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function oe(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[kc]||(i[kc]=Wx["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await U2(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function U2(e,t,r,n,a,i){const o=L2(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(d){throw console.error(d),new Pc(nn(d),0)}if(l.ok||await kf(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(d){await kf(d)}}function ur(e){var t;let r=null;W2(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=_2(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Pf(e){const t=ur(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function $r(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function z2(e){return{data:e,error:null}}function K2(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=$2(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function q2(e){return e}function W2(e){return e.access_token&&e.refresh_token&&e.expires_in}const ll=["global","local","others"];var H2=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class G2{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Yx(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=ll[0]){if(ll.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ll.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:$r})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=H2(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:K2,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(se(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:$r})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,d;try{const c={nextPage:null,lastPage:0,total:0},u=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:q2});if(u.error)throw u.error;const f=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(d=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(x.split(";")[1].split("=")[1]);c[`${p}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(se(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){zn(t);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:$r})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){zn(t);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:$r})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){zn(t);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:$r})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){zn(t.userId);try{const{data:r,error:n}=await oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteFactor(t){zn(t.userId),zn(t.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}}function Of(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function V2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Kn={debug:!!(globalThis&&Vx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Xx extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Y2 extends Xx{}async function X2(e,t,r){Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Y2(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Kn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}V2();const J2={url:o2,storageKey:l2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:c2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Tf(e,t,r){return await r()}const qn={};class ti{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ti.nextInstanceID,ti.nextInstanceID+=1,this.instanceID>0&&Ht()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},J2),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new G2({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Yx(a.fetch),this.lock=a.lock||Tf,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ht()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=X2:this.lock=Tf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Vx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Of(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Of(this.memoryStorage)),Ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=qn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){qn[this.storageKey]=Object.assign(Object.assign({},qn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=qn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){qn[this.storageKey]=Object.assign(Object.assign({},qn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qx}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=N2(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ht()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),p2(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return se(r)?{error:r}:{error:new Hx("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ur}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(se(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:f,options:h}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Un(this.storage,this.storageKey)),i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:x},xform:ur})}else if("phone"in t){const{phone:u,password:f,options:h}=t;i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ur})}else throw new Mi("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(se(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Pf})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Pf})}else throw new Mi("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Fi}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(se(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,d,c,u,f,h,m;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:p,wallet:y,statement:b,options:v}=t;let j;if(Ht())if(typeof y=="object")j=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const E=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),b?{statement:b}:null));let C;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")C=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)C=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)x=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${E.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(a=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:p,error:y}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:j2(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ur});if(y)throw y;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Fi}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:y})}catch(p){if(se(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const r=await rn(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ur});if(await Or(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Fi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(se(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ur}),{data:d,error:c}=l;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Fi}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(se(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:d}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Un(this.storage,this.storageKey));const{error:f}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:d}=t,{data:c,error:u}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Mi("You must provide either an email or phone number.")}catch(l){if(se(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:ur});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,c=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(a){if(se(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Un(this.storage,this.storageKey)),await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:z2})}catch(i){if(se(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Br;const{error:a}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(se(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Mi("You must provide either an email or phone number and a type")}catch(r){if(se(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await rn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<al:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await rn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ol()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:$r}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Br}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:$r})})}catch(r){if(se(r))return m2(r)&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Br;const o=a.session;let l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=await Un(this.storage,this.storageKey));const{data:c,error:u}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:$r});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Br;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=sl(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(se(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Br;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(se(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ht())throw new $i("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $i(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Af("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $i("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Af("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:c}=t;if(!i||!l||!o||!c)throw new $i("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let h=u+f;d&&(h=parseInt(d));const m=h-u;m*1e3<=Gn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const x=h-f;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,h,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,h,u);const{data:g,error:p}=await this._getUser(i);if(p)throw p;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(se(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await rn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(h2(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=A2(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Un(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(se(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,d,c,u;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Ht()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(se(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await S2(async a=>(a>0&&await C2(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ur})),(a,i)=>{const o=200*Math.pow(2,a);return i&&il(i)&&Date.now()+o-n<Gn})}catch(n){if(this._debug(r,"error",n),se(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ht()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await rn(this.storage,this.storageKey);if(a&&this.userStorage){let o=await rn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Vn(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ol()}else if(a&&!a.user&&!a.user){const o=await rn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Or(this.storage,this.storageKey+"-user"),await Vn(this.storage,this.storageKey,a)):a.user=ol()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<al;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${al}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),il(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Br;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Xs;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Br;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),se(i)){const o={session:null,error:i};return il(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Vn(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=Df(a);await Vn(this.storage,this.storageKey,i)}else{const a=Df(r);await Vn(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Or(this.storage,this.storageKey),await Or(this.storage,this.storageKey+"-code-verifier"),await Or(this.storage,this.storageKey+"-user"),this.userStorage&&await Or(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Gn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Gn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Gn}ms, refresh threshold is ${Dc} ticks`),a<=Dc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Xx)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Un(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:c}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(se(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(se(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=sl(a.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+d2>a)return n;const{data:i,error:o}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:d}}=sl(n);r!=null&&r.allowExpired||B2(i.exp);const c=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const u=F2(a.alg),f=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,w2(`${l}.${d}`)))throw new Oc("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}}ti.nextInstanceID=0;const Z2=ti;class Q2 extends Z2{constructor(t){super(t)}}var e_=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(f){o(f)}}function d(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};class t_{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=i2(t),d=new URL(l);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Jj,realtime:Qj,auth:Object.assign(Object.assign({},Zj),{storageKey:c}),global:Xj},f=s2(n??{},u);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=n2(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new yj(new URL("rest/v1",d).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new Y1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Gj(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return e_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:d},c,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Q2({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Ij(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const r_=(e,t,r)=>new t_(e,t,r);function n_(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}n_()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const a_="https://abgtunvbbtlhsjphsvqq.supabase.co",i_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiZ3R1bnZiYnRsaHNqcGhzdnFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNjIxODcsImV4cCI6MjA2NTgzODE4N30.ypdWuAOSQkv30M98pm_p0kx6JhIU-CCE9s-LcwX8gTQ",rt=r_(a_,i_),s_=w.createContext(void 0),cl=!0,Jx=w.createContext(void 0),Ru=()=>{const e=w.useContext(Jx);w.useContext(s_);{if(e===void 0)throw new Error("useAuth must be used within a DemoAuthProvider");return e}},o_=({children:e})=>{const[t,r]=w.useState(!0),[n,a]=w.useState(!1),i={id:"demo-admin-id",email:"admin@acmenonprofit.org",user_metadata:{full_name:"Sarah Johnson"}},u={user:t?i:null,session:t?{user:i,access_token:"demo-access-token"}:null,loading:n,signIn:async(f,h)=>{a(!0),await new Promise(m=>setTimeout(m,1e3)),r(!0),a(!1)},signUp:async(f,h)=>{a(!0),await new Promise(m=>setTimeout(m,1e3)),r(!0),a(!1)},signOut:async()=>{r(!1)}};return s.jsx(Jx.Provider,{value:u,children:e})},l_=({onToggleMode:e,isSignUp:t})=>{const[r,n]=w.useState(""),[a,i]=w.useState(""),[o,l]=w.useState(!1),[d,c]=w.useState(!1),[u,f]=w.useState(null),{signIn:h,signUp:m}=Ru(),x=async g=>{g.preventDefault(),c(!0),f(null);try{t?(await m(r,a),alert("Account created successfully! You can now sign in."),e()):await h(r,a)}catch(p){console.error("Authentication error:",p);let y="An error occurred";p instanceof Error&&(p.message.includes("Invalid login credentials")?y="Invalid email or password":p.message.includes("Email not confirmed")?y="Please check your email and confirm your account":p.message.includes("User already registered")?y="An account with this email already exists":y=p.message),f(y)}finally{c(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-blue-100",children:s.jsx(es,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:t?"Create your account":"Sign in to Adminizer"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:t?"Join your organization":"Access your document management system"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[u&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx(Zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:g=>n(g.target.value),className:"pl-10 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email",disabled:d})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx(es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{id:"password",name:"password",type:o?"text":"password",autoComplete:t?"new-password":"current-password",required:!0,value:a,onChange:g=>i(g.target.value),className:"pl-10 pr-10 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password",disabled:d}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:d,children:o?s.jsx(pc,{className:"h-5 w-5"}):s.jsx(jn,{className:"h-5 w-5"})})]})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:d?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Creating account...":"Signing in..."]}):t?"Create account":"Sign in"})}),s.jsx("div",{className:"text-center",children:s.jsx("button",{type:"button",onClick:e,className:"text-sm text-blue-600 hover:text-blue-500 font-medium",disabled:d,children:t?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})},c_=({children:e})=>{const{user:t,loading:r}=Ru(),[n,a]=Tt.useState(!1);return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):t?s.jsx(s.Fragment,{children:e}):s.jsx(l_,{onToggleMode:()=>a(!n),isSignUp:n})},u_=[{id:"demo-doc-1",name:"Employee Handbook 2024.pdf",category:"HR",upload_date:"2024-01-15",expiry_date:"2024-12-31",size:2048576,status:"Active",file_path:"demo/employee-handbook.pdf",tags:["handbook","policies","hr"],description:"Updated employee handbook with new policies and procedures",organization_id:"demo-org-1",created_at:"2024-01-15T10:00:00Z",updated_at:"2024-01-15T10:00:00Z"},{id:"demo-doc-2",name:"Q4 Financial Report.xlsx",category:"Accounting",upload_date:"2024-01-10",expiry_date:null,size:1024e3,status:"Active",file_path:"demo/q4-financial-report.xlsx",tags:["financial","quarterly","report"],description:"Fourth quarter financial performance report",organization_id:"demo-org-1",created_at:"2024-01-10T14:30:00Z",updated_at:"2024-01-10T14:30:00Z"},{id:"demo-doc-3",name:"Brand Guidelines.pdf",category:"Branding",upload_date:"2024-01-08",expiry_date:"2025-01-08",size:512e4,status:"Active",file_path:"demo/brand-guidelines.pdf",tags:["branding","design","guidelines"],description:"Official brand guidelines and design standards",organization_id:"demo-org-1",created_at:"2024-01-08T09:15:00Z",updated_at:"2024-01-08T09:15:00Z"},{id:"demo-doc-4",name:"Social Media Calendar.xlsx",category:"Social Media",upload_date:"2024-01-05",expiry_date:"2024-03-31",size:512e3,status:"Expiring Soon",file_path:"demo/social-media-calendar.xlsx",tags:["social media","calendar","planning"],description:"Q1 social media content calendar and posting schedule",organization_id:"demo-org-1",created_at:"2024-01-05T16:45:00Z",updated_at:"2024-01-05T16:45:00Z"},{id:"demo-doc-5",name:"Legal Compliance Checklist.pdf",category:"Legal",upload_date:"2023-12-20",expiry_date:"2023-12-31",size:256e3,status:"Overdue",file_path:"demo/legal-compliance.pdf",tags:["legal","compliance","checklist"],description:"Annual legal compliance requirements checklist",organization_id:"demo-org-1",created_at:"2023-12-20T11:20:00Z",updated_at:"2023-12-20T11:20:00Z"}],d_=()=>{const[e,t]=w.useState(u_),[r,n]=w.useState(!1),[a]=w.useState(null);return{documents:e,loading:r,error:a,uploadDocument:async(f,h)=>{n(!0),await new Promise(x=>setTimeout(x,1e3));const m={id:`demo-doc-${Date.now()}`,name:f.name,category:h.category,upload_date:new Date().toISOString().split("T")[0],expiry_date:h.expiryDate||null,size:f.size,status:"Active",file_path:`demo/${f.name}`,tags:h.tags,description:h.description||null,organization_id:"demo-org-1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return t(x=>[m,...x]),n(!1),m},updateDocument:async(f,h)=>{const m=e.find(g=>g.id===f);if(!m)throw new Error("Document not found");const x={...m,...h,updated_at:new Date().toISOString()};return t(g=>g.map(p=>p.id===f?x:p)),x},deleteDocument:async f=>{t(h=>h.filter(m=>m.id!==f))},downloadDocument:async(f,h)=>{const m=new Blob(["Demo file content"],{type:"text/plain"}),x=URL.createObjectURL(m),g=document.createElement("a");g.href=x,g.download=h,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(x)},readDocumentContent:async f=>`First Name,Last Name,Amount,Date
John,Smith,100.00,2024-01-15
Jane,Doe,250.50,2024-01-20
Bob,Johnson,75.00,2024-01-25`,refetch:async()=>{}}},f_=[{id:"demo-conn-1",provider_id:"google-workspace",user_id:"demo-admin-id",organization_id:"demo-org-1",access_token:"demo-access-token-1",refresh_token:"demo-refresh-token-1",expires_at:new Date(Date.now()+36e5).toISOString(),scopes:["https://www.googleapis.com/auth/userinfo.email"],is_active:!0,created_at:"2024-01-15T10:00:00Z",updated_at:"2024-01-15T10:00:00Z"},{id:"demo-conn-2",provider_id:"youtube",user_id:"demo-admin-id",organization_id:"demo-org-1",access_token:"demo-access-token-2",refresh_token:"demo-refresh-token-2",expires_at:new Date(Date.now()+36e5).toISOString(),scopes:["https://www.googleapis.com/auth/youtube"],is_active:!0,created_at:"2024-01-15T10:00:00Z",updated_at:"2024-01-15T10:00:00Z"}],h_=()=>{const[e,t]=w.useState(f_),[r,n]=w.useState(!1),[a,i]=w.useState(null);return{connections:e,loading:r,error:a,initiateOAuth:x=>{console.log(`Demo: Initiating OAuth for ${x}`),alert(`Demo: OAuth connection to ${x} would be initiated here`)},handleOAuthCallback:async(x,g,p)=>!0,disconnectProvider:async x=>{t(g=>g.filter(p=>p.id!==x))},getAccessToken:async x=>{const g=e.find(p=>p.provider_id===x&&p.is_active);return(g==null?void 0:g.access_token)||null},isConnected:x=>e.some(g=>g.provider_id===x&&g.is_active),getConnection:x=>e.find(g=>g.provider_id===x&&g.is_active)||null,launchService:async(x,g)=>{console.log(`Demo: Launching ${x} service`),window.open(g,"_blank")},refetch:async()=>{}}},Zx={id:"demo-admin-id",email:"admin@demo.com",full_name:"Demo Administrator",role:"master_admin",organization_id:"demo-org-1",is_active:!0,invited_by:null,invited_at:null,last_login:new Date().toISOString(),created_at:"2024-01-01T00:00:00Z",updated_at:new Date().toISOString()},If={id:"demo-org-1",name:"Demo Organization",created_by:"demo-admin-id",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},m_=[Zx,{id:"demo-user-1",email:"user1@demo.com",full_name:"Demo User 1",role:"user",organization_id:"demo-org-1",is_active:!0,invited_by:"demo-admin-id",invited_at:"2024-01-02T00:00:00Z",last_login:"2024-01-15T10:00:00Z",created_at:"2024-01-02T00:00:00Z",updated_at:"2024-01-02T00:00:00Z"},{id:"demo-user-2",email:"user2@demo.com",full_name:"Demo User 2",role:"admin",organization_id:"demo-org-1",is_active:!0,invited_by:"demo-admin-id",invited_at:"2024-01-03T00:00:00Z",last_login:"2024-01-14T15:30:00Z",created_at:"2024-01-03T00:00:00Z",updated_at:"2024-01-03T00:00:00Z"}],p_=[{id:"demo-invite-1",email:"newuser@demo.com",role:"user",organization_id:"demo-org-1",invited_by:"demo-admin-id",token:"demo-token-123",expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString(),accepted_at:null,created_at:new Date().toISOString()}],x_=()=>{const[e]=w.useState(Zx),[t]=w.useState(If),[r,n]=w.useState(m_),[a,i]=w.useState(p_),[o]=w.useState(!1),[l]=w.useState(null),d=async b=>If,c=async b=>{const v={id:`demo-invite-${Date.now()}`,email:b.email,role:b.role,organization_id:"demo-org-1",invited_by:"demo-admin-id",token:`demo-token-${Date.now()}`,expires_at:new Date(Date.now()+6048e5).toISOString(),accepted_at:null,created_at:new Date().toISOString()};return i(j=>[v,...j]),v},u=async(b,v)=>({user:{id:"demo-new-user",email:"newuser@demo.com"}}),f=async(b,v)=>{n(j=>j.map(E=>E.id===b?{...E,role:v,updated_at:new Date().toISOString()}:E))},h=async b=>{n(v=>v.map(j=>j.id===b?{...j,is_active:!1,updated_at:new Date().toISOString()}:j))},m=async b=>{n(v=>v.map(j=>j.id===b?{...j,is_active:!0,updated_at:new Date().toISOString()}:j))},x=async b=>{i(v=>v.filter(j=>j.id!==b))},g=async()=>{},p=(e==null?void 0:e.role)==="master_admin"||(e==null?void 0:e.role)==="admin",y=(e==null?void 0:e.role)==="master_admin";return{userProfile:e,organization:t,users:r,invitations:a,loading:o,error:l,isAdmin:p,isMasterAdmin:y,createOrganization:d,inviteUser:c,acceptInvitation:u,updateUserRole:f,deactivateUser:h,reactivateUser:m,cancelInvitation:x,refetch:g}},Yn={"google-workspace":{id:"google-workspace",name:"Google Workspace",description:"Access Gmail, Drive, Calendar, and other Google services",category:"Productivity",authUrl:"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:"https://oauth2.googleapis.com/token",scopes:["https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/calendar.readonly"],redirectUri:`${window.location.origin}/oauth/callback/google-workspace`,isConfigured:!1,supportsOAuth:!0},"google-search-console":{id:"google-search-console",name:"Google Search Console",description:"Monitor and optimize your website's search performance",category:"Analytics",authUrl:"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:"https://oauth2.googleapis.com/token",scopes:["https://www.googleapis.com/auth/webmasters.readonly","https://www.googleapis.com/auth/webmasters"],redirectUri:`${window.location.origin}/oauth/callback/google-search-console`,isConfigured:!1,supportsOAuth:!0},youtube:{id:"youtube",name:"YouTube",description:"Video hosting and management platform",category:"Video Platform",authUrl:"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:"https://oauth2.googleapis.com/token",scopes:["https://www.googleapis.com/auth/youtube","https://www.googleapis.com/auth/youtube.upload","https://www.googleapis.com/auth/youtube.readonly","https://www.googleapis.com/auth/youtubepartner"],redirectUri:`${window.location.origin}/oauth/callback/youtube`,isConfigured:!1,supportsOAuth:!0},"microsoft-365":{id:"microsoft-365",name:"Microsoft 365",description:"Access Outlook, OneDrive, Teams, and other Microsoft services",category:"Productivity",authUrl:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",tokenUrl:"https://login.microsoftonline.com/common/oauth2/v2.0/token",scopes:["https://graph.microsoft.com/User.Read","https://graph.microsoft.com/Files.Read","https://graph.microsoft.com/Calendars.Read"],redirectUri:`${window.location.origin}/oauth/callback/microsoft-365`,isConfigured:!1,supportsOAuth:!0},quickbooks:{id:"quickbooks",name:"QuickBooks Online",description:"Access your QuickBooks accounting data",category:"Accounting",authUrl:"https://appcenter.intuit.com/connect/oauth2",tokenUrl:"https://oauth.platform.intuit.com/oauth2/v1/tokens/bearer",scopes:["com.intuit.quickbooks.accounting"],redirectUri:`${window.location.origin}/oauth/callback/quickbooks`,isConfigured:!1,supportsOAuth:!0},slack:{id:"slack",name:"Slack",description:"Access your Slack workspace",category:"Communication",authUrl:"https://slack.com/oauth/v2/authorize",tokenUrl:"https://slack.com/api/oauth.v2.access",scopes:["channels:read","chat:write","users:read"],redirectUri:`${window.location.origin}/oauth/callback/slack`,isConfigured:!1,supportsOAuth:!0},mailchimp:{id:"mailchimp",name:"Mailchimp",description:"Access your Mailchimp marketing campaigns",category:"Marketing",authUrl:"https://login.mailchimp.com/oauth2/authorize",tokenUrl:"https://login.mailchimp.com/oauth2/token",scopes:[],redirectUri:`${window.location.origin}/oauth/callback/mailchimp`,isConfigured:!1,supportsOAuth:!0},gusto:{id:"gusto",name:"Gusto",description:"Payroll, benefits, and HR management",category:"Payroll",authUrl:"https://api.gusto-demo.com/oauth/authorize",tokenUrl:"https://api.gusto-demo.com/oauth/token",scopes:["employee:read","company:read","payroll:read"],redirectUri:`${window.location.origin}/oauth/callback/gusto`,isConfigured:!1,supportsOAuth:!0},bamboohr:{id:"bamboohr",name:"BambooHR",description:"HR software with employee data management",category:"HRIS",authUrl:"https://api.bamboohr.com/api/gateway.php/[company]/v1/login",tokenUrl:"https://api.bamboohr.com/api/gateway.php/[company]/v1/login",scopes:["employee:read","company:read"],redirectUri:`${window.location.origin}/oauth/callback/bamboohr`,isConfigured:!1,supportsOAuth:!0},github:{id:"github",name:"GitHub",description:"Code repository and collaboration platform",category:"Development",authUrl:"https://github.com/login/oauth/authorize",tokenUrl:"https://github.com/login/oauth/access_token",scopes:["repo","user:email","read:org"],redirectUri:`${window.location.origin}/oauth/callback/github`,isConfigured:!1,supportsOAuth:!0}},cn=class cn{static getInstance(){return cn.instance||(cn.instance=new cn),cn.instance}generateAuthUrl(t,r){const n=Yn[t];if(!n)throw new Error(`Provider ${t} not found`);const a=new URLSearchParams({client_id:n.clientId||"",redirect_uri:n.redirectUri,scope:n.scopes.join(" "),response_type:"code",access_type:"offline",prompt:"consent",state:r||crypto.randomUUID()});return`${n.authUrl}?${a.toString()}`}async exchangeCodeForToken(t,r){const n=Yn[t];if(!n)throw new Error(`Provider ${t} not found`);const a=await this.getOAuthConfig(t);if(!a)throw new Error(`OAuth not configured for ${t}`);const i={client_id:a.client_id,client_secret:a.client_secret,code:r,grant_type:"authorization_code",redirect_uri:n.redirectUri},o=await fetch(n.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams(i)});if(!o.ok)throw new Error(`Token exchange failed: ${o.statusText}`);const l=await o.json();return l.expires_at=Date.now()+l.expires_in*1e3,l}async storeConnection(t,r,n,a){const{data:i,error:o}=await rt.from("oauth_connections").insert({provider_id:t,user_id:n,organization_id:a,access_token:r.access_token,refresh_token:r.refresh_token,expires_at:new Date(r.expires_at).toISOString(),scopes:Yn[t].scopes,is_active:!0}).select().single();if(o)throw o;return i}async getConnection(t,r){const{data:n,error:a}=await rt.from("oauth_connections").select("*").eq("provider_id",t).eq("user_id",r).eq("is_active",!0).limit(1);if(a)throw a;return n&&n.length>0?n[0]:null}async refreshToken(t){const r=Yn[t.provider_id];if(!r||!t.refresh_token)throw new Error("Cannot refresh token");const n=await this.getOAuthConfig(t.provider_id);if(!n)throw new Error(`OAuth not configured for ${t.provider_id}`);const a={client_id:n.client_id,client_secret:n.client_secret,refresh_token:t.refresh_token,grant_type:"refresh_token"},i=await fetch(r.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams(a)});if(!i.ok)throw new Error(`Token refresh failed: ${i.statusText}`);const o=await i.json();return o.expires_at=Date.now()+o.expires_in*1e3,await rt.from("oauth_connections").update({access_token:o.access_token,refresh_token:o.refresh_token||t.refresh_token,expires_at:new Date(o.expires_at).toISOString()}).eq("id",t.id),o}async getValidToken(t,r){const n=await this.getConnection(t,r);if(!n)return null;const a=Date.now();if(new Date(n.expires_at).getTime()-a<5*60*1e3)try{return(await this.refreshToken(n)).access_token}catch(o){return console.error("Failed to refresh token:",o),null}return n.access_token}async revokeConnection(t){const{error:r}=await rt.from("oauth_connections").update({is_active:!1}).eq("id",t);if(r)throw r}async getOAuthConfig(t){const{data:r,error:n}=await rt.from("oauth_configs").select("*").eq("provider_id",t).limit(1);if(n)throw n;return r&&r.length>0?r[0]:null}supportsOAuth(t){const r=Yn[t];return(r==null?void 0:r.supportsOAuth)||!1}async getConfiguredProviders(t){const{data:r,error:n}=await rt.from("oauth_configs").select("provider_id").eq("organization_id",t);if(n)throw n;return r.map(a=>a.provider_id)}};nr(cn,"instance");let Tc=cn;const g_=Tc.getInstance(),Nr=d_,Lu=h_,Lt=x_,Qx="2.1.0",v_=()=>({version:Qx,buildDate:new Date().toISOString(),environment:"demo"}),y_={"blue-50":"#eff6ff","blue-100":"#dbeafe","blue-500":"#3b82f6","blue-600":"#2563eb","blue-700":"#1d4ed8","green-50":"#f0fdf4","green-100":"#dcfce7","green-500":"#22c55e","green-600":"#16a34a","green-700":"#15803d","purple-50":"#faf5ff","purple-100":"#f3e8ff","purple-500":"#a855f7","purple-600":"#9333ea","purple-700":"#7e22ce","pink-50":"#fdf2f8","pink-100":"#fce7f3","pink-500":"#ec4899","pink-600":"#db2777","pink-700":"#be185d","indigo-50":"#eef2ff","indigo-100":"#e0e7ff","indigo-500":"#6366f1","indigo-600":"#4f46e5","indigo-700":"#4338ca","orange-50":"#fff7ed","orange-100":"#ffedd5","orange-500":"#f97316","orange-600":"#ea580c","orange-700":"#c2410c","red-50":"#fef2f2","red-100":"#fee2e2","red-500":"#ef4444","red-600":"#dc2626","red-700":"#b91c1c","gray-50":"#f9fafb","gray-100":"#f3f4f6","gray-500":"#6b7280","gray-600":"#4b5563","gray-700":"#374151","cyan-50":"#ecfeff","cyan-100":"#cffafe","cyan-500":"#06b6d4","cyan-600":"#0891b2","cyan-700":"#0e7490","emerald-50":"#ecfdf5","emerald-100":"#d1fae5","emerald-500":"#10b981","emerald-600":"#059669","emerald-700":"#047857"};function ar(e){const t=e.match(/(blue|green|purple|pink|indigo|orange|red|gray|cyan|emerald)-(50|100|500|600|700)/);if(t){const r=`${t[1]}-${t[2]}`;return y_[r]||"#6b7280"}return"#6b7280"}const b_=()=>{const{documents:e,loading:t}=Nr(),{userProfile:r,organization:n,loading:a}=Lt(),i=Ar(),o=t||a,l=v_(),d=e.length,c=e.filter(v=>{if(!v.expiry_date)return!1;const j=new Date(v.expiry_date),E=xc(new Date,30);return N1(j,new Date)&&Xn(j,E)}).length,u=e.filter(v=>v.expiry_date?Xn(new Date(v.expiry_date),new Date):!1).length,f=[{label:"Total Documents",value:d.toString(),icon:$e,color:"bg-blue-500"},{label:"Expiring Soon",value:c.toString(),icon:gc,color:"bg-yellow-500"},{label:"Overdue",value:u.toString(),icon:Za,color:"bg-red-500"},{label:"Categories",value:new Set(e.map(v=>v.category)).size.toString(),icon:Qt,color:"bg-green-500"}],h=[{id:"foster-adopt",name:"Foster & Adopt",description:"Foster care and adoption services",icon:rx,color:"bg-pink-600 hover:bg-pink-700",textColor:"text-pink-600",bgColor:"bg-pink-50",route:"/department/foster-adopt"},{id:"r-kids",name:"R/Kids",description:"Children's ministry and programs",icon:nx,color:"bg-blue-600 hover:bg-blue-700",textColor:"text-blue-600",bgColor:"bg-blue-50",route:"/department/r-kids"},{id:"r-youth",name:"R/Youth",description:"Youth ministry and activities",icon:ax,color:"bg-green-600 hover:bg-green-700",textColor:"text-green-600",bgColor:"bg-green-50",route:"/department/r-youth"},{id:"creative-media",name:"Creative Media",description:"Media production and creative services",icon:ix,color:"bg-purple-600 hover:bg-purple-700",textColor:"text-purple-600",bgColor:"bg-purple-50",route:"/department/creative-media"},{id:"cge",name:"CGE",description:"Christian Growth & Education",icon:sx,color:"bg-indigo-600 hover:bg-indigo-700",textColor:"text-indigo-600",bgColor:"bg-indigo-50",route:"/department/cge"},{id:"worship",name:"Worship",description:"Worship ministry and music",icon:ox,color:"bg-orange-600 hover:bg-orange-700",textColor:"text-orange-600",bgColor:"bg-orange-50",route:"/department/worship"},{id:"sunday-production",name:"Sunday Production",description:"Sunday service production and technical",icon:lx,color:"bg-red-600 hover:bg-red-700",textColor:"text-red-600",bgColor:"bg-red-50",route:"/department/sunday-production"},{id:"elder-board",name:"Elder Board",description:"Elder board governance and decisions",icon:sr,color:"bg-gray-600 hover:bg-gray-700",textColor:"text-gray-600",bgColor:"bg-gray-50",route:"/department/elder-board"},{id:"deacon-board",name:"Deacon Board",description:"Deacon board service and support",icon:cx,color:"bg-cyan-600 hover:bg-cyan-700",textColor:"text-cyan-600",bgColor:"bg-cyan-50",route:"/department/deacon-board"}],m={id:"fundraising-donor-management",name:"Fundraising & Donor Management",description:"AI-powered donor analytics and fundraising insights",icon:va,color:"bg-emerald-600 hover:bg-emerald-700",textColor:"text-emerald-600",bgColor:"bg-emerald-50",route:"/department/fundraising-donor-management"},x=[...h,m],g=e.slice(0,5),p=e.filter(v=>v.expiry_date).sort((v,j)=>new Date(v.expiry_date).getTime()-new Date(j.expiry_date).getTime()).slice(0,5),y=v=>{i(v)},b=()=>{i("/operations")};return console.log("Dashboard render - loading:",o),console.log("Dashboard render - userProfile:",r),console.log("Dashboard render - organization:",n),console.log("Dashboard render - documents:",e.length),!o&&r&&!r.organization_id?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Welcome to Adminizer"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Let's get you set up with your organization"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[s.jsx("div",{className:"bg-blue-100 rounded-full p-6 mx-auto w-24 h-24 flex items-center justify-center mb-6",children:s.jsx(Qt,{className:"h-12 w-12 text-blue-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Set up your organization"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Create or join an organization to start managing documents and collaborating with your team."}),s.jsx("div",{className:"flex justify-center space-x-4",children:s.jsx("button",{onClick:()=>i("/users"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Set Up Organization"})})]})]}):o?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Welcome to your organization dashboard"})]}),s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[...Array(4)].map((v,j)=>s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsx("div",{className:"h-16 bg-gray-200 rounded"})},j))}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-8",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((v,j)=>s.jsx("div",{className:"h-48 bg-gray-200 rounded"},j))})]})]})]}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome to your organization dashboard",n&&s.jsx("span",{className:"block text-sm text-blue-600 mt-1",children:n.name})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(tx,{className:"h-4 w-4"}),s.jsxs("span",{children:["v",Qx]}),s.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:l.environment})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(v=>s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`${v.color} p-3 rounded-lg`,children:s.jsx(v.icon,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:v.label}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.value})]})]})},v.label))}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Business Departments"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Access your department-specific tools and resources"})]}),s.jsx("div",{className:"hexagon-grid",children:x.map(v=>s.jsx("div",{className:"hexagon-item",children:s.jsx("button",{onClick:()=>y(v.route),className:"hexagon-button group",style:{"--hex-border-color":"#e2e8f0","--hex-content-bg":"#ffffff","--hex-icon-color":ar(v.textColor),"--hex-title-color":"#1f2937","--hex-description-color":"#6b7280","--hex-hover-border-color":ar(v.color.replace("bg-","").replace(" hover:bg-","")),"--hex-hover-content-bg":ar(v.bgColor),"--hex-hover-icon-color":ar(v.color.replace("bg-","").replace(" hover:bg-","")),"--hex-hover-title-color":ar(v.color.replace("bg-","").replace(" hover:bg-","")),"--hex-hover-description-color":"#4b5563"},children:s.jsxs("div",{className:"hexagon-content",children:[s.jsx("div",{className:"hexagon-icon",children:s.jsx(v.icon,{className:"h-8 w-8"})}),s.jsx("h4",{className:"hexagon-title",children:v.name}),s.jsx("p",{className:"hexagon-description",children:v.description})]})})},v.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Business Operations"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Access administrative and operational tools"})]}),s.jsxs("button",{onClick:b,className:"group relative overflow-hidden rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-4 text-white transition-all duration-200 hover:from-blue-700 hover:to-indigo-700 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ux,{className:"h-6 w-6"}),s.jsx("span",{className:"text-lg font-semibold",children:"Operations Center"})]}),s.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-200"})]})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"bg-blue-100 rounded-lg p-3",children:s.jsx(_t,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Operations Center"}),s.jsx("p",{className:"text-blue-800 mb-4",children:"Access HR, Accounting, Legal, IT, and other administrative functions. Manage integrations, compliance, and organizational operations."}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-200 text-blue-800 rounded-full text-sm",children:"HR Management"}),s.jsx("span",{className:"px-3 py-1 bg-blue-200 text-blue-800 rounded-full text-sm",children:"Financial Operations"}),s.jsx("span",{className:"px-3 py-1 bg-blue-200 text-blue-800 rounded-full text-sm",children:"Legal Compliance"}),s.jsx("span",{className:"px-3 py-1 bg-blue-200 text-blue-800 rounded-full text-sm",children:"IT & Technology"})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Documents"}),s.jsx("button",{onClick:()=>i("/documents"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View all"})]}),s.jsx("div",{className:"space-y-3",children:g.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx($e,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"No documents uploaded yet"}),s.jsx("button",{onClick:()=>i("/upload"),className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Upload your first document"})]}):g.map(v=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.name}),s.jsx("p",{className:"text-sm text-gray-600",children:v.category})]}),s.jsx("span",{className:"text-xs text-gray-500",children:Ie(new Date(v.created_at),"MMM dd, yyyy")})]},v.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Renewals"}),s.jsx("button",{onClick:()=>i("/documents"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Manage"})]}),s.jsx("div",{className:"space-y-3",children:p.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(gc,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"No documents with expiry dates"}),s.jsx("button",{onClick:()=>i("/upload"),className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Add documents with expiry dates"})]}):p.map(v=>{const j=new Date(v.expiry_date),E=Xn(j,new Date),_=!E&&Xn(j,xc(new Date,30));return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Expires: ",Ie(j,"MMM dd, yyyy")]})]}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${E?"bg-red-100 text-red-800":_?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:E?"overdue":_?"soon":"ok"})]},v.id)})})]})]})]})},eg=({isOpen:e,onClose:t,document:r,onDownload:n})=>{const[a,i]=w.useState(null),[o,l]=w.useState(!1),[d,c]=w.useState(null);if(w.useEffect(()=>{if(!e||!r){i(null),c(null);return}(async()=>{l(!0),c(null);try{const{data:p,error:y}=await rt.storage.from("documents").createSignedUrl(r.file_path,3600);if(y){console.error("Error creating signed URL:",y);const{data:b}=rt.storage.from("documents").getPublicUrl(r.file_path);i(b.publicUrl)}else i(p.signedUrl)}catch(p){console.error("Error getting file URL:",p),c("Failed to load document")}finally{l(!1)}})()},[e,r]),!e||!r)return null;const u=g=>{var p;return((p=g.split(".").pop())==null?void 0:p.toLowerCase())||""},h=(g=>{const p=u(g);return["pdf"].includes(p)?"pdf":["jpg","jpeg","png","gif","webp","svg"].includes(p)?"image":["mp4","webm","ogg","mov"].includes(p)?"video":["mp3","wav","ogg","m4a"].includes(p)?"audio":["txt","md"].includes(p)?"text":["doc","docx","xls","xlsx","ppt","pptx"].includes(p)?"office":"other"})(r.name),m=g=>{if(g===0)return"0 Bytes";const p=1024,y=["Bytes","KB","MB","GB"],b=Math.floor(Math.log(g)/Math.log(p));return parseFloat((g/Math.pow(p,b)).toFixed(2))+" "+y[b]},x=()=>{if(o)return s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading document..."})]})});if(d||!a)return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[s.jsx("div",{className:"bg-red-100 rounded-full p-6 mb-4",children:s.jsx(vc,{className:"h-12 w-12 text-red-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unable to load document"}),s.jsx("p",{className:"text-gray-600 mb-6",children:d||"There was an issue loading this document. You can try downloading it instead."}),s.jsxs("button",{onClick:()=>n(r.file_path,r.name),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ur,{className:"h-4 w-4"}),s.jsx("span",{children:"Download File"})]})]});switch(h){case"pdf":return s.jsx("div",{className:"w-full h-full",children:s.jsx("iframe",{src:`${a}#toolbar=1&navpanes=1&scrollbar=1`,className:"w-full h-full border-0",title:r.name,onError:()=>c("PDF could not be displayed")})});case"image":return s.jsx("div",{className:"flex items-center justify-center h-full p-4",children:s.jsx("img",{src:a,alt:r.name,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg",onError:()=>c("Image could not be displayed")})});case"video":return s.jsx("div",{className:"flex items-center justify-center h-full p-4",children:s.jsx("video",{src:a,controls:!0,className:"max-w-full max-h-full rounded-lg shadow-lg",onError:()=>c("Video could not be displayed"),children:"Your browser does not support the video tag."})});case"audio":return s.jsx("div",{className:"flex items-center justify-center h-full p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-blue-100 rounded-full p-6 mb-4 mx-auto w-24 h-24 flex items-center justify-center",children:s.jsxs("svg",{className:"h-12 w-12 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:[s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM15.657 6.343a1 1 0 011.414 0A9.972 9.972 0 0119 12a9.972 9.972 0 01-1.929 5.657 1 1 0 11-1.414-1.414A7.971 7.971 0 0017 12a7.971 7.971 0 00-1.343-4.243 1 1 0 010-1.414z",clipRule:"evenodd"}),s.jsx("path",{fillRule:"evenodd",d:"M13.828 8.172a1 1 0 011.414 0A5.983 5.983 0 0117 12a5.983 5.983 0 01-1.758 3.828 1 1 0 11-1.414-1.414A3.987 3.987 0 0015 12a3.987 3.987 0 00-1.172-2.828 1 1 0 010-1.414z",clipRule:"evenodd"})]})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r.name}),s.jsx("audio",{src:a,controls:!0,className:"w-full max-w-md mx-auto",onError:()=>c("Audio could not be played"),children:"Your browser does not support the audio tag."})]})});case"text":return s.jsx("div",{className:"w-full h-full p-4",children:s.jsx("iframe",{src:a,className:"w-full h-full border border-gray-200 rounded-lg",title:r.name,onError:()=>c("Text file could not be displayed")})});case"office":return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[s.jsx("div",{className:"bg-blue-100 rounded-full p-6 mb-4",children:s.jsx("svg",{className:"h-12 w-12 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Office Document"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"This document type requires downloading to view. Click below to download and open with the appropriate application."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>n(r.file_path,r.name),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ur,{className:"h-4 w-4"}),s.jsx("span",{children:"Download File"})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Or try opening in"," ",s.jsx("a",{href:`https://view.officeapps.live.com/op/view.aspx?src=${encodeURIComponent(a)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline",children:"Office Online"})]})]})]});default:return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[s.jsx("div",{className:"bg-gray-100 rounded-full p-6 mb-4",children:s.jsx(vc,{className:"h-12 w-12 text-gray-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Preview not available"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"This file type cannot be previewed in the browser. Download the file to view its content."}),s.jsxs("button",{onClick:()=>n(r.file_path,r.name),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ur,{className:"h-4 w-4"}),s.jsx("span",{children:"Download File"})]})]})}};return s.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75",onClick:t}),s.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full h-full max-w-6xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:r.name}),s.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:r.category}),s.jsx("span",{children:m(r.size)}),s.jsx("span",{children:new Date(r.created_at).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>n(r.file_path,r.name),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Download",children:s.jsx(Ur,{className:"h-5 w-5"})}),s.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Close",children:s.jsx(Rt,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:x()})]})})]})},w_=({isOpen:e,onClose:t,document:r})=>{const{updateDocument:n}=Nr(),[a,i]=w.useState(!1),[o,l]=w.useState({category:(r==null?void 0:r.category)||"",expiryDate:(r==null?void 0:r.expiry_date)||"",tags:(r==null?void 0:r.tags.join(", "))||"",description:(r==null?void 0:r.description)||""}),d=["HR","Accounting","Branding","Social Media","Communications","Volunteer/People Management","Streaming: Video & Podcast","Reports","Governance","Legal","Funding","Financial","Operations","Other"];Tt.useEffect(()=>{r&&l({category:r.category,expiryDate:r.expiry_date||"",tags:r.tags.join(", "),description:r.description||""})},[r]);const c=async u=>{if(u.preventDefault(),!!r){i(!0);try{const f=o.tags.split(",").map(h=>h.trim()).filter(h=>h.length>0);await n(r.id,{category:o.category,expiry_date:o.expiryDate||null,tags:f,description:o.description||null}),t()}catch(f){alert("Failed to update document: "+(f instanceof Error?f.message:"Unknown error"))}finally{i(!1)}}};return!e||!r?null:s.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),s.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Document"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.name})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Rt,{className:"h-5 w-5"})})]}),s.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(zs,{className:"inline h-4 w-4 mr-1"}),"Category"]}),s.jsx("select",{value:o.category,onChange:u=>l(f=>({...f,category:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:a,children:d.map(u=>s.jsx("option",{value:u,children:u},u))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(pi,{className:"inline h-4 w-4 mr-1"}),"Expiry Date"]}),s.jsx("input",{type:"date",value:o.expiryDate,onChange:u=>l(f=>({...f,expiryDate:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),s.jsx("input",{type:"text",value:o.tags,onChange:u=>l(f=>({...f,tags:u.target.value})),placeholder:"Enter tags separated by commas",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx($e,{className:"inline h-4 w-4 mr-1"}),"Description"]}),s.jsx("textarea",{value:o.description,onChange:u=>l(f=>({...f,description:u.target.value})),rows:3,placeholder:"Add a description for this document",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:a,children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:a,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[s.jsx(xi,{className:"h-4 w-4"}),s.jsx("span",{children:a?"Saving...":"Save Changes"})]})]})]})]})})]})},j_=({isOpen:e,onClose:t,document:r,onSave:n})=>{const[a,i]=w.useState(""),[o,l]=w.useState(!1),[d,c]=w.useState(!1),[u,f]=w.useState(null);w.useEffect(()=>{if(!e||!r){i(""),f(null);return}(async()=>{l(!0),f(null);try{const{data:y,error:b}=await rt.storage.from("documents").download(r.file_path);if(b)throw b;const v=await y.text();i(v)}catch(y){console.error("Error loading document content:",y),f("Failed to load document content")}finally{l(!1)}})()},[e,r]);const h=async()=>{if(r){c(!0);try{const p=new Blob([a],{type:"text/plain"}),{error:y}=await rt.storage.from("documents").update(r.file_path,p);if(y)throw y;n(a),t()}catch(p){console.error("Error saving document:",p),f("Failed to save document")}finally{c(!1)}}},m=()=>{if(!r)return;const p=new Blob([a],{type:"text/plain"}),y=URL.createObjectURL(p),b=document.createElement("a");b.href=y,b.download=r.name,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(y)};if(!e||!r)return null;const x=p=>{var y;return((y=p.split(".").pop())==null?void 0:y.toLowerCase())||""};return(p=>{const y=x(p);return["txt","md","csv","json","xml","html","css","js","ts","jsx","tsx"].includes(y)})(r.name)?s.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),s.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full h-full max-w-6xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:["Editing: ",r.name]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:r.category}),s.jsx("span",{children:new Date(r.created_at).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{onClick:m,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Download",disabled:o,children:s.jsx(Ur,{className:"h-5 w-5"})}),s.jsxs("button",{onClick:h,disabled:d||o,className:"flex items-center space-x-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",title:"Save",children:[s.jsx(xi,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:d?"Saving...":"Save"})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Close",children:s.jsx(Rt,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden p-4",children:o?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading document..."})]})}):u?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-red-100 rounded-full p-6 mb-4 mx-auto w-24 h-24 flex items-center justify-center",children:s.jsx($e,{className:"h-12 w-12 text-red-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Document"}),s.jsx("p",{className:"text-gray-600 mb-4",children:u}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})}):s.jsx("textarea",{value:a,onChange:p=>i(p.target.value),className:"w-full h-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none font-mono text-sm",placeholder:"Document content will appear here...",disabled:d})})]})})]}):s.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),s.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 text-center",children:[s.jsx($e,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"File Not Editable"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"This file type cannot be edited in the browser. Only text-based files (txt, md, csv, etc.) can be edited."}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})})]})},__=()=>{const[e,t]=w.useState(""),[r,n]=w.useState("all"),[a,i]=w.useState(!1),[o,l]=w.useState(!1),[d,c]=w.useState(!1),[u,f]=w.useState(null),{documents:h,loading:m,error:x,deleteDocument:g,downloadDocument:p}=Nr(),y=["all","HR","Accounting","Branding","Social Media","Communications","Volunteer/People Management","Streaming: Video & Podcast","Reports","Governance","Legal","Funding","Financial","Operations","Other"],b=h.filter(B=>{const z=B.name.toLowerCase().includes(e.toLowerCase()),$=r==="all"||B.category===r;return z&&$}),v=B=>{if(B===0)return"0 Bytes";const z=1024,$=["Bytes","KB","MB","GB"],q=Math.floor(Math.log(B)/Math.log(z));return parseFloat((B/Math.pow(z,q)).toFixed(2))+" "+$[q]},j=B=>{var z;return((z=B.split(".").pop())==null?void 0:z.toLowerCase())||""},E=B=>{const z=j(B);return["txt","md","csv","json","xml","html","css","js","ts","jsx","tsx"].includes(z)},_=async(B,z,$)=>{if(window.confirm(`Are you sure you want to delete "${$}"?`))try{await g(B,z)}catch(q){alert("Failed to delete document: "+(q instanceof Error?q.message:"Unknown error"))}},C=async(B,z)=>{try{await p(B,z)}catch($){alert("Failed to download document: "+($ instanceof Error?$.message:"Unknown error"))}},A=B=>{f(B),i(!0)},S=B=>{f(B),l(!0)},N=B=>{f(B),c(!0)},D=()=>{i(!1),f(null)},k=()=>{l(!1),f(null)},P=()=>{c(!1),f(null)},R=()=>{console.log("Document content saved")};return m?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Documents"}),s.jsx("p",{className:"text-gray-600",children:"Manage and organize your documents"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),s.jsx("div",{className:"space-y-3",children:[...Array(5)].map((B,z)=>s.jsx("div",{className:"h-4 bg-gray-200 rounded"},z))})]})})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Documents"}),s.jsx("p",{className:"text-gray-600",children:"Manage and organize your documents"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading documents: ",x]}),s.jsx("p",{className:"text-gray-600",children:"Please make sure Supabase is properly configured."})]})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Documents"}),s.jsx("p",{className:"text-gray-600",children:"Manage and organize your documents"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Pu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"text",placeholder:"Search documents...",value:e,onChange:B=>t(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dx,{className:"text-gray-400 h-4 w-4"}),s.jsx("select",{value:r,onChange:B=>n(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:y.map(B=>s.jsx("option",{value:B,children:B==="all"?"All Categories":B},B))})]})]}),b.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No documents found. Upload your first document to get started!"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Name"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Category"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Upload Date"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Expiry Date"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Size"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Actions"})]})}),s.jsx("tbody",{children:b.map(B=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[s.jsxs("td",{className:"py-3 px-4",children:[s.jsx("button",{onClick:()=>A(B),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline text-left",children:B.name}),B.tags.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[B.tags.slice(0,3).map((z,$)=>s.jsx("span",{className:"px-1 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:z},$)),B.tags.length>3&&s.jsxs("span",{className:"px-1 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:["+",B.tags.length-3]})]})]}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:B.category})}),s.jsx("td",{className:"py-3 px-4 text-gray-600",children:Ie(new Date(B.upload_date),"MMM dd, yyyy")}),s.jsx("td",{className:"py-3 px-4 text-gray-600",children:B.expiry_date?Ie(new Date(B.expiry_date),"MMM dd, yyyy"):"N/A"}),s.jsx("td",{className:"py-3 px-4 text-gray-600",children:v(B.size)}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${B.status==="Active"?"bg-green-100 text-green-800":B.status==="Expiring Soon"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:B.status})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>A(B),className:"p-1 text-gray-400 hover:text-blue-600",title:"View",children:s.jsx(jn,{size:16})}),s.jsx("button",{onClick:()=>S(B),className:"p-1 text-gray-400 hover:text-purple-600",title:"Edit Properties",children:s.jsx(_t,{size:16})}),E(B.name)&&s.jsx("button",{onClick:()=>N(B),className:"p-1 text-gray-400 hover:text-orange-600",title:"Edit Content",children:s.jsx(E1,{size:16})}),s.jsx("button",{onClick:()=>C(B.file_path,B.name),className:"p-1 text-gray-400 hover:text-green-600",title:"Download",children:s.jsx(Ur,{size:16})}),s.jsx("button",{onClick:()=>_(B.id,B.file_path,B.name),className:"p-1 text-gray-400 hover:text-red-600",title:"Delete",children:s.jsx(fx,{size:16})})]})})]},B.id))})]})})]}),s.jsx(eg,{isOpen:a,onClose:D,document:u,onDownload:C}),s.jsx(w_,{isOpen:o,onClose:k,document:u}),s.jsx(j_,{isOpen:d,onClose:P,document:u,onSave:R})]})},A_=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState([]),[a,i]=w.useState(!1),[o,l]=w.useState({category:"",expiryDate:"",tags:"",description:""}),{uploadDocument:d}=Nr(),c=Ar(),u=["HR","Accounting","Branding","Social Media","Communications","Volunteer/People Management","Streaming: Video & Podcast","Reports","Governance","Legal","Funding","Financial","Operations","Donor Data","Other"],f=y=>{y.preventDefault(),y.stopPropagation(),y.type==="dragenter"||y.type==="dragover"?t(!0):y.type==="dragleave"&&t(!1)},h=y=>{if(y.preventDefault(),y.stopPropagation(),t(!1),y.dataTransfer.files&&y.dataTransfer.files[0]){const b=Array.from(y.dataTransfer.files);n(v=>[...v,...b])}},m=y=>{if(y.target.files){const b=Array.from(y.target.files);n(v=>[...v,...b])}},x=y=>{n(b=>b.filter((v,j)=>j!==y))},g=async y=>{if(y.preventDefault(),r.length===0){alert("Please select at least one file to upload");return}if(!o.category){alert("Please select a category");return}if(o.category==="Donor Data"&&r.filter(v=>!v.name.toLowerCase().endsWith(".csv")).length>0){alert("Donor Data files must be in CSV format. Please select only CSV files.");return}i(!0);try{const b=o.tags.split(",").map(v=>v.trim()).filter(v=>v.length>0);for(const v of r)await d(v,{category:o.category,expiryDate:o.expiryDate||void 0,tags:b,description:o.description||void 0});n([]),l({category:"",expiryDate:"",tags:"",description:""}),alert(`Successfully uploaded ${r.length} document(s)!`),c("/documents")}catch(b){alert("Upload failed: "+(b instanceof Error?b.message:"Unknown error"))}finally{i(!1)}},p=y=>{if(y===0)return"0 Bytes";const b=1024,v=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(y)/Math.log(b));return parseFloat((y/Math.pow(b,j)).toFixed(2))+" "+v[j]};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Upload Documents"}),s.jsx("p",{className:"text-gray-600",children:"Add new documents to your organization's repository"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"File Upload"}),s.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${e?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:h,children:[s.jsx(ra,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here or click to browse"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Supports PDF, DOC, DOCX, XLS, XLSX, and image files up to 10MB"}),s.jsx("input",{type:"file",multiple:!0,onChange:m,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",disabled:a})]}),r.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Selected Files"}),s.jsxs("div",{className:"space-y-2",children:[r.map((y,b)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx($e,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.name}),s.jsx("p",{className:"text-xs text-gray-600",children:p(y.size)})]})]}),s.jsx("button",{type:"button",onClick:()=>x(b),className:"p-1 text-gray-400 hover:text-red-600",disabled:a,children:s.jsx(Rt,{size:16})})]},b)),o.category==="Donor Data"&&s.jsx("p",{className:"text-xs text-blue-600 mt-1 bg-blue-50 p-2 rounded",children:"💡 Donor Data files will be automatically processed for analytics. Only CSV files are supported for this category."})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(zs,{className:"inline h-4 w-4 mr-1"}),"Category *"]}),s.jsxs("select",{value:o.category,onChange:y=>l(b=>({...b,category:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:a,children:[s.jsx("option",{value:"",children:"Select a category"}),u.map(y=>s.jsx("option",{value:y,children:y},y))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(pi,{className:"inline h-4 w-4 mr-1"}),"Expiry Date (Optional)"]}),s.jsx("input",{type:"date",value:o.expiryDate,onChange:y=>l(b=>({...b,expiryDate:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (Optional)"}),s.jsx("input",{type:"text",value:o.tags,onChange:y=>l(b=>({...b,tags:y.target.value})),placeholder:"Enter tags separated by commas",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),s.jsx("textarea",{value:o.description,onChange:y=>l(b=>({...b,description:y.target.value})),rows:3,placeholder:"Add a description for this document",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:()=>c("/documents"),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",disabled:r.length===0||a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:a?"Uploading...":"Upload Documents"})]})]})]})},N_=({currentLogo:e,onLogoChange:t,isAdmin:r})=>{const[n,a]=w.useState(!1),[i,o]=w.useState(!1),[l,d]=w.useState(!1),c=w.useRef(null),u=async g=>{if(g){if(!g.type.includes("svg")){alert("Please upload an SVG file only");return}if(g.size>1024*1024){alert("File size must be less than 1MB");return}a(!0);try{const p=new FileReader;p.onload=y=>{var v;const b=(v=y.target)==null?void 0:v.result;localStorage.setItem("custom-logo",b),t(b),o(!1),a(!1)},p.readAsDataURL(g)}catch(p){console.error("Error uploading logo:",p),alert("Failed to upload logo"),a(!1)}}},f=g=>{g.preventDefault(),g.stopPropagation(),d(!1);const p=g.dataTransfer.files;p&&p[0]&&u(p[0])},h=g=>{g.preventDefault(),g.stopPropagation(),g.type==="dragenter"||g.type==="dragover"?d(!0):g.type==="dragleave"&&d(!1)},m=g=>{const p=g.target.files;p&&p[0]&&u(p[0])},x=()=>{localStorage.removeItem("custom-logo"),t(null),o(!1)};return r?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>o(!0),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Upload Custom Logo",children:s.jsx(C1,{className:"h-4 w-4"})}),i&&s.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>o(!1)}),s.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Custom Logo"}),s.jsx("button",{onClick:()=>o(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Rt,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-6",children:[e?s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Logo"}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"h-8 flex items-center",dangerouslySetInnerHTML:{__html:e.startsWith("data:")?atob(e.split(",")[1]):e}}),s.jsx("button",{onClick:x,className:"text-red-600 hover:text-red-700 text-sm",children:"Remove"})]})]}):null,s.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${l?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[s.jsx(ra,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop SVG file here or click to browse"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"SVG files only, max 1MB"}),s.jsx("input",{ref:c,type:"file",accept:".svg,image/svg+xml",onChange:m,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:n}),n&&s.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}),s.jsx("div",{className:"mt-6 bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(yc,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Logo Guidelines"}),s.jsxs("ul",{className:"mt-1 text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:"• Use SVG format for best quality"}),s.jsx("li",{children:"• Recommended height: 24-32px"}),s.jsx("li",{children:"• Keep file size under 1MB"}),s.jsx("li",{children:'• Logo will replace "Adminizer" text'})]})]})]})})]})]})})]})]}):null},E_=({logoUrl:e,fallbackText:t="Adminizer"})=>{const[r,n]=Tt.useState(!1),a=()=>{n(!0)};if(r||!e)return s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:t});if(e.startsWith("data:"))try{const i=atob(e.split(",")[1]);return s.jsx("div",{className:"h-8 flex items-center",dangerouslySetInnerHTML:{__html:i},onError:a})}catch(i){return console.error("Error parsing logo data URL:",i),s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:t})}return s.jsx("img",{src:e,alt:"Organization Logo",className:"h-8 w-auto",onError:a})},C_=()=>{const{user:e,signOut:t}=Ru(),{userProfile:r,isAdmin:n}=Lt(),[a,i]=w.useState(null);w.useEffect(()=>{const u=localStorage.getItem("custom-logo");u&&i(u)},[]);const o=async()=>{try{await t()}catch(u){console.error("Error signing out:",u)}},l=u=>{i(u)},c=r?(u=>{switch(u){case"master_admin":return{text:"Master Admin",color:"bg-purple-100 text-purple-800"};case"admin":return{text:"Admin",color:"bg-blue-100 text-blue-800"};default:return{text:"User",color:"bg-gray-100 text-gray-800"}}})(r.role):null;return s.jsx("nav",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(E_,{logoUrl:a||""}),s.jsx(N_,{currentLogo:a||void 0,onLogoChange:l,isAdmin:n})]}),s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:"v2.1.0"})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xn,{size:16}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-medium text-gray-900",children:(r==null?void 0:r.full_name)||(e==null?void 0:e.email)}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:e==null?void 0:e.email}),c&&s.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${c.color}`,children:c.text})]})]})]})}),s.jsxs("button",{onClick:o,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:[s.jsx(S1,{size:16}),s.jsx("span",{children:"Sign out"})]})]})]})})})},S_=()=>{const e=j1(),t=Ar(),{isAdmin:r}=Lt(),[n,a]=w.useState(()=>{const b=sessionStorage.getItem("sidebar-expanded");return b!==null?JSON.parse(b):!0}),[i,o]=w.useState(new Set(["departments"])),[l,d]=w.useState(!1);w.useEffect(()=>{sessionStorage.setItem("sidebar-expanded",JSON.stringify(n))},[n]),w.useEffect(()=>{d(!1)},[e.pathname]);const c=()=>{a(!n),d(!1)},u=()=>{d(!l)},f=b=>{const v=new Set(i);v.has(b)?v.delete(b):v.add(b),o(v)},h=[{id:"foster-adopt",name:"Foster & Adopt",icon:rx,route:"/department/foster-adopt"},{id:"r-kids",name:"R/Kids",icon:nx,route:"/department/r-kids"},{id:"r-youth",name:"R/Youth",icon:ax,route:"/department/r-youth"},{id:"creative-media",name:"Creative Media",icon:ix,route:"/department/creative-media"},{id:"cge",name:"CGE",icon:sx,route:"/department/cge"},{id:"worship",name:"Worship",icon:ox,route:"/department/worship"},{id:"sunday-production",name:"Sunday Production",icon:lx,route:"/department/sunday-production"},{id:"elder-board",name:"Elder Board",icon:sr,route:"/department/elder-board"},{id:"deacon-board",name:"Deacon Board",icon:cx,route:"/department/deacon-board"},{id:"fundraising-donor-management",name:"Fundraising & Donor Management",icon:va,route:"/department/fundraising-donor-management"}],m=[{id:"hr",name:"HR",icon:bc,route:"/operations/hr"},{id:"accounting",name:"Accounting",icon:hx,route:"/operations/accounting"},{id:"legal",name:"Legal",icon:mx,route:"/operations/legal"},{id:"branding",name:"Branding",icon:px,route:"/operations/branding"},{id:"social-media",name:"Social Media",icon:xx,route:"/operations/social-media"},{id:"communications",name:"Communications",icon:Zt,route:"/operations/communications"},{id:"volunteer-management",name:"Volunteer/People Management",icon:Qt,route:"/operations/volunteer-management"},{id:"streaming",name:"Streaming: Video & Podcast",icon:gx,route:"/operations/streaming"},{id:"it",name:"IT & Technology",icon:vx,route:"/operations/it"}],x=[{id:"users",name:"Users",icon:Qt,route:"/users"},{id:"oauth",name:"OAuth",icon:sr,route:"/oauth"}],g=b=>e.pathname===b||b!=="/"&&e.pathname.startsWith(b),p=b=>{t(b),window.innerWidth<768&&d(!1)},y=({isMobile:b=!1})=>s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"p-4 border-b border-gray-600",children:s.jsxs("div",{className:"flex items-center justify-between",children:[n&&s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Navigation"}),s.jsx("button",{onClick:b?u:c,className:"p-2 text-gray-300 hover:text-white hover:bg-gray-600 rounded-lg transition-colors","aria-label":n?"Collapse sidebar":"Expand sidebar",children:b||!n?s.jsx(Rt,{className:"h-5 w-5"}):s.jsx(Zo,{className:"h-5 w-5"})})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:s.jsxs("nav",{className:"space-y-2",children:[s.jsx("div",{className:"px-4",children:s.jsxs("button",{onClick:()=>p("/documents"),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${g("/documents")?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-600"}`,title:n?void 0:"Document Center",children:[s.jsx($e,{className:"h-5 w-5 flex-shrink-0"}),n&&s.jsx("span",{className:"font-medium",children:"Document Center"})]})}),s.jsxs("div",{className:"px-4",children:[s.jsxs("button",{onClick:()=>n&&f("departments"),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors ${e.pathname.startsWith("/department")?"bg-gray-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-600"}`,title:n?void 0:"Business Departments",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ux,{className:"h-5 w-5 flex-shrink-0"}),n&&s.jsx("span",{className:"font-medium",children:"Business Departments"})]}),n&&(i.has("departments")?s.jsx(Qo,{className:"h-4 w-4"}):s.jsx(el,{className:"h-4 w-4"}))]}),n&&i.has("departments")&&s.jsx("div",{className:"mt-2 ml-6 space-y-1",children:h.map(v=>s.jsxs("button",{onClick:()=>p(v.route),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-colors ${g(v.route)?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-600"}`,children:[s.jsx(v.icon,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:v.name})]},v.id))})]}),s.jsxs("div",{className:"px-4",children:[s.jsxs("button",{onClick:()=>n?f("operations"):p("/operations"),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors ${e.pathname.startsWith("/operations")?"bg-gray-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-600"}`,title:n?void 0:"Operations Center",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_t,{className:"h-5 w-5 flex-shrink-0"}),n&&s.jsx("span",{className:"font-medium",children:"Operations Center"})]}),n&&(i.has("operations")?s.jsx(Qo,{className:"h-4 w-4"}):s.jsx(el,{className:"h-4 w-4"}))]}),n&&i.has("operations")&&s.jsx("div",{className:"mt-2 ml-6 space-y-1",children:m.map(v=>s.jsxs("button",{onClick:()=>p(v.route),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-colors ${g(v.route)?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-600"}`,children:[s.jsx(v.icon,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:v.name})]},v.id))})]}),r&&s.jsxs("div",{className:"px-4",children:[s.jsxs("button",{onClick:()=>n&&f("admin"),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors ${e.pathname==="/users"||e.pathname==="/oauth"?"bg-gray-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-600"}`,title:n?void 0:"Admin",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(sr,{className:"h-5 w-5 flex-shrink-0"}),n&&s.jsx("span",{className:"font-medium",children:"Admin"})]}),n&&(i.has("admin")?s.jsx(Qo,{className:"h-4 w-4"}):s.jsx(el,{className:"h-4 w-4"}))]}),n&&i.has("admin")&&s.jsx("div",{className:"mt-2 ml-6 space-y-1",children:x.map(v=>s.jsxs("button",{onClick:()=>p(v.route),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-colors ${g(v.route)?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-600"}`,children:[s.jsx(v.icon,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:v.name})]},v.id))})]})]})})]});return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:u,className:"md:hidden fixed top-20 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg","aria-label":"Open navigation menu",children:s.jsx(Zo,{className:"h-5 w-5"})}),l&&s.jsxs("div",{className:"md:hidden fixed inset-0 z-40",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:u}),s.jsx("div",{className:"relative w-80 h-full bg-gray-800 shadow-xl",children:s.jsx(y,{isMobile:!0})})]}),s.jsxs("div",{className:`hidden md:flex flex-col bg-gray-800 border-r border-gray-600 transition-all duration-300 ease-in-out ${n?"w-64":"w-16"}`,style:{height:"calc(100vh - 4rem)"},children:[s.jsx("div",{className:"p-4 border-b border-gray-600",children:s.jsx("button",{onClick:c,className:"p-2 text-gray-300 hover:text-white hover:bg-gray-600 rounded-lg transition-colors","aria-label":n?"Collapse sidebar":"Expand sidebar",children:s.jsx(Zo,{className:"h-5 w-5"})})}),s.jsx(y,{})]})]})},D_=({integration:e,color:t,onEditIntegration:r})=>{const{isMasterAdmin:n}=Lt(),{isConnected:a,launchService:i,initiateOAuth:o}=Lu(),[l,d]=w.useState(!1),[c,u]=w.useState({name:"",title:"",email:"",phone:"",company:"",notes:""}),f=e.name.toLowerCase().replace(/\s+/g,"-"),h=e.supportsOAuth!==!1&&g_.supportsOAuth(f),m=a(f);w.useEffect(()=>{const v=localStorage.getItem(`integration-contact-${e.name.toLowerCase().replace(/\s+/g,"-")}`);v&&u(JSON.parse(v))},[e.name]);const x=()=>{localStorage.setItem(`integration-contact-${e.name.toLowerCase().replace(/\s+/g,"-")}`,JSON.stringify(c)),d(!1)},g=()=>{const v=localStorage.getItem(`integration-contact-${e.name.toLowerCase().replace(/\s+/g,"-")}`);v&&u(JSON.parse(v)),d(!1)},p=()=>{h?i(f,e.url):window.open(e.url,"_blank")},y=()=>{h&&o(f)},b=c.name||c.email||c.phone;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),s.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full bg-${t}-100 text-${t}-800`,children:e.category}),h?s.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs rounded-full ${m?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"h-3 w-3 mr-1"}),"OAuth Connected"]}):s.jsxs(s.Fragment,{children:[s.jsx(wc,{className:"h-3 w-3 mr-1"}),"OAuth Available"]})}):s.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600",children:[s.jsx(Za,{className:"h-3 w-3 mr-1"}),"Manual Access"]}),n&&r&&s.jsx("button",{onClick:()=>r(e),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit Integration",children:s.jsx(_t,{className:"h-3 w-3"})})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),e.note&&s.jsxs("p",{className:"text-xs text-blue-600 bg-blue-50 p-2 rounded mb-3",children:["💡 ",e.note]})]}),s.jsx(vc,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]}),h&&s.jsxs("div",{className:`mb-4 p-3 rounded-lg ${m?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[m?s.jsx(xr,{className:"h-4 w-4 text-green-600"}):s.jsx(wc,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:`text-sm font-medium ${m?"text-green-800":"text-yellow-800"}`,children:m?"OAuth Connected":"OAuth Available"})]}),!m&&s.jsx("button",{onClick:y,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Connect"})]}),s.jsx("p",{className:`text-xs mt-1 ${m?"text-green-700":"text-yellow-700"}`,children:m?"Seamless access enabled - no manual login required":"Connect for seamless access without manual login"})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Primary Contact"}),s.jsx("button",{onClick:()=>d(!l),className:`p-1.5 rounded-md transition-colors ${l?"text-gray-600 hover:text-gray-800 hover:bg-gray-100":`text-${t}-600 hover:text-${t}-700 hover:bg-${t}-50`}`,title:l?"Cancel":"Edit Contact",children:l?s.jsx(Rt,{className:"h-3 w-3"}):s.jsx(yx,{className:"h-3 w-3"})})]}),l?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[s.jsx(xn,{className:"inline h-3 w-3 mr-1"}),"Contact Name"]}),s.jsx("input",{type:"text",value:c.name,onChange:v=>u(j=>({...j,name:v.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"Contact name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Job Title"}),s.jsx("input",{type:"text",value:c.title,onChange:v=>u(j=>({...j,title:v.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"Account Manager, Support Rep, etc."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[s.jsx(Zt,{className:"inline h-3 w-3 mr-1"}),"Email"]}),s.jsx("input",{type:"email",value:c.email,onChange:v=>u(j=>({...j,email:v.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"contact@company.com"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[s.jsx(jc,{className:"inline h-3 w-3 mr-1"}),"Phone"]}),s.jsx("input",{type:"tel",value:c.phone,onChange:v=>u(j=>({...j,phone:v.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"(555) 123-4567"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[s.jsx(Qa,{className:"inline h-3 w-3 mr-1"}),"Department/Team"]}),s.jsx("input",{type:"text",value:c.company,onChange:v=>u(j=>({...j,company:v.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"Customer Success, Sales, Support"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:c.notes,onChange:v=>u(j=>({...j,notes:v.target.value})),rows:2,className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"Account details, preferences, etc."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[s.jsx("button",{onClick:g,className:"px-2 py-1 text-xs border border-gray-300 rounded text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:x,className:`flex items-center space-x-1 px-2 py-1 text-xs bg-${t}-600 text-white rounded hover:bg-${t}-700 transition-colors`,children:[s.jsx(xi,{className:"h-3 w-3"}),s.jsx("span",{children:"Save"})]})]})]}):s.jsx("div",{className:"space-y-2",children:b?s.jsxs(s.Fragment,{children:[c.name&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xn,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:c.name}),c.title&&s.jsx("p",{className:"text-xs text-gray-600 truncate",children:c.title})]})]}),c.email&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zt,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),s.jsx("a",{href:`mailto:${c.email}`,className:`text-xs text-${t}-600 hover:text-${t}-700 hover:underline truncate`,children:c.email})]}),c.phone&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(jc,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),s.jsx("a",{href:`tel:${c.phone}`,className:`text-xs text-${t}-600 hover:text-${t}-700 hover:underline`,children:c.phone})]}),c.company&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qa,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),s.jsx("p",{className:"text-xs text-gray-700 truncate",children:c.company})]}),c.notes&&s.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:s.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:c.notes})})]}):s.jsxs("div",{className:"text-center py-3",children:[s.jsx(xn,{className:"h-6 w-6 text-gray-300 mx-auto mb-1"}),s.jsx("p",{className:"text-xs text-gray-500",children:"No contact assigned"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Click edit to add contact"})]})})]}),s.jsxs("div",{className:"flex space-x-2 mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("button",{onClick:p,className:`flex-1 bg-${t}-600 text-white px-3 py-2 rounded text-xs font-medium hover:bg-${t}-700 transition-colors text-center flex items-center justify-center space-x-1`,children:[h&&m&&s.jsx(xr,{className:"h-3 w-3"}),s.jsx("span",{children:h&&m?"Launch (OAuth)":"Open Platform"})]}),s.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded text-xs font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Configure"})]})]})},k_=({isOpen:e,onClose:t,integration:r,onSave:n})=>{const[a,i]=w.useState({name:"",description:"",url:"",category:""}),o=["HRIS","Payroll","Benefits","Safety","Insurance","Accounting","Invoicing","Free","Legal Services","E-Signature","Practice Management","Contract Management","Compliance","Design","Professional","UI/UX","Monitoring","Management","Scheduling","Enterprise","Visual","Internal","Email Marketing","Video","Volunteer","Opportunities","Streaming","Podcast","Custom"];Tt.useEffect(()=>{r&&i(r)},[r]);const l=c=>{c.preventDefault(),n(a),t()},d=()=>{r&&i(r),t()};return!e||!r?null:s.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:d}),s.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Integration"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Customize integration details for your organization"})]}),s.jsx("button",{onClick:d,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Rt,{className:"h-5 w-5"})})]}),s.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(df,{className:"inline h-4 w-4 mr-1"}),"Service Name"]}),s.jsx("input",{type:"text",value:a.name,onChange:c=>i(u=>({...u,name:c.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Service name",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx($e,{className:"inline h-4 w-4 mr-1"}),"Description"]}),s.jsx("textarea",{value:a.description,onChange:c=>i(u=>({...u,description:c.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe how this service helps your organization...",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Customize this description to reflect how your organization uses this service"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(df,{className:"inline h-4 w-4 mr-1"}),"Service URL"]}),s.jsx("input",{type:"url",value:a.url,onChange:c=>i(u=>({...u,url:c.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Link to your organization's login page or dashboard for this service"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(zs,{className:"inline h-4 w-4 mr-1"}),"Business Category"]}),s.jsxs("select",{value:a.category,onChange:c=>i(u=>({...u,category:c.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Select a category"}),o.map(c=>s.jsx("option",{value:c,children:c},c))]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the category that best describes this service's role in your business"})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(_t,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Customization Tips"}),s.jsxs("ul",{className:"mt-1 text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:"• Update the description to reflect your specific use case"}),s.jsx("li",{children:"• Use your organization's direct login URL if available"}),s.jsx("li",{children:"• Choose categories that match your business structure"}),s.jsx("li",{children:"• Consider creating custom categories for unique services"})]})]})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(xi,{className:"h-4 w-4"}),s.jsx("span",{children:"Save Changes"})]})]})]})]})})]})},P_=()=>{const e=()=>"Acme Nonprofit Foundation",[t,r]=w.useState({entityName:e(),entityType:"Non-Profit Corporation",status:"Unknown",filingDate:"",nextDueDate:"",annualReportStatus:"Unknown",lastUpdated:""}),[n,a]=w.useState(!1),[i,o]=w.useState(t);w.useEffect(()=>{const x=localStorage.getItem("demo-corporate-status");if(x){const g=JSON.parse(x);r(g),o(g)}else{const g={...t,entityName:e()};r(g),o(g)}},[]);const d=(()=>{if(!t.nextDueDate)return"unknown";const m=new Date(t.nextDueDate),x=new Date,g=xc(x,30);return Xn(m,x)?"overdue":Xn(m,g)?"due-soon":"current"})(),c=()=>{const m={...i,lastUpdated:new Date().toISOString()};r(m),localStorage.setItem("demo-corporate-status",JSON.stringify(m)),a(!1)},u=()=>{o(t),a(!1)},f=m=>{switch(m){case"Active":case"Current":return"text-green-800 bg-green-100";case"Due Soon":return"text-yellow-800 bg-yellow-100";case"Overdue":case"Suspended":return"text-red-800 bg-red-100";case"Inactive":return"text-gray-800 bg-gray-100";default:return"text-blue-800 bg-blue-100"}},h=()=>{switch(d){case"current":return s.jsx(xr,{className:"h-5 w-5 text-green-600"});case"due-soon":return s.jsx(pi,{className:"h-5 w-5 text-yellow-600"});case"overdue":return s.jsx(Za,{className:"h-5 w-5 text-red-600"});default:return s.jsx(Qa,{className:"h-5 w-5 text-blue-600"})}};return s.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[h(),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Corporate Status Dashboard"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Demo Corporate Filing Status"})]})]}),s.jsx("button",{onClick:()=>a(!n),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:n?"Cancel":"Edit Status",children:n?s.jsx(Rt,{className:"h-4 w-4"}):s.jsx(yx,{className:"h-4 w-4"})})]})}),s.jsx("div",{className:"p-6",children:n?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entity Name"}),s.jsx("input",{type:"text",value:i.entityName,onChange:m=>o(x=>({...x,entityName:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entity Type"}),s.jsxs("select",{value:i.entityType,onChange:m=>o(x=>({...x,entityType:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"Non-Profit Corporation",children:"Non-Profit Corporation"}),s.jsx("option",{value:"Corporation",children:"Corporation"}),s.jsx("option",{value:"LLC",children:"LLC"}),s.jsx("option",{value:"Partnership",children:"Partnership"}),s.jsx("option",{value:"Other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Status"}),s.jsxs("select",{value:i.status,onChange:m=>o(x=>({...x,status:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"Active",children:"Active"}),s.jsx("option",{value:"Inactive",children:"Inactive"}),s.jsx("option",{value:"Suspended",children:"Suspended"}),s.jsx("option",{value:"Unknown",children:"Unknown"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Filing Date"}),s.jsx("input",{type:"date",value:i.filingDate,onChange:m=>o(x=>({...x,filingDate:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Due Date"}),s.jsx("input",{type:"date",value:i.nextDueDate,onChange:m=>o(x=>({...x,nextDueDate:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Report Status"}),s.jsxs("select",{value:i.annualReportStatus,onChange:m=>o(x=>({...x,annualReportStatus:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"Current",children:"Current"}),s.jsx("option",{value:"Due Soon",children:"Due Soon"}),s.jsx("option",{value:"Overdue",children:"Overdue"}),s.jsx("option",{value:"Unknown",children:"Unknown"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition-colors",children:[s.jsx(xi,{className:"h-4 w-4"}),s.jsx("span",{children:"Save Status"})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[d!=="current"&&d!=="unknown"&&s.jsx("div",{className:`p-4 rounded-lg border ${d==="overdue"?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Za,{className:`h-5 w-5 ${d==="overdue"?"text-red-600":"text-yellow-600"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-medium ${d==="overdue"?"text-red-800":"text-yellow-800"}`,children:d==="overdue"?"Filing Overdue!":"Filing Due Soon"}),s.jsx("p",{className:`text-sm ${d==="overdue"?"text-red-700":"text-yellow-700"}`,children:t.nextDueDate&&`Next filing due: ${Ie(new Date(t.nextDueDate),"MMMM dd, yyyy")}`})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Entity Name"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.entityName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Entity Type"}),s.jsx("p",{className:"text-gray-900",children:t.entityType})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Current Status"}),s.jsx("span",{className:`inline-block px-3 py-1 text-sm font-medium rounded-full ${f(t.status)}`,children:t.status})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Last Filing Date"}),s.jsx("p",{className:"text-gray-900",children:t.filingDate?Ie(new Date(t.filingDate),"MMMM dd, yyyy"):"Not set"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Next Due Date"}),s.jsx("p",{className:"text-gray-900",children:t.nextDueDate?Ie(new Date(t.nextDueDate),"MMMM dd, yyyy"):"Not set"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Annual Report Status"}),s.jsx("span",{className:`inline-block px-3 py-1 text-sm font-medium rounded-full ${f(t.annualReportStatus)}`,children:t.annualReportStatus})]})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 w-full",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qa,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Demo Mode"}),s.jsx("p",{className:"text-sm text-blue-800",children:"In production, this would link to your state's corporate filing system for real status updates."})]})]})})})}),t.lastUpdated&&s.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t border-gray-100",children:["Last updated: ",Ie(new Date(t.lastUpdated),"MMM dd, yyyy HH:mm")]})]})})]})},O_=({isOpen:e,onClose:t,documents:r,categoryColor:n})=>{const[a,i]=w.useState({to:"",cc:"",bcc:"",subject:"",message:"",includeLinks:!0,includeAttachments:!1}),[o,l]=w.useState(!1);Tt.useEffect(()=>{if(r.length>0){const h=r.length===1?`Document: ${r[0].name}`:`${r.length} Documents from ${r[0].category}`;i(m=>({...m,subject:h,message:d()}))}},[r]);const d=()=>{if(r.length===0)return"";if(r.length===1){const h=r[0];return`Hi,

I'm sharing the following document with you:

Document: ${h.name}
Category: ${h.category}
${h.description?`Description: ${h.description}`:""}
Upload Date: ${Ie(new Date(h.created_at),"MMMM dd, yyyy")}
${h.expiry_date?`Expires: ${Ie(new Date(h.expiry_date),"MMMM dd, yyyy")}`:""}

${a.includeLinks?"You can view this document using the link provided above.":"The document is attached to this email."}

Best regards`}else return`Hi,

I'm sharing ${r.length} documents with you from our ${r[0].category} collection:

${r.map(h=>`• ${h.name}`).join(`
`)}

${a.includeLinks?"You can view these documents using the links provided above.":"The documents are attached to this email."}

Best regards`},c=async()=>{if(!a.to.trim()){alert("Please enter at least one recipient email address.");return}l(!0);try{await new Promise(h=>setTimeout(h,2e3)),alert(`Email sent successfully to ${a.to}!`),t(),i({to:"",cc:"",bcc:"",subject:"",message:"",includeLinks:!0,includeAttachments:!1})}catch{alert("Failed to send email. Please try again.")}finally{l(!1)}},u=h=>{if(h===0)return"0 Bytes";const m=1024,x=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(h)/Math.log(m));return parseFloat((h/Math.pow(m,g)).toFixed(2))+" "+x[g]},f=r.reduce((h,m)=>h+m.size,0);return e?s.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),s.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg bg-${n}-100`,children:s.jsx(Zt,{className:`h-5 w-5 text-${n}-600`})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Email Documents"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[r.length," document",r.length!==1?"s":""," selected"]})]})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Rt,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[s.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:s.jsxs("form",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(xn,{className:"inline h-4 w-4 mr-1"}),"To *"]}),s.jsx("input",{type:"email",value:a.to,onChange:h=>i(m=>({...m,to:h.target.value})),placeholder:"recipient@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:o}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple email addresses with commas"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CC"}),s.jsx("input",{type:"email",value:a.cc,onChange:h=>i(m=>({...m,cc:h.target.value})),placeholder:"cc@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BCC"}),s.jsx("input",{type:"email",value:a.bcc,onChange:h=>i(m=>({...m,bcc:h.target.value})),placeholder:"bcc@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:o})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),s.jsx("input",{type:"text",value:a.subject,onChange:h=>i(m=>({...m,subject:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),s.jsx("textarea",{value:a.message,onChange:h=>i(m=>({...m,message:h.target.value})),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your message here...",disabled:o})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"includeLinks",checked:a.includeLinks,onChange:h=>i(m=>({...m,includeLinks:h.target.checked})),className:`rounded text-${n}-600 focus:ring-${n}-500`,disabled:o}),s.jsx("label",{htmlFor:"includeLinks",className:"text-sm text-gray-700",children:"Include download links in email"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"includeAttachments",checked:a.includeAttachments,onChange:h=>i(m=>({...m,includeAttachments:h.target.checked})),className:`rounded text-${n}-600 focus:ring-${n}-500`,disabled:o}),s.jsx("label",{htmlFor:"includeAttachments",className:"text-sm text-gray-700",children:"Attach files to email"})]}),a.includeAttachments&&f>25*1024*1024&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:["⚠️ Total file size (",u(f),") exceeds typical email limits (25MB). Consider using download links instead."]})})]})]})}),s.jsxs("div",{className:"w-80 border-l border-gray-200 p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(D1,{className:"h-4 w-4 text-gray-600"}),s.jsx("h3",{className:"font-medium text-gray-900",children:"Documents to Email"})]}),s.jsx("div",{className:"space-y-3",children:r.map(h=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx($e,{className:"h-4 w-4 text-gray-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:h.name}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full bg-${n}-100 text-${n}-800`,children:h.category}),s.jsx("span",{className:"text-xs text-gray-500",children:u(h.size)})]}),h.description&&s.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:h.description})]})]})},h.id))}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("p",{children:["Total: ",r.length," document",r.length!==1?"s":""]}),s.jsxs("p",{children:["Size: ",u(f)]})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 flex-shrink-0",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),s.jsxs("button",{onClick:c,disabled:o||!a.to.trim()||!a.subject.trim(),className:`flex items-center space-x-2 px-4 py-2 bg-${n}-600 text-white rounded-lg hover:bg-${n}-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors`,children:[s.jsx(bx,{className:"h-4 w-4"}),s.jsx("span",{children:o?"Sending...":"Send Email"})]})]})]})})]}):null},Uu=({category:e,categoryTitle:t,color:r})=>{const{documents:n,loading:a,downloadDocument:i}=Nr(),[o,l]=w.useState(""),[d,c]=w.useState(null),[u,f]=w.useState(!1),[h,m]=w.useState(!1),[x,g]=w.useState([]),[p,y]=w.useState(new Set),b=n.filter(N=>{var P;const D=N.category.toLowerCase().includes(e.toLowerCase())||N.tags.some(R=>R.toLowerCase().includes(e.toLowerCase())),k=N.name.toLowerCase().includes(o.toLowerCase())||((P=N.description)==null?void 0:P.toLowerCase().includes(o.toLowerCase()))||N.tags.some(R=>R.toLowerCase().includes(o.toLowerCase()));return D&&(o===""||k)}),v=N=>{c(N),f(!0)},j=async(N,D)=>{try{await i(N,D)}catch(k){alert("Failed to download document: "+(k instanceof Error?k.message:"Unknown error"))}},E=N=>{g([N]),m(!0)},_=()=>{const N=b.filter(D=>p.has(D.id));g(N),m(!0)},C=N=>{const D=new Set(p);D.has(N)?D.delete(N):D.add(N),y(D)},A=()=>{p.size===b.length?y(new Set):y(new Set(b.map(N=>N.id)))},S=N=>{if(N===0)return"0 Bytes";const D=1024,k=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(N)/Math.log(D));return parseFloat((N/Math.pow(D,P)).toFixed(2))+" "+k[P]};return a?s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),s.jsx("div",{className:"space-y-3",children:[...Array(3)].map((N,D)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded"},D))})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg bg-${r}-100`,children:s.jsx($e,{className:`h-5 w-5 text-${r}-600`})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[t," Documents"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[b.length," document",b.length!==1?"s":""," found"]})]})]}),p.size>0&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[p.size," selected"]}),s.jsxs("button",{onClick:_,className:`flex items-center space-x-1 px-3 py-1 bg-${r}-600 text-white rounded-md text-sm hover:bg-${r}-700 transition-colors`,children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx("span",{children:"Email Selected"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Pu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"text",placeholder:"Search documents...",value:o,onChange:N=>l(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),b.length>0&&s.jsxs("button",{onClick:A,className:"flex items-center space-x-1 px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:p.size===b.length,onChange:()=>{},className:"rounded"}),s.jsx("span",{children:"Select All"})]})]})]}),s.jsx("div",{className:"p-6",children:b.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx($e,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",t," Documents Found"]}),s.jsx("p",{className:"text-gray-600 mb-4",children:o?`No documents match "${o}" in the ${t} category.`:`No documents have been uploaded for the ${t} category yet.`}),s.jsx("button",{onClick:()=>window.location.href="/upload",className:`px-4 py-2 bg-${r}-600 text-white rounded-lg hover:bg-${r}-700 transition-colors`,children:"Upload Documents"})]}):s.jsx("div",{className:"space-y-3",children:b.map(N=>s.jsx("div",{className:`border rounded-lg p-4 hover:shadow-md transition-shadow ${p.has(N.id)?`border-${r}-300 bg-${r}-50`:"border-gray-200"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[s.jsx("input",{type:"checkbox",checked:p.has(N.id),onChange:()=>C(N.id),className:`mt-1 rounded text-${r}-600 focus:ring-${r}-500`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:N.name}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full bg-${r}-100 text-${r}-800`,children:N.category}),N.expiry_date&&s.jsxs("span",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[s.jsx(pi,{className:"h-3 w-3"}),s.jsxs("span",{children:["Expires ",Ie(new Date(N.expiry_date),"MMM dd, yyyy")]})]})]}),N.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:N.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[s.jsx("span",{children:S(N.size)}),s.jsxs("span",{children:["Uploaded ",Ie(new Date(N.created_at),"MMM dd, yyyy")]}),N.tags.length>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(zs,{className:"h-3 w-3"}),s.jsx("span",{children:N.tags.slice(0,2).join(", ")}),N.tags.length>2&&s.jsxs("span",{children:["+",N.tags.length-2]})]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>v(N),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Document",children:s.jsx(jn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>j(N.file_path,N.name),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Download Document",children:s.jsx(Ur,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>E(N),className:`p-2 text-gray-400 hover:text-${r}-600 hover:bg-${r}-50 rounded-lg transition-colors`,title:"Email Document",children:s.jsx(Zt,{className:"h-4 w-4"})})]})]})},N.id))})})]}),s.jsx(eg,{isOpen:u,onClose:()=>{f(!1),c(null)},document:d,onDownload:j}),s.jsx(O_,{isOpen:h,onClose:()=>{m(!1),g([])},documents:x,categoryColor:r})]})},T_=()=>{const{category:e}=Us(),t=Ar(),{documents:r}=Nr(),{isMasterAdmin:n}=Lt(),[a,i]=w.useState(!1),[o,l]=w.useState(null),[d,c]=w.useState([]),u={hr:{title:"Human Resources",description:"Manage your team, payroll, and HR processes",color:"blue",integrations:[{name:"HR Ministry Solutions",description:"Complete HR management platform for ministries with API integration capabilities",url:"https://online.hrministrysolutions.com/hc/en-us",category:"HRIS",supportsOAuth:!1,note:"Contact provider for API access and integration options"},{name:"Ministry Safe",description:"Background screening and safety solutions with limited API access",url:"https://safetysystem.ministrysafe.com/auth/sign_in",category:"Safety",supportsOAuth:!1,note:"API access available for enterprise customers"},{name:"Gusto",description:"Payroll, benefits, and HR with OAuth 2.0 API integration",url:"https://gusto.com",category:"Payroll",supportsOAuth:!0,note:"Full OAuth 2.0 support with comprehensive API"},{name:"GuideStone",description:"Retirement and benefits administration for ministry workers",url:"https://login.guidestone.org/",category:"Benefits",supportsOAuth:!1,note:"Specialized retirement and insurance benefits for ministry professionals"},{name:"The Standard",description:"Group insurance and employee benefits platform",url:"https://login.standard.com/",category:"Insurance",supportsOAuth:!1,note:"Comprehensive group insurance and disability coverage"}]},accounting:{title:"Accounting & Finance",description:"Manage your finances, invoicing, and accounting",color:"green",integrations:[{name:"QuickBooks Online",description:"Complete accounting software with OAuth integration",url:"https://quickbooks.intuit.com",category:"Accounting"},{name:"Bill.com",description:"Accounts payable and receivable automation platform",url:"https://www.bill.com",category:"Accounting",supportsOAuth:!1,note:"API access available for business plans"},{name:"Pushpay",description:"Digital giving and donor management platform for churches",url:"https://pushpay.com",category:"Donations",supportsOAuth:!1,note:"Specialized giving platform with church management features"},{name:"Live Your Parable",description:"Financial planning and stewardship education platform",url:"https://liveyourparable.com/",category:"Financial Planning",supportsOAuth:!1,note:"Faith-based financial education and planning tools"},{name:"National Bank of Arizona",description:"Personal and business banking services",url:"https://www.nbarizona.com/personal/",category:"Banking",supportsOAuth:!1,note:"Local banking partner with business account management"}]},communications:{title:"Communications",description:"Manage internal and external communications",color:"indigo",integrations:[{name:"Slack",description:"Team communication with OAuth integration",url:"https://slack.com",category:"Internal"},{name:"Mailchimp",description:"Email marketing with OAuth integration",url:"https://mailchimp.com",category:"Email Marketing"},{name:"Zoom",description:"Video conferencing and webinars",url:"https://zoom.us",category:"Video"}]},legal:{title:"Legal Affairs & Compliance",description:"Manage legal documents, contracts, and compliance",color:"gray",integrations:[{name:"DocuSign",description:"Electronic signature and document management",url:"https://www.docusign.com",category:"E-Signature"},{name:"E-Verify",description:"Employment eligibility verification system",url:"https://www.e-verify.gov",category:"Compliance",supportsOAuth:!1,note:"Government system for verifying employee work authorization"},{name:"Arizona Corporate Commission",description:"State corporate filing and compliance portal",url:"https://ecorp.azcc.gov/",category:"Corporate Compliance",supportsOAuth:!1,note:"Official state portal for corporate filings, annual reports, and entity searches"}]},branding:{title:"Branding & Design",description:"Create and manage your brand identity",color:"purple",integrations:[{name:"Canva",description:"Design platform for creating visual content",url:"https://www.canva.com",category:"Design"}]},"social-media":{title:"Social Media Management",description:"Manage your social media presence and engagement",color:"pink",integrations:[{name:"Instagram",description:"Photo and video sharing platform for visual storytelling",url:"https://www.instagram.com",category:"Social Platform",supportsOAuth:!1,note:"Direct access to Instagram for content creation and community engagement"},{name:"Facebook",description:"Social networking platform for community building and events",url:"https://www.facebook.com",category:"Social Platform",supportsOAuth:!1,note:"Connect with your community through posts, events, and messaging"},{name:"Meta for Business",description:"Business tools for Facebook and Instagram advertising and analytics",url:"https://business.facebook.com",category:"Business Tools",supportsOAuth:!1,note:"Manage ads, analyze performance, and grow your social media presence"},{name:"Linktree",description:"Link-in-bio tool to share multiple links from social media profiles",url:"https://linktr.ee",category:"Link Management",supportsOAuth:!1,note:"Create a custom landing page to share multiple important links"}]},"volunteer-management":{title:"Volunteer & People Management",description:"Coordinate and manage volunteers and team members",color:"orange",integrations:[{name:"Planning Center",description:"Church management software for planning and volunteer coordination",url:"https://login.planningcenteronline.com/",category:"Church Management",supportsOAuth:!1,note:"Comprehensive church management with volunteer scheduling and event planning"},{name:"ChMS (Church Community Builder)",description:"Complete church management system for member and volunteer coordination",url:"https://redemptionflagstaff.ccbchurch.com/",category:"Church Management",supportsOAuth:!1,note:"Full-featured church management with member database and volunteer tracking"},{name:"Wufoo",description:"Online form builder for volunteer registration and event sign-ups",url:"https://secure.wufoo.com/login/",category:"Forms & Registration",supportsOAuth:!1,note:"Easy-to-use form builder for collecting volunteer information and event registrations"}]},streaming:{title:"Streaming: Video & Podcast",description:"Create, manage, and distribute video and audio content",color:"red",integrations:[{name:"YouTube",description:"Video hosting and management platform with OAuth integration",url:"https://www.youtube.com",category:"Video Platform",supportsOAuth:!0,note:"Full OAuth support for channel management, video uploads, and analytics"},{name:"Transistor.fm",description:"Professional podcast hosting and analytics platform",url:"https://transistor.fm",category:"Podcast Hosting",supportsOAuth:!1,note:"Comprehensive podcast hosting with detailed analytics and distribution"}]},it:{title:"IT & Technology",description:"Technology infrastructure and digital tools management",color:"cyan",integrations:[{name:"Google Workspace",description:"Access Gmail, Drive, Calendar, and other Google services with OAuth",url:"https://workspace.google.com",category:"Productivity"},{name:"Google Search Console",description:"Monitor and optimize your website's search performance with OAuth",url:"https://search.google.com/search-console",category:"Analytics"},{name:"Squarespace",description:"Website builder and hosting platform for creating professional websites",url:"https://www.squarespace.com",category:"Website Management",supportsOAuth:!1,note:"All-in-one platform for building, hosting, and managing your organization's website"}]}};w.useEffect(()=>{const j=localStorage.getItem(`custom-integrations-${e}`);j&&c(JSON.parse(j))},[e]);const f=()=>{const j=u[e];return j?j.integrations.map(E=>{const _=localStorage.getItem(`integration-customization-${E.name.toLowerCase().replace(/\s+/g,"-")}`);return _?{...E,...JSON.parse(_)}:E}):[]},h=u[e];if(!h)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Category Not Found"}),s.jsx("button",{onClick:()=>t("/"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Return to Dashboard"})]});const m=r.filter(j=>j.category.toLowerCase().includes((e==null?void 0:e.toLowerCase())||"")||j.tags.some(E=>E.toLowerCase().includes((e==null?void 0:e.toLowerCase())||""))),g=[...f(),...d],p=j=>{l(j),i(!0)},y=j=>{if(h.integrations.some(_=>_.name===j.name))localStorage.setItem(`integration-customization-${j.name.toLowerCase().replace(/\s+/g,"-")}`,JSON.stringify(j));else{const _=d.map(C=>C.name===(o==null?void 0:o.name)?j:C);c(_),localStorage.setItem(`custom-integrations-${e}`,JSON.stringify(_))}},b=()=>{l({name:"New Integration",description:"Custom integration for your organization",url:"https://example.com",category:"Custom"}),i(!0)},v=j=>{const E=[...d,j];c(E),localStorage.setItem(`custom-integrations-${e}`,JSON.stringify(E))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("/"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(ei,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:h.title}),s.jsx("p",{className:"text-gray-600 mt-1",children:h.description})]})]}),n&&s.jsxs("button",{onClick:b,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(wx,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Integration"})]})]}),e==="legal"&&s.jsx(P_,{}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${h.color}-500 p-3 rounded-lg`,children:s.jsx($e,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Related Documents"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${h.color}-500 p-3 rounded-lg`,children:s.jsx(_t,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available Tools"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${h.color}-500 p-3 rounded-lg`,children:s.jsx(gr,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"OAuth Ready"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.filter(j=>["Google Workspace","Google Search Console","QuickBooks Online","Slack","Mailchimp","Gusto","YouTube"].includes(j.name)).length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${h.color}-500 p-3 rounded-lg`,children:s.jsx($e,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Contacts"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.filter(j=>{const E=localStorage.getItem(`integration-contact-${j.name.toLowerCase().replace(/\s+/g,"-")}`);return E&&JSON.parse(E).name}).length})]})]})})]}),s.jsx(Uu,{category:e||"",categoryTitle:h.title,color:h.color}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Integration Tools & OAuth Connections"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Secure OAuth integration available for supported services"})]}),n&&s.jsxs("div",{className:"text-sm text-blue-600",children:[s.jsx(_t,{className:"inline h-4 w-4 mr-1"}),"Master Admin: Click settings icon on cards to customize"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((j,E)=>s.jsx(D_,{integration:j,color:h.color,onEditIntegration:n?p:void 0},`${j.name}-${E}`))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>t("/upload"),className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:[s.jsx($e,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Upload Documents"})]}),s.jsxs("button",{onClick:()=>t("/oauth"),className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:[s.jsx(_t,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Manage OAuth"})]}),s.jsxs("button",{onClick:()=>t("/documents"),className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:[s.jsx(gr,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"View Reports"})]})]})]}),s.jsx(k_,{isOpen:a,onClose:()=>{i(!1),l(null)},integration:o,onSave:j=>{(d.some(E=>E.name===(o==null?void 0:o.name))||(o==null?void 0:o.name)==="New Integration")&&(o==null?void 0:o.name)==="New Integration"?v(j):y(j)}})]})},I_=()=>{const e=Ar(),{documents:t}=Nr(),{isAdmin:r}=Lt(),n=[{id:"hr",name:"HR",description:"Human Resources Management",icon:bc,color:"bg-blue-600 hover:bg-blue-700",textColor:"text-blue-600",bgColor:"bg-blue-50",route:"/operations/hr"},{id:"accounting",name:"Accounting",description:"Financial Management & Bookkeeping",icon:hx,color:"bg-green-600 hover:bg-green-700",textColor:"text-green-600",bgColor:"bg-green-50",route:"/operations/accounting"},{id:"legal",name:"Legal",description:"Legal Affairs & Compliance",icon:mx,color:"bg-gray-600 hover:bg-gray-700",textColor:"text-gray-600",bgColor:"bg-gray-50",route:"/operations/legal"},{id:"branding",name:"Branding",description:"Brand Management & Design",icon:px,color:"bg-purple-600 hover:bg-purple-700",textColor:"text-purple-600",bgColor:"bg-purple-50",route:"/operations/branding"},{id:"social-media",name:"Social Media",description:"Social Media Management",icon:xx,color:"bg-pink-600 hover:bg-pink-700",textColor:"text-pink-600",bgColor:"bg-pink-50",route:"/operations/social-media"},{id:"communications",name:"Communications",description:"Internal & External Communications",icon:Zt,color:"bg-indigo-600 hover:bg-indigo-700",textColor:"text-indigo-600",bgColor:"bg-indigo-50",route:"/operations/communications"},{id:"volunteer-management",name:"Volunteer/People Management",description:"Volunteer Coordination & Management",icon:Qt,color:"bg-orange-600 hover:bg-orange-700",textColor:"text-orange-600",bgColor:"bg-orange-50",route:"/operations/volunteer-management"},{id:"streaming",name:"Streaming: Video & Podcast",description:"Media Production & Broadcasting",icon:gx,color:"bg-red-600 hover:bg-red-700",textColor:"text-red-600",bgColor:"bg-red-50",route:"/operations/streaming"},{id:"it",name:"IT & Technology",description:"Technology Infrastructure & Digital Tools",icon:vx,color:"bg-cyan-600 hover:bg-cyan-700",textColor:"text-cyan-600",bgColor:"bg-cyan-50",route:"/operations/it"}],a=o=>{e(o)},i=[{label:"Total Operations",value:n.length.toString(),description:"Available business operations"},{label:"Active Integrations",value:"12",description:"Connected services"},{label:"Documents",value:t.length.toString(),description:"Total documents managed"},{label:"Access Level",value:r?"Admin":"User",description:"Your permission level"}];return s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e("/"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(ei,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Operations Center"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your organization's business operations and integrations"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map(o=>s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.value}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:o.label}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.description})]})},o.label))}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Business Operations"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Access your integrated business tools and administrative functions"})]}),s.jsx("div",{className:"hexagon-grid",children:n.map(o=>s.jsx("div",{className:"hexagon-item",children:s.jsx("button",{onClick:()=>a(o.route),className:"hexagon-button group",style:{"--hex-border-color":"#e2e8f0","--hex-content-bg":"#ffffff","--hex-icon-color":ar(o.textColor),"--hex-title-color":"#1f2937","--hex-description-color":"#6b7280","--hex-hover-border-color":ar(o.color.replace("hover:","")),"--hex-hover-content-bg":ar(o.bgColor),"--hex-hover-icon-color":ar(o.color.replace("hover:","")),"--hex-hover-title-color":ar(o.color.replace("hover:","")),"--hex-hover-description-color":"#4b5563"},children:s.jsxs("div",{className:"hexagon-content",children:[s.jsx("div",{className:"hexagon-icon",children:s.jsx(o.icon,{className:"h-8 w-8"})}),s.jsx("h4",{className:"hexagon-title",children:o.name}),s.jsx("p",{className:"hexagon-description",children:o.description})]})})},o.id))})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"bg-blue-100 rounded-lg p-3",children:s.jsx(bc,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Access Management"}),s.jsx("p",{className:"text-blue-800 mb-4",children:"Your access to operations is managed by your organization administrators. Contact your admin if you need access to additional operations areas."}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("span",{className:"text-blue-700",children:[s.jsx("strong",{children:"Current Role:"})," ",r?"Administrator":"User"]}),s.jsxs("span",{className:"text-blue-700",children:[s.jsx("strong",{children:"Access Level:"})," ",r?"Full Access":"Restricted Access"]})]})]})]})})]})},B_=()=>{const{department:e}=Us(),t=Ar(),{documents:r}=Nr(),{isAdmin:n}=Lt(),i={"foster-adopt":{title:"Foster & Adopt",description:"Foster care and adoption services management",color:"pink",icon:"❤️",features:["Family assessments and documentation","Adoption process tracking","Foster family management","Child placement coordination","Legal documentation","Training and certification records"]},"r-kids":{title:"R/Kids",description:"Children's ministry programs and activities",color:"blue",icon:"👶",features:["Children's program planning","Volunteer coordination","Safety and security protocols","Curriculum and materials","Parent communication","Event planning and execution"]},"r-youth":{title:"R/Youth",description:"Youth ministry and engagement programs",color:"green",icon:"🎮",features:["Youth program development","Event planning and trips","Small group coordination","Volunteer leadership training","Parent and student communication","Discipleship tracking"]},"creative-media":{title:"Creative Media",description:"Media production and creative services",color:"purple",icon:"📸",features:["Video production planning","Graphic design projects","Photography coordination","Brand asset management","Equipment and resource tracking","Creative project workflows"]},cge:{title:"CGE",description:"Christian Growth & Education programs",color:"indigo",icon:"🎓",features:["Educational program development","Curriculum planning","Teacher and leader resources","Student progress tracking","Class scheduling","Resource and material management"]},worship:{title:"Worship",description:"Worship ministry and music coordination",color:"orange",icon:"🎵",features:["Service planning and coordination","Music team scheduling","Song and setlist management","Equipment and instrument tracking","Volunteer musician coordination","Special event worship planning"]},"sunday-production":{title:"Sunday Production",description:"Sunday service production and technical operations",color:"red",icon:"📺",features:["Service production planning","Technical equipment management","Volunteer tech team coordination","Audio/visual setup tracking","Live streaming coordination","Equipment maintenance schedules"]},"elder-board":{title:"Elder Board",description:"Elder board governance and decision making",color:"gray",icon:"🛡️",features:["Board meeting planning","Decision tracking and documentation","Policy development","Strategic planning","Governance oversight","Leadership development"]},"deacon-board":{title:"Deacon Board",description:"Deacon board service and support coordination",color:"cyan",icon:"👥",features:["Service project coordination","Community outreach planning","Member care and support","Facility and maintenance oversight","Volunteer coordination","Resource allocation"]}}[e];if(!i)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Department Not Found"}),s.jsx("button",{onClick:()=>t("/"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Return to Dashboard"})]});const o=r.filter(l=>l.category.toLowerCase().includes((e==null?void 0:e.toLowerCase())||"")||l.tags.some(d=>d.toLowerCase().includes((e==null?void 0:e.toLowerCase())||"")));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("/"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(ei,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:i.icon}),s.jsx("span",{children:i.title})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:i.description})]})]}),n&&s.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsx(_t,{className:"h-4 w-4"}),s.jsx("span",{children:"Manage Access"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${i.color}-500 p-3 rounded-lg`,children:s.jsx($e,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Documents"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${i.color}-500 p-3 rounded-lg`,children:s.jsx(Qt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team Members"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"8"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${i.color}-500 p-3 rounded-lg`,children:s.jsx(_t,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Projects"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"5"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${i.color}-500 p-3 rounded-lg`,children:s.jsx(wx,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resources"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"12"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Department Features & Capabilities"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.features.map((l,d)=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:`w-2 h-2 bg-${i.color}-500 rounded-full`}),s.jsx("span",{className:"text-sm text-gray-700",children:l})]},d))})]}),s.jsx(Uu,{category:e||"",categoryTitle:i.title,color:i.color}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>t("/upload"),className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:[s.jsx($e,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Upload Documents"})]}),s.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:[s.jsx(Qt,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Manage Team"})]}),s.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:[s.jsx(_t,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Department Settings"})]})]})]})]})},F_=({isOpen:e,onClose:t})=>{const{inviteUser:r,organization:n}=Lt(),[a,i]=w.useState(!1),[o,l]=w.useState(null),[d,c]=w.useState(!1),[u,f]=w.useState({email:"",role:"user",full_name:""}),h=async g=>{g.preventDefault(),i(!0);try{const p=await r(u);l(p),f({email:"",role:"user",full_name:""})}catch(p){alert("Failed to send invitation: "+(p instanceof Error?p.message:"Unknown error"))}finally{i(!1)}},m=()=>{l(null),f({email:"",role:"user",full_name:""}),c(!1),t()},x=async()=>{if(!o)return;const g=`${window.location.origin}/invite/${o.token}`;try{await navigator.clipboard.writeText(g),c(!0),setTimeout(()=>c(!1),2e3)}catch{const y=document.createElement("textarea");y.value=g,document.body.appendChild(y),y.select(),document.execCommand("copy"),document.body.removeChild(y),c(!0),setTimeout(()=>c(!1),2e3)}};return e?s.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:m}),s.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:o?"Invitation Sent":"Invite User"}),s.jsx("button",{onClick:m,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Rt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"p-6",children:o?s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"bg-green-100 rounded-full p-6 mx-auto w-24 h-24 flex items-center justify-center",children:s.jsx(yc,{className:"h-12 w-12 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Invitation sent successfully!"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["An invitation has been sent to ",s.jsx("strong",{children:o.email})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Share this invitation link:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:`${window.location.origin}/invite/${o.token}`,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm bg-white"}),s.jsx("button",{onClick:x,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${d?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:d?s.jsx(yc,{className:"h-4 w-4"}):s.jsx(k1,{className:"h-4 w-4"})})]})]}),s.jsx("button",{onClick:m,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Done"})]}):s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Zt,{className:"inline h-4 w-4 mr-1"}),"Email Address"]}),s.jsx("input",{type:"email",value:u.email,onChange:g=>f(p=>({...p,email:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"user@example.com",required:!0,disabled:a})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name (Optional)"}),s.jsx("input",{type:"text",value:u.full_name,onChange:g=>f(p=>({...p,full_name:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe",disabled:a})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:u.role,onChange:g=>f(p=>({...p,role:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a,children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"admin",children:"Admin"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Users can view and manage documents. Admins can also invite and manage other users."})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Organization:"})," ",n==null?void 0:n.name]}),s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"The invited user will be added to this organization."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:a,children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:a,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Ou,{className:"h-4 w-4"}),s.jsx("span",{children:a?"Sending...":"Send Invitation"})]})]})]})})]})})]}):null},M_=()=>{const{createOrganization:e}=Lt(),[t,r]=w.useState(""),[n,a]=w.useState(!1),i=async o=>{if(o.preventDefault(),!!t.trim()){a(!0);try{await e(t.trim())}catch(l){alert("Failed to create organization: "+(l instanceof Error?l.message:"Unknown error"))}finally{a(!1)}}};return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-blue-100",children:s.jsx(Qa,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Set up your organization"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Create your organization to start managing users and documents"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:i,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"organization-name",className:"block text-sm font-medium text-gray-700",children:"Organization Name"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"organization-name",name:"organization-name",type:"text",required:!0,value:t,onChange:o=>r(o.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your organization name",disabled:n})})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Qt,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"What happens next?"}),s.jsxs("ul",{className:"mt-2 text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:"• You'll become the master administrator"}),s.jsx("li",{children:"• You can invite team members to join"}),s.jsx("li",{children:"• Manage user roles and permissions"}),s.jsx("li",{children:"• Control access to documents and features"})]})]})]})}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:n||!t.trim(),className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:n?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating organization..."]}):s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Create Organization"}),s.jsx(P1,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]})]})})},$_=()=>{const{userProfile:e,organization:t,users:r,invitations:n,loading:a,error:i,isAdmin:o,isMasterAdmin:l,updateUserRole:d,deactivateUser:c,reactivateUser:u,cancelInvitation:f}=Lt(),[h,m]=w.useState(!1);if(a)return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage your organization's users and permissions"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),s.jsx("div",{className:"space-y-3",children:[...Array(5)].map((v,j)=>s.jsx("div",{className:"h-4 bg-gray-200 rounded"},j))})]})})]});if(i)return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage your organization's users and permissions"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsx("div",{className:"text-center py-8",children:s.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",i]})})})]});if(!t)return s.jsx(M_,{});if(!o)return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage your organization's users and permissions"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Access Restricted"}),s.jsx("p",{className:"text-gray-600",children:"You need admin privileges to access user management."})]})})]});const x=async(v,j)=>{try{await d(v,j)}catch(E){alert("Failed to update user role: "+(E instanceof Error?E.message:"Unknown error"))}},g=async v=>{if(window.confirm("Are you sure you want to deactivate this user?"))try{await c(v)}catch(j){alert("Failed to deactivate user: "+(j instanceof Error?j.message:"Unknown error"))}},p=async v=>{try{await u(v)}catch(j){alert("Failed to reactivate user: "+(j instanceof Error?j.message:"Unknown error"))}},y=async v=>{if(window.confirm("Are you sure you want to cancel this invitation?"))try{await f(v)}catch(j){alert("Failed to cancel invitation: "+(j instanceof Error?j.message:"Unknown error"))}},b=v=>{switch(v){case"master_admin":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),s.jsxs("p",{className:"text-gray-600",children:["Manage users in ",t.name]})]}),s.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ou,{className:"h-4 w-4"}),s.jsx("span",{children:"Invite User"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-blue-500 p-3 rounded-lg",children:s.jsx(Qt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-green-500 p-3 rounded-lg",children:s.jsx(xr,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(v=>v.is_active).length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-purple-500 p-3 rounded-lg",children:s.jsx(sr,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(v=>v.role==="admin"||v.role==="master_admin").length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-yellow-500 p-3 rounded-lg",children:s.jsx(gc,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Invites"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Organization Members"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"User"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Role"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Last Login"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Joined"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Actions"})]})}),s.jsx("tbody",{children:r.map(v=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:v.full_name||"No name set"}),s.jsx("p",{className:"text-sm text-gray-600",children:v.email})]})}),s.jsx("td",{className:"py-4 px-6",children:l&&v.role!=="master_admin"?s.jsxs("select",{value:v.role,onChange:j=>x(v.id,j.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"admin",children:"Admin"})]}):s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b(v.role)}`,children:v.role.replace("_"," ")})}),s.jsx("td",{className:"py-4 px-6",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.is_active?"Active":"Inactive"})}),s.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:v.last_login?Ie(new Date(v.last_login),"MMM dd, yyyy"):"Never"}),s.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:Ie(new Date(v.created_at),"MMM dd, yyyy")}),s.jsx("td",{className:"py-4 px-6",children:v.id!==(e==null?void 0:e.id)&&v.role!=="master_admin"&&s.jsx("div",{className:"flex items-center space-x-2",children:v.is_active?s.jsx("button",{onClick:()=>g(v.id),className:"text-red-600 hover:text-red-700 text-sm",children:"Deactivate"}):s.jsx("button",{onClick:()=>p(v.id),className:"text-green-600 hover:text-green-700 text-sm",children:"Reactivate"})})})]},v.id))})]})})]}),n.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pending Invitations"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Email"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Role"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Invited By"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Sent"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Expires"}),s.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Actions"})]})}),s.jsx("tbody",{children:n.map(v=>{var j,E;return s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zt,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-gray-900",children:v.email})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b(v.role)}`,children:v.role})}),s.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:((j=v.invited_by_profile)==null?void 0:j.full_name)||((E=v.invited_by_profile)==null?void 0:E.email)||"Unknown"}),s.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:Ie(new Date(v.created_at),"MMM dd, yyyy")}),s.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:Ie(new Date(v.expires_at),"MMM dd, yyyy")}),s.jsx("td",{className:"py-4 px-6",children:s.jsx("button",{onClick:()=>y(v.id),className:"text-red-600 hover:text-red-700 text-sm",children:"Cancel"})})]},v.id)})})]})})]}),s.jsx(F_,{isOpen:h,onClose:()=>m(!1)})]})},R_=()=>{var j,E,_,C;const{token:e}=Us(),t=Ar(),{acceptInvitation:r}=Lt(),[n,a]=w.useState(null),[i,o]=w.useState(!0),[l,d]=w.useState(!1),[c,u]=w.useState(null),[f,h]=w.useState(""),[m,x]=w.useState(""),[g,p]=w.useState(!1),[y,b]=w.useState(!1);w.useEffect(()=>{(async()=>{if(!e){u("Invalid invitation link"),o(!1);return}try{const{data:S,error:N}=await rt.from("user_invitations").select(`
            *,
            organization:organizations(name),
            invited_by_profile:user_profiles!user_invitations_invited_by_fkey(full_name, email)
          `).eq("token",e).is("accepted_at",null).gt("expires_at",new Date().toISOString()).single();N?u("Invalid or expired invitation"):a(S)}catch{u("Failed to load invitation")}finally{o(!1)}})()},[e]);const v=async A=>{if(A.preventDefault(),f!==m){u("Passwords do not match");return}if(f.length<6){u("Password must be at least 6 characters long");return}d(!0),u(null);try{await r(e,f),t("/")}catch(S){u(S instanceof Error?S.message:"Failed to accept invitation")}finally{d(!1)}};return i?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading invitation..."})]})}):c&&!n?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full text-center",children:[s.jsx("div",{className:"bg-red-100 rounded-full p-6 mx-auto w-24 h-24 flex items-center justify-center mb-6",children:s.jsx(Tu,{className:"h-12 w-12 text-red-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Invalid Invitation"}),s.jsx("p",{className:"text-gray-600 mb-6",children:c}),s.jsx("button",{onClick:()=>t("/"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Login"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-blue-100",children:s.jsx(Ou,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:["Join ",(j=n==null?void 0:n.organization)==null?void 0:j.name]}),s.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["You've been invited by ",((E=n==null?void 0:n.invited_by_profile)==null?void 0:E.full_name)||((_=n==null?void 0:n.invited_by_profile)==null?void 0:_.email)]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Invitation Details"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Email:"}),s.jsx("span",{className:"font-medium",children:n==null?void 0:n.email})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Role:"}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${(n==null?void 0:n.role)==="admin"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:n==null?void 0:n.role})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Organization:"}),s.jsx("span",{className:"font-medium",children:(C=n==null?void 0:n.organization)==null?void 0:C.name})]})]})]}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:c}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Create Password"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx("input",{id:"password",name:"password",type:g?"text":"password",required:!0,value:f,onChange:A=>h(A.target.value),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password",disabled:l}),s.jsx("button",{type:"button",onClick:()=>p(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:l,children:g?s.jsx(pc,{className:"h-5 w-5"}):s.jsx(jn,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx("input",{id:"confirm-password",name:"confirm-password",type:y?"text":"password",required:!0,value:m,onChange:A=>x(A.target.value),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirm your password",disabled:l}),s.jsx("button",{type:"button",onClick:()=>b(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:l,children:y?s.jsx(pc,{className:"h-5 w-5"}):s.jsx(jn,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(xr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"What's next?"}),s.jsx("p",{className:"mt-1 text-sm text-blue-800",children:"After creating your account, you'll have access to your organization's documents and can collaborate with your team."})]})]})}),s.jsx("button",{type:"submit",disabled:l||!f||!m,className:"w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:l?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Accept Invitation & Create Account"})]})]})]})})},L_=()=>{const{provider:e}=Us(),[t]=_1(),r=Ar(),{handleOAuthCallback:n}=Lu(),[a,i]=w.useState("loading"),[o,l]=w.useState("");return w.useEffect(()=>{(async()=>{const c=t.get("code"),u=t.get("state"),f=t.get("error");if(f){i("error"),l(`OAuth error: ${f}`);return}if(!c||!u||!e){i("error"),l("Missing required OAuth parameters");return}try{await n(c,u,e)?(i("success"),l("Successfully connected to "+e),setTimeout(()=>r("/"),2e3)):(i("error"),l("Failed to complete OAuth connection"))}catch(h){i("error"),l(h instanceof Error?h.message:"OAuth callback failed")}})()},[t,e,n,r]),s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"max-w-md w-full text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[a==="loading"&&s.jsxs(s.Fragment,{children:[s.jsx(jx,{className:"h-12 w-12 text-blue-600 mx-auto mb-4 animate-spin"}),s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Connecting to ",e,"..."]}),s.jsx("p",{className:"text-gray-600",children:"Please wait while we complete the connection."})]}),a==="success"&&s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connection Successful!"}),s.jsx("p",{className:"text-gray-600 mb-4",children:o}),s.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting you back to Adminezer..."})]}),a==="error"&&s.jsxs(s.Fragment,{children:[s.jsx(Tu,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connection Failed"}),s.jsx("p",{className:"text-gray-600 mb-6",children:o}),s.jsx("button",{onClick:()=>r("/"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Dashboard"})]})]})})})},U_=()=>{const{connections:e,loading:t,isConnected:r,initiateOAuth:n,disconnectProvider:a}=Lu(),[i,o]=w.useState(null),l=c=>{n(c)},d=async(c,u)=>{if(window.confirm(`Are you sure you want to disconnect ${u}?`)){o(c);try{await a(c)}catch(f){alert("Failed to disconnect: "+(f instanceof Error?f.message:"Unknown error"))}finally{o(null)}}};return t?s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),s.jsx("div",{className:"space-y-3",children:[...Array(3)].map((c,u)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded"},u))})]})}):s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{className:"h-5 w-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"OAuth Connections"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Securely connect to third-party services using OAuth authentication"})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"space-y-4",children:Object.values(Yn).map(c=>{const u=e.find(h=>h.provider_id===c.id&&h.is_active),f=r(c.id);return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${f?"bg-green-100":"bg-gray-100"}`,children:f?s.jsx(xr,{className:"h-5 w-5 text-green-600"}):s.jsx(ts,{className:"h-5 w-5 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:c.name}),s.jsx("p",{className:"text-sm text-gray-600",children:c.description}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:c.category}),f&&u&&s.jsxs("span",{className:"text-xs text-gray-500",children:["Connected ",Ie(new Date(u.created_at),"MMM dd, yyyy")]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:f&&u?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-800 rounded-full",children:"Connected"}),s.jsxs("button",{onClick:()=>d(u.id,c.name),disabled:i===u.id,className:"flex items-center space-x-1 px-3 py-1 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",children:[s.jsx(O1,{className:"h-4 w-4"}),s.jsx("span",{children:i===u.id?"Disconnecting...":"Disconnect"})]})]}):s.jsxs("button",{onClick:()=>l(c.id),className:"flex items-center space-x-1 px-3 py-1 text-sm bg-blue-600 text-white hover:bg-blue-700 rounded-lg transition-colors",children:[s.jsx(wc,{className:"h-4 w-4"}),s.jsx("span",{children:"Connect"})]})})]}),f&&u&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Scopes:"}),s.jsx("div",{className:"mt-1",children:u.scopes.map((h,m)=>s.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded mr-1 mb-1",children:h.split("/").pop()||h},m))})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Expires:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:Ie(new Date(u.expires_at),"MMM dd, yyyy HH:mm")})]})]})})]},c.id)})}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(sr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"About OAuth Security"}),s.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"OAuth connections allow secure access to third-party services without storing your passwords. Tokens are automatically refreshed and can be revoked at any time. Your credentials remain secure and are never stored in Adminezer."})]})]})})]})]})},z_=()=>s.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 text-center text-sm font-medium shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(jn,{className:"h-4 w-4"}),s.jsx("span",{children:"Portfolio Demo Mode"}),s.jsxs("div",{className:"group relative",children:[s.jsx(tx,{className:"h-4 w-4 cursor-help"}),s.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-black text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"This is a demonstration version with sample data for portfolio purposes"})]})]})});var tg={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,n)=>{e.exports=n()})(ee,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},a,i=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,l={},d=0,c={};function u(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(S){var N=E(S);N.chunkSize=parseInt(N.chunkSize),S.step||S.chunk||(N.chunkSize=null),this._handle=new g(N),(this._handle.streamer=this)._config=N}).call(this,A),this.parseChunk=function(S,N){var D=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<D){let P=this._config.newline;P||(k=this._config.quoteChar||'"',P=this._handle.guessLineEndings(S,k)),S=[...S.split(P).slice(D)].join(P)}this.isFirstChunk&&C(this._config.beforeFirstChunk)&&(k=this._config.beforeFirstChunk(S))!==void 0&&(S=k),this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+S,k=(this._partialLine="",this._handle.parse(D,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(S=k.meta.cursor,D=(this._finished||(this._partialLine=D.substring(S-this._baseIndex),this._baseIndex=S),k&&k.data&&(this._rowCount+=k.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)n.postMessage({results:k,workerId:c.WORKER_ID,finished:D});else if(C(this._config.chunk)&&!N){if(this._config.chunk(k,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=k=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.meta=k.meta),this._completed||!D||!C(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(S){C(this._config.error)?this._config.error(S):o&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:S,finished:!1})}}function f(A){var S;(A=A||{}).chunkSize||(A.chunkSize=c.RemoteChunkSize),u.call(this,A),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(N){this._input=N,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(S=new XMLHttpRequest,this._config.withCredentials&&(S.withCredentials=this._config.withCredentials),i||(S.onload=_(this._chunkLoaded,this),S.onerror=_(this._chunkError,this)),S.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var N,D=this._config.downloadRequestHeaders;for(N in D)S.setRequestHeader(N,D[N])}var k;this._config.chunkSize&&(k=this._start+this._config.chunkSize-1,S.setRequestHeader("Range","bytes="+this._start+"-"+k));try{S.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}i&&S.status===0&&this._chunkError()}},this._chunkLoaded=function(){S.readyState===4&&(S.status<200||400<=S.status?this._chunkError():(this._start+=this._config.chunkSize||S.responseText.length,this._finished=!this._config.chunkSize||this._start>=(N=>(N=N.getResponseHeader("Content-Range"))!==null?parseInt(N.substring(N.lastIndexOf("/")+1)):-1)(S),this.parseChunk(S.responseText)))},this._chunkError=function(N){N=S.statusText||N,this._sendError(new Error(N))}}function h(A){(A=A||{}).chunkSize||(A.chunkSize=c.LocalChunkSize),u.call(this,A);var S,N,D=typeof FileReader<"u";this.stream=function(k){this._input=k,N=k.slice||k.webkitSlice||k.mozSlice,D?((S=new FileReader).onload=_(this._chunkLoaded,this),S.onerror=_(this._chunkError,this)):S=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var k=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),k=N.call(k,this._start,P)),S.readAsText(k,this._config.encoding));D||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(k){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(k.target.result)},this._chunkError=function(){this._sendError(S.error)}}function m(A){var S;u.call(this,A=A||{}),this.stream=function(N){return S=N,this._nextChunk()},this._nextChunk=function(){var N,D;if(!this._finished)return N=this._config.chunkSize,S=N?(D=S.substring(0,N),S.substring(N)):(D=S,""),this._finished=!S,this.parseChunk(D)}}function x(A){u.call(this,A=A||{});var S=[],N=!0,D=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(k){this._input=k,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){D&&S.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),S.length?this.parseChunk(S.shift()):N=!0},this._streamData=_(function(k){try{S.push(typeof k=="string"?k:k.toString(this._config.encoding)),N&&(N=!1,this._checkIsFinished(),this.parseChunk(S.shift()))}catch(P){this._streamError(P)}},this),this._streamError=_(function(k){this._streamCleanUp(),this._sendError(k)},this),this._streamEnd=_(function(){this._streamCleanUp(),D=!0,this._streamData("")},this),this._streamCleanUp=_(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(A){var S,N,D,k,P=Math.pow(2,53),R=-P,B=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,z=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,q=0,K=0,Z=!1,I=!1,O=[],T={data:[],errors:[],meta:{}};function M(H){return A.skipEmptyLines==="greedy"?H.join("").trim()==="":H.length===1&&H[0].length===0}function Q(){if(T&&D&&(fe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),D=!1),A.skipEmptyLines&&(T.data=T.data.filter(function(W){return!M(W)})),ne()){let W=function(L,ae){C(A.transformHeader)&&(L=A.transformHeader(L,ae)),O.push(L)};if(T)if(Array.isArray(T.data[0])){for(var H=0;ne()&&H<T.data.length;H++)T.data[H].forEach(W);T.data.splice(0,1)}else T.data.forEach(W)}function U(W,L){for(var ae=A.header?{}:[],G=0;G<W.length;G++){var ie=G,te=W[G],te=((Ae,re)=>(pe=>(A.dynamicTypingFunction&&A.dynamicTyping[pe]===void 0&&(A.dynamicTyping[pe]=A.dynamicTypingFunction(pe)),(A.dynamicTyping[pe]||A.dynamicTyping)===!0))(Ae)?re==="true"||re==="TRUE"||re!=="false"&&re!=="FALSE"&&((pe=>{if(B.test(pe)&&(pe=parseFloat(pe),R<pe&&pe<P))return 1})(re)?parseFloat(re):z.test(re)?new Date(re):re===""?null:re):re)(ie=A.header?G>=O.length?"__parsed_extra":O[G]:ie,te=A.transform?A.transform(te,ie):te);ie==="__parsed_extra"?(ae[ie]=ae[ie]||[],ae[ie].push(te)):ae[ie]=te}return A.header&&(G>O.length?fe("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+G,K+L):G<O.length&&fe("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+G,K+L)),ae}var V;T&&(A.header||A.dynamicTyping||A.transform)&&(V=1,!T.data.length||Array.isArray(T.data[0])?(T.data=T.data.map(U),V=T.data.length):T.data=U(T.data,0),A.header&&T.meta&&(T.meta.fields=O),K+=V)}function ne(){return A.header&&O.length===0}function fe(H,U,V,W){H={type:H,code:U,message:V},W!==void 0&&(H.row=W),T.errors.push(H)}C(A.step)&&(k=A.step,A.step=function(H){T=H,ne()?Q():(Q(),T.data.length!==0&&(q+=H.data.length,A.preview&&q>A.preview?N.abort():(T.data=T.data[0],k(T,$))))}),this.parse=function(H,U,V){var W=A.quoteChar||'"',W=(A.newline||(A.newline=this.guessLineEndings(H,W)),D=!1,A.delimiter?C(A.delimiter)&&(A.delimiter=A.delimiter(H),T.meta.delimiter=A.delimiter):((W=((L,ae,G,ie,te)=>{var Ae,re,pe,ot;te=te||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ue=0;Ue<te.length;Ue++){for(var Ce,lt=te[Ue],De=0,mt=0,we=0,Oe=(pe=void 0,new y({comments:ie,delimiter:lt,newline:ae,preview:10}).parse(L)),Wt=0;Wt<Oe.data.length;Wt++)G&&M(Oe.data[Wt])?we++:(Ce=Oe.data[Wt].length,mt+=Ce,pe===void 0?pe=Ce:0<Ce&&(De+=Math.abs(Ce-pe),pe=Ce));0<Oe.data.length&&(mt/=Oe.data.length-we),(re===void 0||De<=re)&&(ot===void 0||ot<mt)&&1.99<mt&&(re=De,Ae=lt,ot=mt)}return{successful:!!(A.delimiter=Ae),bestDelimiter:Ae}})(H,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess)).successful?A.delimiter=W.bestDelimiter:(D=!0,A.delimiter=c.DefaultDelimiter),T.meta.delimiter=A.delimiter),E(A));return A.preview&&A.header&&W.preview++,S=H,N=new y(W),T=N.parse(S,U,V),Q(),Z?{meta:{paused:!0}}:T||{meta:{paused:!1}}},this.paused=function(){return Z},this.pause=function(){Z=!0,N.abort(),S=C(A.chunk)?"":S.substring(N.getCharIndex())},this.resume=function(){$.streamer._halted?(Z=!1,$.streamer.parseChunk(S,!0)):setTimeout($.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,N.abort(),T.meta.aborted=!0,C(A.complete)&&A.complete(T),S=""},this.guessLineEndings=function(L,W){L=L.substring(0,1048576);var W=new RegExp(p(W)+"([^]*?)"+p(W),"gm"),V=(L=L.replace(W,"")).split("\r"),W=L.split(`
`),L=1<W.length&&W[0].length<V[0].length;if(V.length===1||L)return`
`;for(var ae=0,G=0;G<V.length;G++)V[G][0]===`
`&&ae++;return ae>=V.length/2?`\r
`:"\r"}}function p(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(A){var S=(A=A||{}).delimiter,N=A.newline,D=A.comments,k=A.step,P=A.preview,R=A.fastMode,B=null,z=!1,$=A.quoteChar==null?'"':A.quoteChar,q=$;if(A.escapeChar!==void 0&&(q=A.escapeChar),(typeof S!="string"||-1<c.BAD_DELIMITERS.indexOf(S))&&(S=","),D===S)throw new Error("Comment character same as delimiter");D===!0?D="#":(typeof D!="string"||-1<c.BAD_DELIMITERS.indexOf(D))&&(D=!1),N!==`
`&&N!=="\r"&&N!==`\r
`&&(N=`
`);var K=0,Z=!1;this.parse=function(I,O,T){if(typeof I!="string")throw new Error("Input must be a string");var M=I.length,Q=S.length,ne=N.length,fe=D.length,H=C(k),U=[],V=[],W=[],L=K=0;if(!I)return De();if(R||R!==!1&&I.indexOf($)===-1){for(var ae=I.split(N),G=0;G<ae.length;G++){if(W=ae[G],K+=W.length,G!==ae.length-1)K+=N.length;else if(T)return De();if(!D||W.substring(0,fe)!==D){if(H){if(U=[],ot(W.split(S)),mt(),Z)return De()}else ot(W.split(S));if(P&&P<=G)return U=U.slice(0,P),De(!0)}}return De()}for(var ie=I.indexOf(S,K),te=I.indexOf(N,K),Ae=new RegExp(p(q)+p($),"g"),re=I.indexOf($,K);;)if(I[K]===$)for(re=K,K++;;){if((re=I.indexOf($,re+1))===-1)return T||V.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:U.length,index:K}),Ce();if(re===M-1)return Ce(I.substring(K,re).replace(Ae,$));if($===q&&I[re+1]===q)re++;else if($===q||re===0||I[re-1]!==q){ie!==-1&&ie<re+1&&(ie=I.indexOf(S,re+1));var pe=Ue((te=te!==-1&&te<re+1?I.indexOf(N,re+1):te)===-1?ie:Math.min(ie,te));if(I.substr(re+1+pe,Q)===S){W.push(I.substring(K,re).replace(Ae,$)),I[K=re+1+pe+Q]!==$&&(re=I.indexOf($,K)),ie=I.indexOf(S,K),te=I.indexOf(N,K);break}if(pe=Ue(te),I.substring(re+1+pe,re+1+pe+ne)===N){if(W.push(I.substring(K,re).replace(Ae,$)),lt(re+1+pe+ne),ie=I.indexOf(S,K),re=I.indexOf($,K),H&&(mt(),Z))return De();if(P&&U.length>=P)return De(!0);break}V.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:U.length,index:K}),re++}}else if(D&&W.length===0&&I.substring(K,K+fe)===D){if(te===-1)return De();K=te+ne,te=I.indexOf(N,K),ie=I.indexOf(S,K)}else if(ie!==-1&&(ie<te||te===-1))W.push(I.substring(K,ie)),K=ie+Q,ie=I.indexOf(S,K);else{if(te===-1)break;if(W.push(I.substring(K,te)),lt(te+ne),H&&(mt(),Z))return De();if(P&&U.length>=P)return De(!0)}return Ce();function ot(we){U.push(we),L=K}function Ue(we){var Oe=0;return Oe=we!==-1&&(we=I.substring(re+1,we))&&we.trim()===""?we.length:Oe}function Ce(we){return T||(we===void 0&&(we=I.substring(K)),W.push(we),K=M,ot(W),H&&mt()),De()}function lt(we){K=we,ot(W),W=[],te=I.indexOf(N,K)}function De(we){if(A.header&&!O&&U.length&&!z){var Oe=U[0],Wt=Object.create(null),Rn=new Set(Oe);let Pa=!1;for(let pt=0;pt<Oe.length;pt++){let Qe=Oe[pt];if(Wt[Qe=C(A.transformHeader)?A.transformHeader(Qe,pt):Qe]){let en,Oa=Wt[Qe];for(;en=Qe+"_"+Oa,Oa++,Rn.has(en););Rn.add(en),Oe[pt]=en,Wt[Qe]++,Pa=!0,(B=B===null?{}:B)[en]=Qe}else Wt[Qe]=1,Oe[pt]=Qe;Rn.add(Qe)}Pa&&console.warn("Duplicate headers found and renamed."),z=!0}return{data:U,errors:V,meta:{delimiter:S,linebreak:N,aborted:Z,truncated:!!we,cursor:L+(O||0),renamedHeaders:B}}}function mt(){k(De()),U=[],V=[]}},this.abort=function(){Z=!0},this.getCharIndex=function(){return K}}function b(A){var S=A.data,N=l[S.workerId],D=!1;if(S.error)N.userError(S.error,S.file);else if(S.results&&S.results.data){var k={abort:function(){D=!0,v(S.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(C(N.userStep)){for(var P=0;P<S.results.data.length&&(N.userStep({data:S.results.data[P],errors:S.results.errors,meta:S.results.meta},k),!D);P++);delete S.results}else C(N.userChunk)&&(N.userChunk(S.results,k,S.file),delete S.results)}S.finished&&!D&&v(S.workerId,S.results)}function v(A,S){var N=l[A];C(N.userComplete)&&N.userComplete(S),N.terminate(),delete l[A]}function j(){throw new Error("Not implemented.")}function E(A){if(typeof A!="object"||A===null)return A;var S,N=Array.isArray(A)?[]:{};for(S in A)N[S]=E(A[S]);return N}function _(A,S){return function(){A.apply(S,arguments)}}function C(A){return typeof A=="function"}return c.parse=function(A,S){var N=(S=S||{}).dynamicTyping||!1;if(C(N)&&(S.dynamicTypingFunction=N,N={}),S.dynamicTyping=N,S.transform=!!C(S.transform)&&S.transform,!S.worker||!c.WORKERS_SUPPORTED)return N=null,c.NODE_STREAM_INPUT,typeof A=="string"?(A=(D=>D.charCodeAt(0)!==65279?D:D.slice(1))(A),N=new(S.download?f:m)(S)):A.readable===!0&&C(A.read)&&C(A.on)?N=new x(S):(n.File&&A instanceof File||A instanceof Object)&&(N=new h(S)),N.stream(A);(N=(()=>{var D;return!!c.WORKERS_SUPPORTED&&(D=(()=>{var k=n.URL||n.webkitURL||null,P=r.toString();return c.BLOB_URL||(c.BLOB_URL=k.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(D=new n.Worker(D)).onmessage=b,D.id=d++,l[D.id]=D)})()).userStep=S.step,N.userChunk=S.chunk,N.userComplete=S.complete,N.userError=S.error,S.step=C(S.step),S.chunk=C(S.chunk),S.complete=C(S.complete),S.error=C(S.error),delete S.worker,N.postMessage({input:A,config:S,workerId:N.id})},c.unparse=function(A,S){var N=!1,D=!0,k=",",P=`\r
`,R='"',B=R+R,z=!1,$=null,q=!1,K=((()=>{if(typeof S=="object"){if(typeof S.delimiter!="string"||c.BAD_DELIMITERS.filter(function(O){return S.delimiter.indexOf(O)!==-1}).length||(k=S.delimiter),typeof S.quotes!="boolean"&&typeof S.quotes!="function"&&!Array.isArray(S.quotes)||(N=S.quotes),typeof S.skipEmptyLines!="boolean"&&typeof S.skipEmptyLines!="string"||(z=S.skipEmptyLines),typeof S.newline=="string"&&(P=S.newline),typeof S.quoteChar=="string"&&(R=S.quoteChar),typeof S.header=="boolean"&&(D=S.header),Array.isArray(S.columns)){if(S.columns.length===0)throw new Error("Option columns is empty");$=S.columns}S.escapeChar!==void 0&&(B=S.escapeChar+R),S.escapeFormulae instanceof RegExp?q=S.escapeFormulae:typeof S.escapeFormulae=="boolean"&&S.escapeFormulae&&(q=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(R),"g"));if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return Z(null,A,z);if(typeof A[0]=="object")return Z($||Object.keys(A[0]),A,z)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||$),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),Array.isArray(A.data[0])||typeof A.data[0]=="object"||(A.data=[A.data])),Z(A.fields||[],A.data||[],z);throw new Error("Unable to serialize unrecognized input");function Z(O,T,M){var Q="",ne=(typeof O=="string"&&(O=JSON.parse(O)),typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(O)&&0<O.length),fe=!Array.isArray(T[0]);if(ne&&D){for(var H=0;H<O.length;H++)0<H&&(Q+=k),Q+=I(O[H],H);0<T.length&&(Q+=P)}for(var U=0;U<T.length;U++){var V=(ne?O:T[U]).length,W=!1,L=ne?Object.keys(T[U]).length===0:T[U].length===0;if(M&&!ne&&(W=M==="greedy"?T[U].join("").trim()==="":T[U].length===1&&T[U][0].length===0),M==="greedy"&&ne){for(var ae=[],G=0;G<V;G++){var ie=fe?O[G]:G;ae.push(T[U][ie])}W=ae.join("").trim()===""}if(!W){for(var te=0;te<V;te++){0<te&&!L&&(Q+=k);var Ae=ne&&fe?O[te]:te;Q+=I(T[U][Ae],te)}U<T.length-1&&(!M||0<V&&!L)&&(Q+=P)}}return Q}function I(O,T){var M,Q;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):(Q=!1,q&&typeof O=="string"&&q.test(O)&&(O="'"+O,Q=!0),M=O.toString().replace(K,B),(Q=Q||N===!0||typeof N=="function"&&N(O,T)||Array.isArray(N)&&N[T]||((ne,fe)=>{for(var H=0;H<fe.length;H++)if(-1<ne.indexOf(fe[H]))return!0;return!1})(M,c.BAD_DELIMITERS)||-1<M.indexOf(k)||M.charAt(0)===" "||M.charAt(M.length-1)===" ")?R+M+R:M)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=y,c.ParserHandle=g,c.NetworkStreamer=f,c.FileStreamer=h,c.StringStreamer=m,c.ReadableStreamStreamer=x,n.jQuery&&((a=n.jQuery).fn.parse=function(A){var S=A.config||{},N=[];return this.each(function(P){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var R=0;R<this.files.length;R++)N.push({file:this.files[R],inputElem:this,instanceConfig:a.extend({},S)})}),D(),this;function D(){if(N.length===0)C(A.complete)&&A.complete();else{var P,R,B,z,$=N[0];if(C(A.before)){var q=A.before($.file,$.inputElem);if(typeof q=="object"){if(q.action==="abort")return P="AbortError",R=$.file,B=$.inputElem,z=q.reason,void(C(A.error)&&A.error({name:P},R,B,z));if(q.action==="skip")return void k();typeof q.config=="object"&&($.instanceConfig=a.extend($.instanceConfig,q.config))}else if(q==="skip")return void k()}var K=$.instanceConfig.complete;$.instanceConfig.complete=function(Z){C(K)&&K(Z,$.file,$.inputElem),k()},c.parse($.file,$.instanceConfig)}}function k(){N.splice(0,1),D()}}),o&&(n.onmessage=function(A){A=A.data,c.WORKER_ID===void 0&&A&&(c.WORKER_ID=A.workerId),typeof A.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(A.input,A.config),finished:!0}):(n.File&&A.input instanceof File||A.input instanceof Object)&&(A=c.parse(A.input,A.config))&&n.postMessage({workerId:c.WORKER_ID,results:A,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(h.prototype=Object.create(u.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(x.prototype=Object.create(u.prototype)).constructor=x,c})})(tg);var K_=tg.exports;const q_=tr(K_);function un(e,t){return Ie(e,t)}function W_(e){const t=["MM/dd/yyyy","M/d/yyyy","MM-dd-yyyy","M-d-yyyy","yyyy-MM-dd","dd/MM/yyyy","yyyy/MM/dd","dd-MM-yyyy","MMM dd, yyyy","dd MMM yyyy"];for(const n of t)try{const a=T1(e,n,new Date);if(ff(a))return a}catch{continue}const r=new Date(e);return ff(r)?r:null}var rg={exports:{}};function H_(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ul={exports:{}};const G_={},V_=Object.freeze(Object.defineProperty({__proto__:null,default:G_},Symbol.toStringTag,{value:"Module"})),Y_=ex(V_);var Bf;function ce(){return Bf||(Bf=1,function(e,t){(function(r,n){e.exports=n()})(ee,function(){var r=r||function(n,a){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof ee<"u"&&ee.crypto&&(i=ee.crypto),!i&&typeof H_=="function")try{i=Y_}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},l=Object.create||function(){function b(){}return function(v){var j;return b.prototype=v,j=new b,b.prototype=null,j}}(),d={},c=d.lib={},u=c.Base=function(){return{extend:function(b){var v=l(this);return b&&v.mixIn(b),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var v in b)b.hasOwnProperty(v)&&(this[v]=b[v]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=c.WordArray=u.extend({init:function(b,v){b=this.words=b||[],v!=a?this.sigBytes=v:this.sigBytes=b.length*4},toString:function(b){return(b||m).stringify(this)},concat:function(b){var v=this.words,j=b.words,E=this.sigBytes,_=b.sigBytes;if(this.clamp(),E%4)for(var C=0;C<_;C++){var A=j[C>>>2]>>>24-C%4*8&255;v[E+C>>>2]|=A<<24-(E+C)%4*8}else for(var S=0;S<_;S+=4)v[E+S>>>2]=j[S>>>2];return this.sigBytes+=_,this},clamp:function(){var b=this.words,v=this.sigBytes;b[v>>>2]&=4294967295<<32-v%4*8,b.length=n.ceil(v/4)},clone:function(){var b=u.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var v=[],j=0;j<b;j+=4)v.push(o());return new f.init(v,b)}}),h=d.enc={},m=h.Hex={stringify:function(b){for(var v=b.words,j=b.sigBytes,E=[],_=0;_<j;_++){var C=v[_>>>2]>>>24-_%4*8&255;E.push((C>>>4).toString(16)),E.push((C&15).toString(16))}return E.join("")},parse:function(b){for(var v=b.length,j=[],E=0;E<v;E+=2)j[E>>>3]|=parseInt(b.substr(E,2),16)<<24-E%8*4;return new f.init(j,v/2)}},x=h.Latin1={stringify:function(b){for(var v=b.words,j=b.sigBytes,E=[],_=0;_<j;_++){var C=v[_>>>2]>>>24-_%4*8&255;E.push(String.fromCharCode(C))}return E.join("")},parse:function(b){for(var v=b.length,j=[],E=0;E<v;E++)j[E>>>2]|=(b.charCodeAt(E)&255)<<24-E%4*8;return new f.init(j,v)}},g=h.Utf8={stringify:function(b){try{return decodeURIComponent(escape(x.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return x.parse(unescape(encodeURIComponent(b)))}},p=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=g.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var v,j=this._data,E=j.words,_=j.sigBytes,C=this.blockSize,A=C*4,S=_/A;b?S=n.ceil(S):S=n.max((S|0)-this._minBufferSize,0);var N=S*C,D=n.min(N*4,_);if(N){for(var k=0;k<N;k+=C)this._doProcessBlock(E,k);v=E.splice(0,N),j.sigBytes-=D}return new f.init(v,D)},clone:function(){var b=u.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});c.Hasher=p.extend({cfg:u.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var v=this._doFinalize();return v},blockSize:16,_createHelper:function(b){return function(v,j){return new b.init(j).finalize(v)}},_createHmacHelper:function(b){return function(v,j){return new y.HMAC.init(b,j).finalize(v)}}});var y=d.algo={};return d}(Math);return r})}(ul)),ul.exports}var dl={exports:{}},Ff;function Js(){return Ff||(Ff=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){return function(n){var a=r,i=a.lib,o=i.Base,l=i.WordArray,d=a.x64={};d.Word=o.extend({init:function(c,u){this.high=c,this.low=u}}),d.WordArray=o.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,f=[],h=0;h<u;h++){var m=c[h];f.push(m.high),f.push(m.low)}return l.create(f,this.sigBytes)},clone:function(){for(var c=o.clone.call(this),u=c.words=this.words.slice(0),f=u.length,h=0;h<f;h++)u[h]=u[h].clone();return c}})}(),r})}(dl)),dl.exports}var fl={exports:{}},Mf;function X_(){return Mf||(Mf=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,a=n.lib,i=a.WordArray,o=i.init,l=i.init=function(d){if(d instanceof ArrayBuffer&&(d=new Uint8Array(d)),(d instanceof Int8Array||typeof Uint8ClampedArray<"u"&&d instanceof Uint8ClampedArray||d instanceof Int16Array||d instanceof Uint16Array||d instanceof Int32Array||d instanceof Uint32Array||d instanceof Float32Array||d instanceof Float64Array)&&(d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength)),d instanceof Uint8Array){for(var c=d.byteLength,u=[],f=0;f<c;f++)u[f>>>2]|=d[f]<<24-f%4*8;o.call(this,u,c)}else o.apply(this,arguments)};l.prototype=i}}(),r.lib.WordArray})}(fl)),fl.exports}var hl={exports:{}},$f;function J_(){return $f||($f=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(d){for(var c=d.words,u=d.sigBytes,f=[],h=0;h<u;h+=2){var m=c[h>>>2]>>>16-h%4*8&65535;f.push(String.fromCharCode(m))}return f.join("")},parse:function(d){for(var c=d.length,u=[],f=0;f<c;f++)u[f>>>1]|=d.charCodeAt(f)<<16-f%2*16;return i.create(u,c*2)}},o.Utf16LE={stringify:function(d){for(var c=d.words,u=d.sigBytes,f=[],h=0;h<u;h+=2){var m=l(c[h>>>2]>>>16-h%4*8&65535);f.push(String.fromCharCode(m))}return f.join("")},parse:function(d){for(var c=d.length,u=[],f=0;f<c;f++)u[f>>>1]|=l(d.charCodeAt(f)<<16-f%2*16);return i.create(u,c*2)}};function l(d){return d<<8&4278255360|d>>>8&16711935}}(),r.enc.Utf16})}(hl)),hl.exports}var ml={exports:{}},Rf;function Pn(){return Rf||(Rf=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.WordArray,o=n.enc;o.Base64={stringify:function(d){var c=d.words,u=d.sigBytes,f=this._map;d.clamp();for(var h=[],m=0;m<u;m+=3)for(var x=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,p=c[m+2>>>2]>>>24-(m+2)%4*8&255,y=x<<16|g<<8|p,b=0;b<4&&m+b*.75<u;b++)h.push(f.charAt(y>>>6*(3-b)&63));var v=f.charAt(64);if(v)for(;h.length%4;)h.push(v);return h.join("")},parse:function(d){var c=d.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var m=u.charAt(64);if(m){var x=d.indexOf(m);x!==-1&&(c=x)}return l(d,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function l(d,c,u){for(var f=[],h=0,m=0;m<c;m++)if(m%4){var x=u[d.charCodeAt(m-1)]<<m%4*2,g=u[d.charCodeAt(m)]>>>6-m%4*2,p=x|g;f[h>>>2]|=p<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64})}(ml)),ml.exports}var pl={exports:{}},Lf;function Z_(){return Lf||(Lf=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.WordArray,o=n.enc;o.Base64url={stringify:function(d,c){c===void 0&&(c=!0);var u=d.words,f=d.sigBytes,h=c?this._safe_map:this._map;d.clamp();for(var m=[],x=0;x<f;x+=3)for(var g=u[x>>>2]>>>24-x%4*8&255,p=u[x+1>>>2]>>>24-(x+1)%4*8&255,y=u[x+2>>>2]>>>24-(x+2)%4*8&255,b=g<<16|p<<8|y,v=0;v<4&&x+v*.75<f;v++)m.push(h.charAt(b>>>6*(3-v)&63));var j=h.charAt(64);if(j)for(;m.length%4;)m.push(j);return m.join("")},parse:function(d,c){c===void 0&&(c=!0);var u=d.length,f=c?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var m=0;m<f.length;m++)h[f.charCodeAt(m)]=m}var x=f.charAt(64);if(x){var g=d.indexOf(x);g!==-1&&(u=g)}return l(d,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function l(d,c,u){for(var f=[],h=0,m=0;m<c;m++)if(m%4){var x=u[d.charCodeAt(m-1)]<<m%4*2,g=u[d.charCodeAt(m)]>>>6-m%4*2,p=x|g;f[h>>>2]|=p<<24-h%4*8,h++}return i.create(f,h)}}(),r.enc.Base64url})}(pl)),pl.exports}var xl={exports:{}},Uf;function On(){return Uf||(Uf=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){return function(n){var a=r,i=a.lib,o=i.WordArray,l=i.Hasher,d=a.algo,c=[];(function(){for(var g=0;g<64;g++)c[g]=n.abs(n.sin(g+1))*4294967296|0})();var u=d.MD5=l.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,p){for(var y=0;y<16;y++){var b=p+y,v=g[b];g[b]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}var j=this._hash.words,E=g[p+0],_=g[p+1],C=g[p+2],A=g[p+3],S=g[p+4],N=g[p+5],D=g[p+6],k=g[p+7],P=g[p+8],R=g[p+9],B=g[p+10],z=g[p+11],$=g[p+12],q=g[p+13],K=g[p+14],Z=g[p+15],I=j[0],O=j[1],T=j[2],M=j[3];I=f(I,O,T,M,E,7,c[0]),M=f(M,I,O,T,_,12,c[1]),T=f(T,M,I,O,C,17,c[2]),O=f(O,T,M,I,A,22,c[3]),I=f(I,O,T,M,S,7,c[4]),M=f(M,I,O,T,N,12,c[5]),T=f(T,M,I,O,D,17,c[6]),O=f(O,T,M,I,k,22,c[7]),I=f(I,O,T,M,P,7,c[8]),M=f(M,I,O,T,R,12,c[9]),T=f(T,M,I,O,B,17,c[10]),O=f(O,T,M,I,z,22,c[11]),I=f(I,O,T,M,$,7,c[12]),M=f(M,I,O,T,q,12,c[13]),T=f(T,M,I,O,K,17,c[14]),O=f(O,T,M,I,Z,22,c[15]),I=h(I,O,T,M,_,5,c[16]),M=h(M,I,O,T,D,9,c[17]),T=h(T,M,I,O,z,14,c[18]),O=h(O,T,M,I,E,20,c[19]),I=h(I,O,T,M,N,5,c[20]),M=h(M,I,O,T,B,9,c[21]),T=h(T,M,I,O,Z,14,c[22]),O=h(O,T,M,I,S,20,c[23]),I=h(I,O,T,M,R,5,c[24]),M=h(M,I,O,T,K,9,c[25]),T=h(T,M,I,O,A,14,c[26]),O=h(O,T,M,I,P,20,c[27]),I=h(I,O,T,M,q,5,c[28]),M=h(M,I,O,T,C,9,c[29]),T=h(T,M,I,O,k,14,c[30]),O=h(O,T,M,I,$,20,c[31]),I=m(I,O,T,M,N,4,c[32]),M=m(M,I,O,T,P,11,c[33]),T=m(T,M,I,O,z,16,c[34]),O=m(O,T,M,I,K,23,c[35]),I=m(I,O,T,M,_,4,c[36]),M=m(M,I,O,T,S,11,c[37]),T=m(T,M,I,O,k,16,c[38]),O=m(O,T,M,I,B,23,c[39]),I=m(I,O,T,M,q,4,c[40]),M=m(M,I,O,T,E,11,c[41]),T=m(T,M,I,O,A,16,c[42]),O=m(O,T,M,I,D,23,c[43]),I=m(I,O,T,M,R,4,c[44]),M=m(M,I,O,T,$,11,c[45]),T=m(T,M,I,O,Z,16,c[46]),O=m(O,T,M,I,C,23,c[47]),I=x(I,O,T,M,E,6,c[48]),M=x(M,I,O,T,k,10,c[49]),T=x(T,M,I,O,K,15,c[50]),O=x(O,T,M,I,N,21,c[51]),I=x(I,O,T,M,$,6,c[52]),M=x(M,I,O,T,A,10,c[53]),T=x(T,M,I,O,B,15,c[54]),O=x(O,T,M,I,_,21,c[55]),I=x(I,O,T,M,P,6,c[56]),M=x(M,I,O,T,Z,10,c[57]),T=x(T,M,I,O,D,15,c[58]),O=x(O,T,M,I,q,21,c[59]),I=x(I,O,T,M,S,6,c[60]),M=x(M,I,O,T,z,10,c[61]),T=x(T,M,I,O,C,15,c[62]),O=x(O,T,M,I,R,21,c[63]),j[0]=j[0]+I|0,j[1]=j[1]+O|0,j[2]=j[2]+T|0,j[3]=j[3]+M|0},_doFinalize:function(){var g=this._data,p=g.words,y=this._nDataBytes*8,b=g.sigBytes*8;p[b>>>5]|=128<<24-b%32;var v=n.floor(y/4294967296),j=y;p[(b+64>>>9<<4)+15]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,p[(b+64>>>9<<4)+14]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,g.sigBytes=(p.length+1)*4,this._process();for(var E=this._hash,_=E.words,C=0;C<4;C++){var A=_[C];_[C]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return E},clone:function(){var g=l.clone.call(this);return g._hash=this._hash.clone(),g}});function f(g,p,y,b,v,j,E){var _=g+(p&y|~p&b)+v+E;return(_<<j|_>>>32-j)+p}function h(g,p,y,b,v,j,E){var _=g+(p&b|y&~b)+v+E;return(_<<j|_>>>32-j)+p}function m(g,p,y,b,v,j,E){var _=g+(p^y^b)+v+E;return(_<<j|_>>>32-j)+p}function x(g,p,y,b,v,j,E){var _=g+(y^(p|~b))+v+E;return(_<<j|_>>>32-j)+p}a.MD5=l._createHelper(u),a.HmacMD5=l._createHmacHelper(u)}(Math),r.MD5})}(xl)),xl.exports}var gl={exports:{}},zf;function ng(){return zf||(zf=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.WordArray,o=a.Hasher,l=n.algo,d=[],c=l.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var h=this._hash.words,m=h[0],x=h[1],g=h[2],p=h[3],y=h[4],b=0;b<80;b++){if(b<16)d[b]=u[f+b]|0;else{var v=d[b-3]^d[b-8]^d[b-14]^d[b-16];d[b]=v<<1|v>>>31}var j=(m<<5|m>>>27)+y+d[b];b<20?j+=(x&g|~x&p)+1518500249:b<40?j+=(x^g^p)+1859775393:b<60?j+=(x&g|x&p|g&p)-1894007588:j+=(x^g^p)-899497514,y=p,p=g,g=x<<30|x>>>2,x=m,m=j}h[0]=h[0]+m|0,h[1]=h[1]+x|0,h[2]=h[2]+g|0,h[3]=h[3]+p|0,h[4]=h[4]+y|0},_doFinalize:function(){var u=this._data,f=u.words,h=this._nDataBytes*8,m=u.sigBytes*8;return f[m>>>5]|=128<<24-m%32,f[(m+64>>>9<<4)+14]=Math.floor(h/4294967296),f[(m+64>>>9<<4)+15]=h,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=o._createHelper(c),n.HmacSHA1=o._createHmacHelper(c)}(),r.SHA1})}(gl)),gl.exports}var vl={exports:{}},Kf;function zu(){return Kf||(Kf=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){return function(n){var a=r,i=a.lib,o=i.WordArray,l=i.Hasher,d=a.algo,c=[],u=[];(function(){function m(y){for(var b=n.sqrt(y),v=2;v<=b;v++)if(!(y%v))return!1;return!0}function x(y){return(y-(y|0))*4294967296|0}for(var g=2,p=0;p<64;)m(g)&&(p<8&&(c[p]=x(n.pow(g,1/2))),u[p]=x(n.pow(g,1/3)),p++),g++})();var f=[],h=d.SHA256=l.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(m,x){for(var g=this._hash.words,p=g[0],y=g[1],b=g[2],v=g[3],j=g[4],E=g[5],_=g[6],C=g[7],A=0;A<64;A++){if(A<16)f[A]=m[x+A]|0;else{var S=f[A-15],N=(S<<25|S>>>7)^(S<<14|S>>>18)^S>>>3,D=f[A-2],k=(D<<15|D>>>17)^(D<<13|D>>>19)^D>>>10;f[A]=N+f[A-7]+k+f[A-16]}var P=j&E^~j&_,R=p&y^p&b^y&b,B=(p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22),z=(j<<26|j>>>6)^(j<<21|j>>>11)^(j<<7|j>>>25),$=C+z+P+u[A]+f[A],q=B+R;C=_,_=E,E=j,j=v+$|0,v=b,b=y,y=p,p=$+q|0}g[0]=g[0]+p|0,g[1]=g[1]+y|0,g[2]=g[2]+b|0,g[3]=g[3]+v|0,g[4]=g[4]+j|0,g[5]=g[5]+E|0,g[6]=g[6]+_|0,g[7]=g[7]+C|0},_doFinalize:function(){var m=this._data,x=m.words,g=this._nDataBytes*8,p=m.sigBytes*8;return x[p>>>5]|=128<<24-p%32,x[(p+64>>>9<<4)+14]=n.floor(g/4294967296),x[(p+64>>>9<<4)+15]=g,m.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var m=l.clone.call(this);return m._hash=this._hash.clone(),m}});a.SHA256=l._createHelper(h),a.HmacSHA256=l._createHmacHelper(h)}(Math),r.SHA256})}(vl)),vl.exports}var yl={exports:{}},qf;function Q_(){return qf||(qf=1,function(e,t){(function(r,n,a){e.exports=n(ce(),zu())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.WordArray,o=n.algo,l=o.SHA256,d=o.SHA224=l.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=l._createHelper(d),n.HmacSHA224=l._createHmacHelper(d)}(),r.SHA224})}(yl)),yl.exports}var bl={exports:{}},Wf;function ag(){return Wf||(Wf=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Js())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.Hasher,o=n.x64,l=o.Word,d=o.WordArray,c=n.algo;function u(){return l.create.apply(l,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var x=0;x<80;x++)h[x]=u()})();var m=c.SHA512=i.extend({_doReset:function(){this._hash=new d.init([new l.init(1779033703,4089235720),new l.init(3144134277,2227873595),new l.init(1013904242,4271175723),new l.init(2773480762,1595750129),new l.init(1359893119,2917565137),new l.init(2600822924,725511199),new l.init(528734635,4215389547),new l.init(1541459225,327033209)])},_doProcessBlock:function(x,g){for(var p=this._hash.words,y=p[0],b=p[1],v=p[2],j=p[3],E=p[4],_=p[5],C=p[6],A=p[7],S=y.high,N=y.low,D=b.high,k=b.low,P=v.high,R=v.low,B=j.high,z=j.low,$=E.high,q=E.low,K=_.high,Z=_.low,I=C.high,O=C.low,T=A.high,M=A.low,Q=S,ne=N,fe=D,H=k,U=P,V=R,W=B,L=z,ae=$,G=q,ie=K,te=Z,Ae=I,re=O,pe=T,ot=M,Ue=0;Ue<80;Ue++){var Ce,lt,De=h[Ue];if(Ue<16)lt=De.high=x[g+Ue*2]|0,Ce=De.low=x[g+Ue*2+1]|0;else{var mt=h[Ue-15],we=mt.high,Oe=mt.low,Wt=(we>>>1|Oe<<31)^(we>>>8|Oe<<24)^we>>>7,Rn=(Oe>>>1|we<<31)^(Oe>>>8|we<<24)^(Oe>>>7|we<<25),Pa=h[Ue-2],pt=Pa.high,Qe=Pa.low,en=(pt>>>19|Qe<<13)^(pt<<3|Qe>>>29)^pt>>>6,Oa=(Qe>>>19|pt<<13)^(Qe<<3|pt>>>29)^(Qe>>>6|pt<<26),tf=h[Ue-7],c1=tf.high,u1=tf.low,rf=h[Ue-16],d1=rf.high,nf=rf.low;Ce=Rn+u1,lt=Wt+c1+(Ce>>>0<Rn>>>0?1:0),Ce=Ce+Oa,lt=lt+en+(Ce>>>0<Oa>>>0?1:0),Ce=Ce+nf,lt=lt+d1+(Ce>>>0<nf>>>0?1:0),De.high=lt,De.low=Ce}var f1=ae&ie^~ae&Ae,af=G&te^~G&re,h1=Q&fe^Q&U^fe&U,m1=ne&H^ne&V^H&V,p1=(Q>>>28|ne<<4)^(Q<<30|ne>>>2)^(Q<<25|ne>>>7),sf=(ne>>>28|Q<<4)^(ne<<30|Q>>>2)^(ne<<25|Q>>>7),x1=(ae>>>14|G<<18)^(ae>>>18|G<<14)^(ae<<23|G>>>9),g1=(G>>>14|ae<<18)^(G>>>18|ae<<14)^(G<<23|ae>>>9),of=f[Ue],v1=of.high,lf=of.low,xt=ot+g1,Pr=pe+x1+(xt>>>0<ot>>>0?1:0),xt=xt+af,Pr=Pr+f1+(xt>>>0<af>>>0?1:0),xt=xt+lf,Pr=Pr+v1+(xt>>>0<lf>>>0?1:0),xt=xt+Ce,Pr=Pr+lt+(xt>>>0<Ce>>>0?1:0),cf=sf+m1,y1=p1+h1+(cf>>>0<sf>>>0?1:0);pe=Ae,ot=re,Ae=ie,re=te,ie=ae,te=G,G=L+xt|0,ae=W+Pr+(G>>>0<L>>>0?1:0)|0,W=U,L=V,U=fe,V=H,fe=Q,H=ne,ne=xt+cf|0,Q=Pr+y1+(ne>>>0<xt>>>0?1:0)|0}N=y.low=N+ne,y.high=S+Q+(N>>>0<ne>>>0?1:0),k=b.low=k+H,b.high=D+fe+(k>>>0<H>>>0?1:0),R=v.low=R+V,v.high=P+U+(R>>>0<V>>>0?1:0),z=j.low=z+L,j.high=B+W+(z>>>0<L>>>0?1:0),q=E.low=q+G,E.high=$+ae+(q>>>0<G>>>0?1:0),Z=_.low=Z+te,_.high=K+ie+(Z>>>0<te>>>0?1:0),O=C.low=O+re,C.high=I+Ae+(O>>>0<re>>>0?1:0),M=A.low=M+ot,A.high=T+pe+(M>>>0<ot>>>0?1:0)},_doFinalize:function(){var x=this._data,g=x.words,p=this._nDataBytes*8,y=x.sigBytes*8;g[y>>>5]|=128<<24-y%32,g[(y+128>>>10<<5)+30]=Math.floor(p/4294967296),g[(y+128>>>10<<5)+31]=p,x.sigBytes=g.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var x=i.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});n.SHA512=i._createHelper(m),n.HmacSHA512=i._createHmacHelper(m)}(),r.SHA512})}(bl)),bl.exports}var wl={exports:{}},Hf;function eA(){return Hf||(Hf=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Js(),ag())})(ee,function(r){return function(){var n=r,a=n.x64,i=a.Word,o=a.WordArray,l=n.algo,d=l.SHA512,c=l.SHA384=d.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=d._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=d._createHelper(c),n.HmacSHA384=d._createHmacHelper(c)}(),r.SHA384})}(wl)),wl.exports}var jl={exports:{}},Gf;function tA(){return Gf||(Gf=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Js())})(ee,function(r){return function(n){var a=r,i=a.lib,o=i.WordArray,l=i.Hasher,d=a.x64,c=d.Word,u=a.algo,f=[],h=[],m=[];(function(){for(var p=1,y=0,b=0;b<24;b++){f[p+5*y]=(b+1)*(b+2)/2%64;var v=y%5,j=(2*p+3*y)%5;p=v,y=j}for(var p=0;p<5;p++)for(var y=0;y<5;y++)h[p+5*y]=y+(2*p+3*y)%5*5;for(var E=1,_=0;_<24;_++){for(var C=0,A=0,S=0;S<7;S++){if(E&1){var N=(1<<S)-1;N<32?A^=1<<N:C^=1<<N-32}E&128?E=E<<1^113:E<<=1}m[_]=c.create(C,A)}})();var x=[];(function(){for(var p=0;p<25;p++)x[p]=c.create()})();var g=u.SHA3=l.extend({cfg:l.cfg.extend({outputLength:512}),_doReset:function(){for(var p=this._state=[],y=0;y<25;y++)p[y]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(p,y){for(var b=this._state,v=this.blockSize/2,j=0;j<v;j++){var E=p[y+2*j],_=p[y+2*j+1];E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360;var C=b[j];C.high^=_,C.low^=E}for(var A=0;A<24;A++){for(var S=0;S<5;S++){for(var N=0,D=0,k=0;k<5;k++){var C=b[S+5*k];N^=C.high,D^=C.low}var P=x[S];P.high=N,P.low=D}for(var S=0;S<5;S++)for(var R=x[(S+4)%5],B=x[(S+1)%5],z=B.high,$=B.low,N=R.high^(z<<1|$>>>31),D=R.low^($<<1|z>>>31),k=0;k<5;k++){var C=b[S+5*k];C.high^=N,C.low^=D}for(var q=1;q<25;q++){var N,D,C=b[q],K=C.high,Z=C.low,I=f[q];I<32?(N=K<<I|Z>>>32-I,D=Z<<I|K>>>32-I):(N=Z<<I-32|K>>>64-I,D=K<<I-32|Z>>>64-I);var O=x[h[q]];O.high=N,O.low=D}var T=x[0],M=b[0];T.high=M.high,T.low=M.low;for(var S=0;S<5;S++)for(var k=0;k<5;k++){var q=S+5*k,C=b[q],Q=x[q],ne=x[(S+1)%5+5*k],fe=x[(S+2)%5+5*k];C.high=Q.high^~ne.high&fe.high,C.low=Q.low^~ne.low&fe.low}var C=b[0],H=m[A];C.high^=H.high,C.low^=H.low}},_doFinalize:function(){var p=this._data,y=p.words;this._nDataBytes*8;var b=p.sigBytes*8,v=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(n.ceil((b+1)/v)*v>>>5)-1]|=128,p.sigBytes=y.length*4,this._process();for(var j=this._state,E=this.cfg.outputLength/8,_=E/8,C=[],A=0;A<_;A++){var S=j[A],N=S.high,D=S.low;N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,C.push(D),C.push(N)}return new o.init(C,E)},clone:function(){for(var p=l.clone.call(this),y=p._state=this._state.slice(0),b=0;b<25;b++)y[b]=y[b].clone();return p}});a.SHA3=l._createHelper(g),a.HmacSHA3=l._createHmacHelper(g)}(Math),r.SHA3})}(jl)),jl.exports}var _l={exports:{}},Vf;function rA(){return Vf||(Vf=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var a=r,i=a.lib,o=i.WordArray,l=i.Hasher,d=a.algo,c=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=o.create([0,1518500249,1859775393,2400959708,2840853838]),x=o.create([1352829926,1548603684,1836072691,2053994217,0]),g=d.RIPEMD160=l.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(_,C){for(var A=0;A<16;A++){var S=C+A,N=_[S];_[S]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}var D=this._hash.words,k=m.words,P=x.words,R=c.words,B=u.words,z=f.words,$=h.words,q,K,Z,I,O,T,M,Q,ne,fe;T=q=D[0],M=K=D[1],Q=Z=D[2],ne=I=D[3],fe=O=D[4];for(var H,A=0;A<80;A+=1)H=q+_[C+R[A]]|0,A<16?H+=p(K,Z,I)+k[0]:A<32?H+=y(K,Z,I)+k[1]:A<48?H+=b(K,Z,I)+k[2]:A<64?H+=v(K,Z,I)+k[3]:H+=j(K,Z,I)+k[4],H=H|0,H=E(H,z[A]),H=H+O|0,q=O,O=I,I=E(Z,10),Z=K,K=H,H=T+_[C+B[A]]|0,A<16?H+=j(M,Q,ne)+P[0]:A<32?H+=v(M,Q,ne)+P[1]:A<48?H+=b(M,Q,ne)+P[2]:A<64?H+=y(M,Q,ne)+P[3]:H+=p(M,Q,ne)+P[4],H=H|0,H=E(H,$[A]),H=H+fe|0,T=fe,fe=ne,ne=E(Q,10),Q=M,M=H;H=D[1]+Z+ne|0,D[1]=D[2]+I+fe|0,D[2]=D[3]+O+T|0,D[3]=D[4]+q+M|0,D[4]=D[0]+K+Q|0,D[0]=H},_doFinalize:function(){var _=this._data,C=_.words,A=this._nDataBytes*8,S=_.sigBytes*8;C[S>>>5]|=128<<24-S%32,C[(S+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,_.sigBytes=(C.length+1)*4,this._process();for(var N=this._hash,D=N.words,k=0;k<5;k++){var P=D[k];D[k]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return N},clone:function(){var _=l.clone.call(this);return _._hash=this._hash.clone(),_}});function p(_,C,A){return _^C^A}function y(_,C,A){return _&C|~_&A}function b(_,C,A){return(_|~C)^A}function v(_,C,A){return _&A|C&~A}function j(_,C,A){return _^(C|~A)}function E(_,C){return _<<C|_>>>32-C}a.RIPEMD160=l._createHelper(g),a.HmacRIPEMD160=l._createHmacHelper(g)}(),r.RIPEMD160})}(_l)),_l.exports}var Al={exports:{}},Yf;function Ku(){return Yf||(Yf=1,function(e,t){(function(r,n){e.exports=n(ce())})(ee,function(r){(function(){var n=r,a=n.lib,i=a.Base,o=n.enc,l=o.Utf8,d=n.algo;d.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=l.parse(u));var f=c.blockSize,h=f*4;u.sigBytes>h&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),x=this._iKey=u.clone(),g=m.words,p=x.words,y=0;y<f;y++)g[y]^=1549556828,p[y]^=909522486;m.sigBytes=x.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,f=u.finalize(c);u.reset();var h=u.finalize(this._oKey.clone().concat(f));return h}})})()})}(Al)),Al.exports}var Nl={exports:{}},Xf;function nA(){return Xf||(Xf=1,function(e,t){(function(r,n,a){e.exports=n(ce(),zu(),Ku())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.Base,o=a.WordArray,l=n.algo,d=l.SHA256,c=l.HMAC,u=l.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:d,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,h){for(var m=this.cfg,x=c.create(m.hasher,f),g=o.create(),p=o.create([1]),y=g.words,b=p.words,v=m.keySize,j=m.iterations;y.length<v;){var E=x.update(h).finalize(p);x.reset();for(var _=E.words,C=_.length,A=E,S=1;S<j;S++){A=x.finalize(A),x.reset();for(var N=A.words,D=0;D<C;D++)_[D]^=N[D]}g.concat(E),b[0]++}return g.sigBytes=v*4,g}});n.PBKDF2=function(f,h,m){return u.create(m).compute(f,h)}}(),r.PBKDF2})}(Nl)),Nl.exports}var El={exports:{}},Jf;function Vr(){return Jf||(Jf=1,function(e,t){(function(r,n,a){e.exports=n(ce(),ng(),Ku())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.Base,o=a.WordArray,l=n.algo,d=l.MD5,c=l.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:d,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var h,m=this.cfg,x=m.hasher.create(),g=o.create(),p=g.words,y=m.keySize,b=m.iterations;p.length<y;){h&&x.update(h),h=x.update(u).finalize(f),x.reset();for(var v=1;v<b;v++)h=x.finalize(h),x.reset();g.concat(h)}return g.sigBytes=y*4,g}});n.EvpKDF=function(u,f,h){return c.create(h).compute(u,f)}}(),r.EvpKDF})}(El)),El.exports}var Cl={exports:{}},Zf;function He(){return Zf||(Zf=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Vr())})(ee,function(r){r.lib.Cipher||function(n){var a=r,i=a.lib,o=i.Base,l=i.WordArray,d=i.BufferedBlockAlgorithm,c=a.enc;c.Utf8;var u=c.Base64,f=a.algo,h=f.EvpKDF,m=i.Cipher=d.extend({cfg:o.extend(),createEncryptor:function(N,D){return this.create(this._ENC_XFORM_MODE,N,D)},createDecryptor:function(N,D){return this.create(this._DEC_XFORM_MODE,N,D)},init:function(N,D,k){this.cfg=this.cfg.extend(k),this._xformMode=N,this._key=D,this.reset()},reset:function(){d.reset.call(this),this._doReset()},process:function(N){return this._append(N),this._process()},finalize:function(N){N&&this._append(N);var D=this._doFinalize();return D},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function N(D){return typeof D=="string"?S:_}return function(D){return{encrypt:function(k,P,R){return N(P).encrypt(D,k,P,R)},decrypt:function(k,P,R){return N(P).decrypt(D,k,P,R)}}}}()});i.StreamCipher=m.extend({_doFinalize:function(){var N=this._process(!0);return N},blockSize:1});var x=a.mode={},g=i.BlockCipherMode=o.extend({createEncryptor:function(N,D){return this.Encryptor.create(N,D)},createDecryptor:function(N,D){return this.Decryptor.create(N,D)},init:function(N,D){this._cipher=N,this._iv=D}}),p=x.CBC=function(){var N=g.extend();N.Encryptor=N.extend({processBlock:function(k,P){var R=this._cipher,B=R.blockSize;D.call(this,k,P,B),R.encryptBlock(k,P),this._prevBlock=k.slice(P,P+B)}}),N.Decryptor=N.extend({processBlock:function(k,P){var R=this._cipher,B=R.blockSize,z=k.slice(P,P+B);R.decryptBlock(k,P),D.call(this,k,P,B),this._prevBlock=z}});function D(k,P,R){var B,z=this._iv;z?(B=z,this._iv=n):B=this._prevBlock;for(var $=0;$<R;$++)k[P+$]^=B[$]}return N}(),y=a.pad={},b=y.Pkcs7={pad:function(N,D){for(var k=D*4,P=k-N.sigBytes%k,R=P<<24|P<<16|P<<8|P,B=[],z=0;z<P;z+=4)B.push(R);var $=l.create(B,P);N.concat($)},unpad:function(N){var D=N.words[N.sigBytes-1>>>2]&255;N.sigBytes-=D}};i.BlockCipher=m.extend({cfg:m.cfg.extend({mode:p,padding:b}),reset:function(){var N;m.reset.call(this);var D=this.cfg,k=D.iv,P=D.mode;this._xformMode==this._ENC_XFORM_MODE?N=P.createEncryptor:(N=P.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==N?this._mode.init(this,k&&k.words):(this._mode=N.call(P,this,k&&k.words),this._mode.__creator=N)},_doProcessBlock:function(N,D){this._mode.processBlock(N,D)},_doFinalize:function(){var N,D=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(D.pad(this._data,this.blockSize),N=this._process(!0)):(N=this._process(!0),D.unpad(N)),N},blockSize:128/32});var v=i.CipherParams=o.extend({init:function(N){this.mixIn(N)},toString:function(N){return(N||this.formatter).stringify(this)}}),j=a.format={},E=j.OpenSSL={stringify:function(N){var D,k=N.ciphertext,P=N.salt;return P?D=l.create([1398893684,1701076831]).concat(P).concat(k):D=k,D.toString(u)},parse:function(N){var D,k=u.parse(N),P=k.words;return P[0]==1398893684&&P[1]==1701076831&&(D=l.create(P.slice(2,4)),P.splice(0,4),k.sigBytes-=16),v.create({ciphertext:k,salt:D})}},_=i.SerializableCipher=o.extend({cfg:o.extend({format:E}),encrypt:function(N,D,k,P){P=this.cfg.extend(P);var R=N.createEncryptor(k,P),B=R.finalize(D),z=R.cfg;return v.create({ciphertext:B,key:k,iv:z.iv,algorithm:N,mode:z.mode,padding:z.padding,blockSize:N.blockSize,formatter:P.format})},decrypt:function(N,D,k,P){P=this.cfg.extend(P),D=this._parse(D,P.format);var R=N.createDecryptor(k,P).finalize(D.ciphertext);return R},_parse:function(N,D){return typeof N=="string"?D.parse(N,this):N}}),C=a.kdf={},A=C.OpenSSL={execute:function(N,D,k,P,R){if(P||(P=l.random(64/8)),R)var B=h.create({keySize:D+k,hasher:R}).compute(N,P);else var B=h.create({keySize:D+k}).compute(N,P);var z=l.create(B.words.slice(D),k*4);return B.sigBytes=D*4,v.create({key:B,iv:z,salt:P})}},S=i.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:A}),encrypt:function(N,D,k,P){P=this.cfg.extend(P);var R=P.kdf.execute(k,N.keySize,N.ivSize,P.salt,P.hasher);P.iv=R.iv;var B=_.encrypt.call(this,N,D,R.key,P);return B.mixIn(R),B},decrypt:function(N,D,k,P){P=this.cfg.extend(P),D=this._parse(D,P.format);var R=P.kdf.execute(k,N.keySize,N.ivSize,D.salt,P.hasher);P.iv=R.iv;var B=_.decrypt.call(this,N,D,R.key,P);return B}})}()})}(Cl)),Cl.exports}var Sl={exports:{}},Qf;function aA(){return Qf||(Qf=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,o){var l=this._cipher,d=l.blockSize;a.call(this,i,o,d,l),this._prevBlock=i.slice(o,o+d)}}),n.Decryptor=n.extend({processBlock:function(i,o){var l=this._cipher,d=l.blockSize,c=i.slice(o,o+d);a.call(this,i,o,d,l),this._prevBlock=c}});function a(i,o,l,d){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,d.encryptBlock(c,0);for(var f=0;f<l;f++)i[o+f]^=c[f]}return n}(),r.mode.CFB})}(Sl)),Sl.exports}var Dl={exports:{}},eh;function iA(){return eh||(eh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),a=n.Encryptor=n.extend({processBlock:function(i,o){var l=this._cipher,d=l.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var f=u.slice(0);l.encryptBlock(f,0),u[d-1]=u[d-1]+1|0;for(var h=0;h<d;h++)i[o+h]^=f[h]}});return n.Decryptor=a,n}(),r.mode.CTR})}(Dl)),Dl.exports}var kl={exports:{}},th;function sA(){return th||(th=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function a(l){if((l>>24&255)===255){var d=l>>16&255,c=l>>8&255,u=l&255;d===255?(d=0,c===255?(c=0,u===255?u=0:++u):++c):++d,l=0,l+=d<<16,l+=c<<8,l+=u}else l+=1<<24;return l}function i(l){return(l[0]=a(l[0]))===0&&(l[1]=a(l[1])),l}var o=n.Encryptor=n.extend({processBlock:function(l,d){var c=this._cipher,u=c.blockSize,f=this._iv,h=this._counter;f&&(h=this._counter=f.slice(0),this._iv=void 0),i(h);var m=h.slice(0);c.encryptBlock(m,0);for(var x=0;x<u;x++)l[d+x]^=m[x]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})}(kl)),kl.exports}var Pl={exports:{}},rh;function oA(){return rh||(rh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),a=n.Encryptor=n.extend({processBlock:function(i,o){var l=this._cipher,d=l.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),l.encryptBlock(u,0);for(var f=0;f<d;f++)i[o+f]^=u[f]}});return n.Decryptor=a,n}(),r.mode.OFB})}(Pl)),Pl.exports}var Ol={exports:{}},nh;function lA(){return nh||(nh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(a,i){this._cipher.encryptBlock(a,i)}}),n.Decryptor=n.extend({processBlock:function(a,i){this._cipher.decryptBlock(a,i)}}),n}(),r.mode.ECB})}(Ol)),Ol.exports}var Tl={exports:{}},ah;function cA(){return ah||(ah=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return r.pad.AnsiX923={pad:function(n,a){var i=n.sigBytes,o=a*4,l=o-i%o,d=i+l-1;n.clamp(),n.words[d>>>2]|=l<<24-d%4*8,n.sigBytes+=l},unpad:function(n){var a=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=a}},r.pad.Ansix923})}(Tl)),Tl.exports}var Il={exports:{}},ih;function uA(){return ih||(ih=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return r.pad.Iso10126={pad:function(n,a){var i=a*4,o=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var a=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=a}},r.pad.Iso10126})}(Il)),Il.exports}var Bl={exports:{}},sh;function dA(){return sh||(sh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return r.pad.Iso97971={pad:function(n,a){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,a)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Bl)),Bl.exports}var Fl={exports:{}},oh;function fA(){return oh||(oh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return r.pad.ZeroPadding={pad:function(n,a){var i=a*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var a=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(a[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(Fl)),Fl.exports}var Ml={exports:{}},lh;function hA(){return lh||(lh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Ml)),Ml.exports}var $l={exports:{}},ch;function mA(){return ch||(ch=1,function(e,t){(function(r,n,a){e.exports=n(ce(),He())})(ee,function(r){return function(n){var a=r,i=a.lib,o=i.CipherParams,l=a.enc,d=l.Hex,c=a.format;c.Hex={stringify:function(u){return u.ciphertext.toString(d)},parse:function(u){var f=d.parse(u);return o.create({ciphertext:f})}}}(),r.format.Hex})}($l)),$l.exports}var Rl={exports:{}},uh;function pA(){return uh||(uh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Pn(),On(),Vr(),He())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.BlockCipher,o=n.algo,l=[],d=[],c=[],u=[],f=[],h=[],m=[],x=[],g=[],p=[];(function(){for(var v=[],j=0;j<256;j++)j<128?v[j]=j<<1:v[j]=j<<1^283;for(var E=0,_=0,j=0;j<256;j++){var C=_^_<<1^_<<2^_<<3^_<<4;C=C>>>8^C&255^99,l[E]=C,d[C]=E;var A=v[E],S=v[A],N=v[S],D=v[C]*257^C*16843008;c[E]=D<<24|D>>>8,u[E]=D<<16|D>>>16,f[E]=D<<8|D>>>24,h[E]=D;var D=N*16843009^S*65537^A*257^E*16843008;m[C]=D<<24|D>>>8,x[C]=D<<16|D>>>16,g[C]=D<<8|D>>>24,p[C]=D,E?(E=A^v[v[v[N^A]]],_^=v[v[_]]):E=_=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=i.extend({_doReset:function(){var v;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var j=this._keyPriorReset=this._key,E=j.words,_=j.sigBytes/4,C=this._nRounds=_+6,A=(C+1)*4,S=this._keySchedule=[],N=0;N<A;N++)N<_?S[N]=E[N]:(v=S[N-1],N%_?_>6&&N%_==4&&(v=l[v>>>24]<<24|l[v>>>16&255]<<16|l[v>>>8&255]<<8|l[v&255]):(v=v<<8|v>>>24,v=l[v>>>24]<<24|l[v>>>16&255]<<16|l[v>>>8&255]<<8|l[v&255],v^=y[N/_|0]<<24),S[N]=S[N-_]^v);for(var D=this._invKeySchedule=[],k=0;k<A;k++){var N=A-k;if(k%4)var v=S[N];else var v=S[N-4];k<4||N<=4?D[k]=v:D[k]=m[l[v>>>24]]^x[l[v>>>16&255]]^g[l[v>>>8&255]]^p[l[v&255]]}}},encryptBlock:function(v,j){this._doCryptBlock(v,j,this._keySchedule,c,u,f,h,l)},decryptBlock:function(v,j){var E=v[j+1];v[j+1]=v[j+3],v[j+3]=E,this._doCryptBlock(v,j,this._invKeySchedule,m,x,g,p,d);var E=v[j+1];v[j+1]=v[j+3],v[j+3]=E},_doCryptBlock:function(v,j,E,_,C,A,S,N){for(var D=this._nRounds,k=v[j]^E[0],P=v[j+1]^E[1],R=v[j+2]^E[2],B=v[j+3]^E[3],z=4,$=1;$<D;$++){var q=_[k>>>24]^C[P>>>16&255]^A[R>>>8&255]^S[B&255]^E[z++],K=_[P>>>24]^C[R>>>16&255]^A[B>>>8&255]^S[k&255]^E[z++],Z=_[R>>>24]^C[B>>>16&255]^A[k>>>8&255]^S[P&255]^E[z++],I=_[B>>>24]^C[k>>>16&255]^A[P>>>8&255]^S[R&255]^E[z++];k=q,P=K,R=Z,B=I}var q=(N[k>>>24]<<24|N[P>>>16&255]<<16|N[R>>>8&255]<<8|N[B&255])^E[z++],K=(N[P>>>24]<<24|N[R>>>16&255]<<16|N[B>>>8&255]<<8|N[k&255])^E[z++],Z=(N[R>>>24]<<24|N[B>>>16&255]<<16|N[k>>>8&255]<<8|N[P&255])^E[z++],I=(N[B>>>24]<<24|N[k>>>16&255]<<16|N[P>>>8&255]<<8|N[R&255])^E[z++];v[j]=q,v[j+1]=K,v[j+2]=Z,v[j+3]=I},keySize:256/32});n.AES=i._createHelper(b)}(),r.AES})}(Rl)),Rl.exports}var Ll={exports:{}},dh;function xA(){return dh||(dh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Pn(),On(),Vr(),He())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.WordArray,o=a.BlockCipher,l=n.algo,d=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=l.DES=o.extend({_doReset:function(){for(var y=this._key,b=y.words,v=[],j=0;j<56;j++){var E=d[j]-1;v[j]=b[E>>>5]>>>31-E%32&1}for(var _=this._subKeys=[],C=0;C<16;C++){for(var A=_[C]=[],S=u[C],j=0;j<24;j++)A[j/6|0]|=v[(c[j]-1+S)%28]<<31-j%6,A[4+(j/6|0)]|=v[28+(c[j+24]-1+S)%28]<<31-j%6;A[0]=A[0]<<1|A[0]>>>31;for(var j=1;j<7;j++)A[j]=A[j]>>>(j-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var N=this._invSubKeys=[],j=0;j<16;j++)N[j]=_[15-j]},encryptBlock:function(y,b){this._doCryptBlock(y,b,this._subKeys)},decryptBlock:function(y,b){this._doCryptBlock(y,b,this._invSubKeys)},_doCryptBlock:function(y,b,v){this._lBlock=y[b],this._rBlock=y[b+1],x.call(this,4,252645135),x.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),x.call(this,1,1431655765);for(var j=0;j<16;j++){for(var E=v[j],_=this._lBlock,C=this._rBlock,A=0,S=0;S<8;S++)A|=f[S][((C^E[S])&h[S])>>>0];this._lBlock=C,this._rBlock=_^A}var N=this._lBlock;this._lBlock=this._rBlock,this._rBlock=N,x.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),y[b]=this._lBlock,y[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(y,b){var v=(this._lBlock>>>y^this._rBlock)&b;this._rBlock^=v,this._lBlock^=v<<y}function g(y,b){var v=(this._rBlock>>>y^this._lBlock)&b;this._lBlock^=v,this._rBlock^=v<<y}n.DES=o._createHelper(m);var p=l.TripleDES=o.extend({_doReset:function(){var y=this._key,b=y.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var v=b.slice(0,2),j=b.length<4?b.slice(0,2):b.slice(2,4),E=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=m.createEncryptor(i.create(v)),this._des2=m.createEncryptor(i.create(j)),this._des3=m.createEncryptor(i.create(E))},encryptBlock:function(y,b){this._des1.encryptBlock(y,b),this._des2.decryptBlock(y,b),this._des3.encryptBlock(y,b)},decryptBlock:function(y,b){this._des3.decryptBlock(y,b),this._des2.encryptBlock(y,b),this._des1.decryptBlock(y,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(p)}(),r.TripleDES})}(Ll)),Ll.exports}var Ul={exports:{}},fh;function gA(){return fh||(fh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Pn(),On(),Vr(),He())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.StreamCipher,o=n.algo,l=o.RC4=i.extend({_doReset:function(){for(var u=this._key,f=u.words,h=u.sigBytes,m=this._S=[],x=0;x<256;x++)m[x]=x;for(var x=0,g=0;x<256;x++){var p=x%h,y=f[p>>>2]>>>24-p%4*8&255;g=(g+m[x]+y)%256;var b=m[x];m[x]=m[g],m[g]=b}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=d.call(this)},keySize:256/32,ivSize:0});function d(){for(var u=this._S,f=this._i,h=this._j,m=0,x=0;x<4;x++){f=(f+1)%256,h=(h+u[f])%256;var g=u[f];u[f]=u[h],u[h]=g,m|=u[(u[f]+u[h])%256]<<24-x*8}return this._i=f,this._j=h,m}n.RC4=i._createHelper(l);var c=o.RC4Drop=l.extend({cfg:l.cfg.extend({drop:192}),_doReset:function(){l._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)d.call(this)}});n.RC4Drop=i._createHelper(c)}(),r.RC4})}(Ul)),Ul.exports}var zl={exports:{}},hh;function vA(){return hh||(hh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Pn(),On(),Vr(),He())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.StreamCipher,o=n.algo,l=[],d=[],c=[],u=o.Rabbit=i.extend({_doReset:function(){for(var h=this._key.words,m=this.cfg.iv,x=0;x<4;x++)h[x]=(h[x]<<8|h[x]>>>24)&16711935|(h[x]<<24|h[x]>>>8)&4278255360;var g=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],p=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var x=0;x<4;x++)f.call(this);for(var x=0;x<8;x++)p[x]^=g[x+4&7];if(m){var y=m.words,b=y[0],v=y[1],j=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=j>>>16|E&4294901760,C=E<<16|j&65535;p[0]^=j,p[1]^=_,p[2]^=E,p[3]^=C,p[4]^=j,p[5]^=_,p[6]^=E,p[7]^=C;for(var x=0;x<4;x++)f.call(this)}},_doProcessBlock:function(h,m){var x=this._X;f.call(this),l[0]=x[0]^x[5]>>>16^x[3]<<16,l[1]=x[2]^x[7]>>>16^x[5]<<16,l[2]=x[4]^x[1]>>>16^x[7]<<16,l[3]=x[6]^x[3]>>>16^x[1]<<16;for(var g=0;g<4;g++)l[g]=(l[g]<<8|l[g]>>>24)&16711935|(l[g]<<24|l[g]>>>8)&4278255360,h[m+g]^=l[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,m=this._C,x=0;x<8;x++)d[x]=m[x];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<d[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<d[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<d[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<d[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<d[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<d[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<d[6]>>>0?1:0)|0,this._b=m[7]>>>0<d[7]>>>0?1:0;for(var x=0;x<8;x++){var g=h[x]+m[x],p=g&65535,y=g>>>16,b=((p*p>>>17)+p*y>>>15)+y*y,v=((g&4294901760)*g|0)+((g&65535)*g|0);c[x]=b^v}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),r.Rabbit})}(zl)),zl.exports}var Kl={exports:{}},mh;function yA(){return mh||(mh=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Pn(),On(),Vr(),He())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.StreamCipher,o=n.algo,l=[],d=[],c=[],u=o.RabbitLegacy=i.extend({_doReset:function(){var h=this._key.words,m=this.cfg.iv,x=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],g=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=x[p+4&7];if(m){var y=m.words,b=y[0],v=y[1],j=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=j>>>16|E&4294901760,C=E<<16|j&65535;g[0]^=j,g[1]^=_,g[2]^=E,g[3]^=C,g[4]^=j,g[5]^=_,g[6]^=E,g[7]^=C;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(h,m){var x=this._X;f.call(this),l[0]=x[0]^x[5]>>>16^x[3]<<16,l[1]=x[2]^x[7]>>>16^x[5]<<16,l[2]=x[4]^x[1]>>>16^x[7]<<16,l[3]=x[6]^x[3]>>>16^x[1]<<16;for(var g=0;g<4;g++)l[g]=(l[g]<<8|l[g]>>>24)&16711935|(l[g]<<24|l[g]>>>8)&4278255360,h[m+g]^=l[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,m=this._C,x=0;x<8;x++)d[x]=m[x];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<d[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<d[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<d[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<d[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<d[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<d[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<d[6]>>>0?1:0)|0,this._b=m[7]>>>0<d[7]>>>0?1:0;for(var x=0;x<8;x++){var g=h[x]+m[x],p=g&65535,y=g>>>16,b=((p*p>>>17)+p*y>>>15)+y*y,v=((g&4294901760)*g|0)+((g&65535)*g|0);c[x]=b^v}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),r.RabbitLegacy})}(Kl)),Kl.exports}var ql={exports:{}},ph;function bA(){return ph||(ph=1,function(e,t){(function(r,n,a){e.exports=n(ce(),Pn(),On(),Vr(),He())})(ee,function(r){return function(){var n=r,a=n.lib,i=a.BlockCipher,o=n.algo;const l=16,d=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function f(p,y){let b=y>>24&255,v=y>>16&255,j=y>>8&255,E=y&255,_=p.sbox[0][b]+p.sbox[1][v];return _=_^p.sbox[2][j],_=_+p.sbox[3][E],_}function h(p,y,b){let v=y,j=b,E;for(let _=0;_<l;++_)v=v^p.pbox[_],j=f(p,v)^j,E=v,v=j,j=E;return E=v,v=j,j=E,j=j^p.pbox[l],v=v^p.pbox[l+1],{left:v,right:j}}function m(p,y,b){let v=y,j=b,E;for(let _=l+1;_>1;--_)v=v^p.pbox[_],j=f(p,v)^j,E=v,v=j,j=E;return E=v,v=j,j=E,j=j^p.pbox[1],v=v^p.pbox[0],{left:v,right:j}}function x(p,y,b){for(let C=0;C<4;C++){p.sbox[C]=[];for(let A=0;A<256;A++)p.sbox[C][A]=c[C][A]}let v=0;for(let C=0;C<l+2;C++)p.pbox[C]=d[C]^y[v],v++,v>=b&&(v=0);let j=0,E=0,_=0;for(let C=0;C<l+2;C+=2)_=h(p,j,E),j=_.left,E=_.right,p.pbox[C]=j,p.pbox[C+1]=E;for(let C=0;C<4;C++)for(let A=0;A<256;A+=2)_=h(p,j,E),j=_.left,E=_.right,p.sbox[C][A]=j,p.sbox[C][A+1]=E;return!0}var g=o.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var p=this._keyPriorReset=this._key,y=p.words,b=p.sigBytes/4;x(u,y,b)}},encryptBlock:function(p,y){var b=h(u,p[y],p[y+1]);p[y]=b.left,p[y+1]=b.right},decryptBlock:function(p,y){var b=m(u,p[y],p[y+1]);p[y]=b.left,p[y+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(g)}(),r.Blowfish})}(ql)),ql.exports}(function(e,t){(function(r,n,a){e.exports=n(ce(),Js(),X_(),J_(),Pn(),Z_(),On(),ng(),zu(),Q_(),ag(),eA(),tA(),rA(),Ku(),nA(),Vr(),He(),aA(),iA(),sA(),oA(),lA(),cA(),uA(),dA(),fA(),hA(),mA(),pA(),xA(),gA(),vA(),yA(),bA())})(ee,function(r){return r})})(rg);var wA=rg.exports;const Ic=tr(wA);function xh(){return Math.random().toString(36).substr(2,9)}function qe(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function We(e){return new Intl.NumberFormat("en-US").format(e)}function aa(e){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1}).format(e)}function jA(e,t){return Ic.AES.encrypt(e,t).toString()}function _A(e,t){return Ic.AES.decrypt(e,t).toString(Ic.enc.Utf8)}class qu{static async parseFile(t){try{const r=this.getFileType(t);let n=[];switch(r){case"csv":n=await this.parseCSV(t);break;default:throw new Error(`Unsupported file type: ${r}. Please use CSV format.`)}const a=this.processRawData(n);return{success:!0,data:this.groupByDonor(a),recordsProcessed:n.length}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred",recordsProcessed:0}}}static getFileType(t){var n;if(((n=t.name.split(".").pop())==null?void 0:n.toLowerCase())==="csv")return"csv";throw new Error("Unsupported file format. Please use CSV files.")}static parseCSV(t){return new Promise((r,n)=>{q_.parse(t,{header:!0,skipEmptyLines:!0,dynamicTyping:!1,complete:a=>{const i=a.errors.filter(o=>o.type==="Delimiter"||o.type==="Quotes");if(i.length>0)n(new Error(`CSV parsing error: ${i[0].message}`));else if(a.data.length===0)n(new Error("No data found in the CSV file"));else{const o=a.data.filter(l=>Object.values(l).some(d=>d!=null&&String(d).trim()!==""));r(o)}},error:a=>n(a)})})}static processRawData(t){return t.map(r=>{const n=this.mapFields(r);if(!n.firstName&&!n.lastName||!n.amount||n.amount===0)return null;let a=n.firstName||"",i=n.lastName||"";if(!a&&!i&&n.name){const l=String(n.name).trim().split(" ");a=l[0]||"",i=l.slice(1).join(" ")||""}return!a&&!i?null:{id:xh(),firstName:String(a).trim(),lastName:String(i).trim(),amount:this.parseAmount(n.amount),date:this.parseDate(n.date,n.month),month:this.extractMonth(n.date,n.month),year:this.extractYear(n.date),email:n.email?String(n.email).trim():void 0,phone:n.phone?String(n.phone).trim():void 0,donorId:""}}).filter(r=>r!==null&&!!(r.firstName||r.lastName)&&r.amount>0&&!!r.date)}static mapFields(t){const r={},n={};return Object.keys(t).forEach(a=>{const i=a.toLowerCase().replace(/\s+/g,"_").replace(/[^\w]/g,"");n[i]=t[a]}),Object.entries(this.COMMON_FIELD_MAPPINGS).forEach(([a,i])=>{for(const o of i){const l=o.replace(/[^\w]/g,"");if(n[l]!==void 0||n[o]!==void 0){r[a]=n[l]||n[o];break}}if(r[a]===void 0)for(const[o,l]of Object.entries(n)){for(const d of i)if(o.includes(d.replace(/[^\w]/g,""))||d.replace(/[^\w]/g,"").includes(o)){r[a]=l;break}if(r[a]!==void 0)break}}),(!r.firstName||!r.lastName)&&Object.entries(n).forEach(([a,i])=>{typeof i=="string"&&i.trim()&&(!r.firstName&&(a.includes("name")||a.includes("first"))?r.firstName=i:!r.lastName&&(a.includes("last")||a.includes("surname"))&&(r.lastName=i))}),r.amount||Object.entries(n).forEach(([a,i])=>{(typeof i=="number"||typeof i=="string"&&/[\d.,$]/.test(i))&&(a.includes("amount")||a.includes("donation")||a.includes("gift")||a.includes("total"))&&(r.amount=i)}),!r.firstName&&!r.lastName&&Object.entries(n).forEach(([a,i])=>{typeof i=="string"&&i.trim()&&a.includes("name")&&!a.includes("fund")&&!a.includes("batch")&&(r.name=i)}),r}static parseAmount(t){if(typeof t=="number")return t;if(typeof t=="string"){const r=t.replace(/[^0-9.-]/g,"").trim(),n=parseFloat(r);return isNaN(n)?0:n}return 0}static parseDate(t,r){if(t){const n=W_(String(t));if(n)return n}if(r){const n=this.parseMonth(r);if(n){const a=new Date().getFullYear();return new Date(a,n-1,1)}}return new Date}static parseMonth(t){if(typeof t=="number")return t;if(typeof t=="string"){const r=["january","february","march","april","may","june","july","august","september","october","november","december"],n=t.toLowerCase(),a=r.findIndex(i=>i.startsWith(n));return a!==-1?a+1:null}return null}static extractMonth(t,r){const n=this.parseDate(t,r);return un(n,"MMMM yyyy")}static extractYear(t){return this.parseDate(t).getFullYear()}static groupByDonor(t){const r=new Map;return t.forEach(n=>{const a=`${n.firstName.toLowerCase()}_${n.lastName.toLowerCase()}`;if(!r.has(a)){const o=xh();r.set(a,{id:o,firstName:n.firstName,lastName:n.lastName,email:n.email,phone:n.phone,donations:[],totalAmount:0,donationCount:0,averageDonation:0,firstDonation:n.date,lastDonation:n.date,donationFrequency:"one-time"})}const i=r.get(a);n.donorId=i.id,i.donations.push(n),i.totalAmount+=n.amount,i.donationCount++,n.date<i.firstDonation&&(i.firstDonation=n.date),n.date>i.lastDonation&&(i.lastDonation=n.date)}),r.forEach(n=>{n.averageDonation=n.totalAmount/n.donationCount,n.donationFrequency=this.calculateDonationFrequency(n.donationCount)}),Array.from(r.values())}static calculateDonationFrequency(t){return t===1?"one-time":t<=3?"occasional":t<=6?"regular":"frequent"}}nr(qu,"COMMON_FIELD_MAPPINGS",{firstName:["first_name","firstname","fname","first","given_name","givenname","name"],lastName:["last_name","lastname","lname","last","surname","family_name","familyname"],amount:["amount","donation","gift","contribution","value","total","sum","dollars","money"],date:["date","donation_date","gift_date","received_date","received_on","receivedon","createdon","created_on","timestamp","when","time"],month:["month","donation_month","gift_month","period"],email:["email","email_address","e_mail","mail","emailaddress"],phone:["phone","phone_number","telephone","mobile","phonenumber","tel","mobilenumber","mobile_number"]});const AA=({onDataLoaded:e,isLoading:t})=>{const[r,n]=w.useState(!1),[a,i]=w.useState(null),o=w.useCallback(u=>{u.preventDefault(),u.stopPropagation(),u.type==="dragenter"||u.type==="dragover"?n(!0):u.type==="dragleave"&&n(!1)},[]),l=w.useCallback(u=>{u.preventDefault(),u.stopPropagation(),n(!1),u.dataTransfer.files&&u.dataTransfer.files[0]&&c(u.dataTransfer.files[0])},[]),d=w.useCallback(u=>{u.target.files&&u.target.files[0]&&c(u.target.files[0])},[]),c=async u=>{i(null);try{const f=await qu.parseFile(u);i(f),f.success&&f.data&&e(f.data)}catch(f){i({success:!1,error:f instanceof Error?f.message:"Unknown error occurred",recordsProcessed:0})}};return s.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[s.jsx("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-all duration-200 ${r?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"} ${t?"opacity-50 pointer-events-none":""}`,onDragEnter:o,onDragLeave:o,onDragOver:o,onDrop:l,children:s.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[s.jsx(ra,{className:"w-12 h-12 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-medium text-gray-700",children:a!=null&&a.success?"Upload another file":"Upload your donor data file"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a!=null&&a.success?"New data will be merged with existing records":"Drag & drop or click to select • CSV format supported"})]}),s.jsx("input",{type:"file",accept:".csv",onChange:d,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:t})]})}),a&&s.jsx("div",{className:`mt-4 p-4 rounded-lg border ${a.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[a.success?s.jsx(xr,{className:"w-5 h-5 text-green-600"}):s.jsx(ts,{className:"w-5 h-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:`font-medium ${a.success?"text-green-800":"text-red-800"}`,children:a.success?"Data merged successfully!":"Upload failed"}),a.success&&s.jsxs("p",{className:"text-sm text-green-600",children:["Added ",a.recordsProcessed," new records to your database"]}),a.error&&s.jsx("p",{className:"text-sm text-red-600",children:a.error})]})]})}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx($e,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-800",children:"Supported Data Format"}),s.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Your CSV file should contain columns for donor information. Common formats supported:"}),s.jsxs("ul",{className:"text-sm text-blue-600 mt-2 ml-4 list-disc",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Names:"})," First Name, Last Name (or Name, Surname, etc.)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Amount:"})," Amount, Donation, Gift, Total, etc. (supports currency formatting)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Date:"})," Received On, Created On, Date, etc."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Contact:"})," Email, Phone (optional)"]})]}),s.jsx("p",{className:"text-sm text-blue-600 mt-2",children:'The system automatically detects and maps column headers from donation platform exports. Supports currency formatting like "$700.00" and handles empty rows automatically.'})]})]})}),s.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"font-medium text-gray-800 mb-2",children:"Sample CSV Format:"}),s.jsxs("div",{className:"bg-white p-3 rounded border text-sm font-mono",children:[s.jsx("div",{className:"text-gray-600",children:"Transaction ID,First Name,Last Name,Amount,Received On"}),s.jsx("div",{className:"text-gray-800",children:'12345,John,Smith," $100.00 ",8/31/2024'}),s.jsx("div",{className:"text-gray-800",children:'12346,Jane,Doe," $250.50 ",9/1/2024'})]})]})]})},Ri=({title:e,value:t,icon:r,color:n,trend:a})=>{const i={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",purple:"bg-purple-50 text-purple-600",orange:"bg-orange-50 text-orange-600"};return s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t}),a&&s.jsx("div",{className:"flex items-center mt-2",children:s.jsxs("span",{className:`text-sm font-medium ${a.direction==="up"?"text-green-600":"text-red-600"}`,children:[a.direction==="up"?"↑":"↓"," ",Math.abs(a.value),"%"]})})]}),s.jsx("div",{className:`p-3 rounded-full ${i[n]}`,children:r})]})})};function ig(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=ig(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ue(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=ig(e))&&(n&&(n+=" "),n+=t);return n}var Zs={},sg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(sg);var Wu={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Wu);var Hu={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Hu);var Qs={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let i=0,o="",l="",d=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<a;){const c=r[i];l?c==="\\"&&i+1<a?(i++,o+=r[i]):c===l?l="":o+=c:d?c==='"'||c==="'"?l=c:c==="]"?(d=!1,n.push(o),o=""):o+=c:c==="["?(d=!0,o&&(n.push(o),o="")):c==="."?o&&(n.push(o),o=""):o+=c,i++}return o&&n.push(o),n}e.toPath=t})(Qs);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sg,r=Wu,n=Hu,a=Qs;function i(l,d,c){if(l==null)return c;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return c;const u=l[d];return u===void 0?r.isDeepKey(d)?i(l,a.toPath(d),c):c:u}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const u=l[d];return u===void 0?c:u}default:{if(Array.isArray(d))return o(l,d,c);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return c;const u=l[d];return u===void 0?c:u}}}function o(l,d,c){if(d.length===0)return c;let u=l;for(let f=0;f<d.length;f++){if(u==null||t.isUnsafeProperty(d[f]))return c;u=u[d[f]]}return u===void 0?c:u}e.get=i})(Zs);var NA=Zs.get;const Wr=tr(NA);var og={exports:{}},me={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gu=Symbol.for("react.element"),Vu=Symbol.for("react.portal"),eo=Symbol.for("react.fragment"),to=Symbol.for("react.strict_mode"),ro=Symbol.for("react.profiler"),no=Symbol.for("react.provider"),ao=Symbol.for("react.context"),EA=Symbol.for("react.server_context"),io=Symbol.for("react.forward_ref"),so=Symbol.for("react.suspense"),oo=Symbol.for("react.suspense_list"),lo=Symbol.for("react.memo"),co=Symbol.for("react.lazy"),CA=Symbol.for("react.offscreen"),lg;lg=Symbol.for("react.module.reference");function Ut(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Gu:switch(e=e.type,e){case eo:case ro:case to:case so:case oo:return e;default:switch(e=e&&e.$$typeof,e){case EA:case ao:case io:case co:case lo:case no:return e;default:return t}}case Vu:return t}}}me.ContextConsumer=ao;me.ContextProvider=no;me.Element=Gu;me.ForwardRef=io;me.Fragment=eo;me.Lazy=co;me.Memo=lo;me.Portal=Vu;me.Profiler=ro;me.StrictMode=to;me.Suspense=so;me.SuspenseList=oo;me.isAsyncMode=function(){return!1};me.isConcurrentMode=function(){return!1};me.isContextConsumer=function(e){return Ut(e)===ao};me.isContextProvider=function(e){return Ut(e)===no};me.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gu};me.isForwardRef=function(e){return Ut(e)===io};me.isFragment=function(e){return Ut(e)===eo};me.isLazy=function(e){return Ut(e)===co};me.isMemo=function(e){return Ut(e)===lo};me.isPortal=function(e){return Ut(e)===Vu};me.isProfiler=function(e){return Ut(e)===ro};me.isStrictMode=function(e){return Ut(e)===to};me.isSuspense=function(e){return Ut(e)===so};me.isSuspenseList=function(e){return Ut(e)===oo};me.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===eo||e===ro||e===to||e===so||e===oo||e===CA||typeof e=="object"&&e!==null&&(e.$$typeof===co||e.$$typeof===lo||e.$$typeof===no||e.$$typeof===ao||e.$$typeof===io||e.$$typeof===lg||e.getModuleId!==void 0)};me.typeOf=Ut;og.exports=me;var SA=og.exports,at=e=>e===0?0:e>0?1:-1,Ft=e=>typeof e=="number"&&e!=+e,dn=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,X=e=>(typeof e=="number"||e instanceof Number)&&!Ft(e),lr=e=>X(e)||typeof e=="string",DA=0,An=e=>{var t=++DA;return"".concat(e||"").concat(t)},Bt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!X(t)&&typeof t!="string")return n;var i;if(dn(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Ft(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},cg=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},Yt=(e,t)=>X(e)&&X(t)?r=>e+r*(t-e):()=>t;function ug(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Wr(n,t))===r)}var kA=e=>{if(!e||!e.length)return null;for(var t=e.length,r=0,n=0,a=0,i=0,o=1/0,l=-1/0,d=0,c=0,u=0;u<t;u++)d=e[u].cx||0,c=e[u].cy||0,r+=d,n+=c,a+=d*c,i+=d*d,o=Math.min(o,d),l=Math.max(l,d);var f=t*i!==r*r?(t*a-r*n)/(t*i-r*r):0;return{xmin:o,xmax:l,a:f,b:(n-f*r)/t}},xe=e=>e===null||typeof e>"u",bi=e=>xe(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),PA=["viewBox","children"],OA=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],gh=["points","pathLength"],Wl={svg:PA,polygon:gh,polyline:gh},Yu=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Xu=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{Yu.includes(a)&&(n[a]=i=>r[a](r,i))}),n},TA=(e,t,r)=>n=>(e(t,r,n),null),uo=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];Yu.includes(a)&&typeof i=="function"&&(n||(n={}),n[a]=TA(i,t,r))}),n},vh=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",yh=null,Hl=null,dg=e=>{if(e===yh&&Array.isArray(Hl))return Hl;var t=[];return w.Children.forEach(e,r=>{xe(r)||(SA.isFragment(r)?t=t.concat(dg(r.props.children)):t.push(r))}),Hl=t,yh=e,t};function wi(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>vh(a)):n=[vh(t)],dg(e).forEach(a=>{var i=Wr(a,"type.displayName")||Wr(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}var fg=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,IA=(e,t,r,n)=>{var a,i=(a=n&&(Wl==null?void 0:Wl[n]))!==null&&a!==void 0?a:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||OA.includes(t))||r&&Yu.includes(t)},le=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(w.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(i=>{var o;IA((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(a[i]=n[i])}),a},BA=["children","width","height","viewBox","className","style","title","desc"];function Bc(){return Bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bc.apply(null,arguments)}function FA(e,t){if(e==null)return{};var r,n,a=MA(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MA(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ju=w.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:l,title:d,desc:c}=e,u=FA(e,BA),f=i||{width:n,height:a,x:0,y:0},h=ue("recharts-surface",o);return w.createElement("svg",Bc({},le(u,!0,"svg"),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),w.createElement("title",null,d),w.createElement("desc",null,c),r)}),$A=["children","className"];function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fc.apply(null,arguments)}function RA(e,t){if(e==null)return{};var r,n,a=LA(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function LA(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Re=w.forwardRef((e,t)=>{var{children:r,className:n}=e,a=RA(e,$A),i=ue("recharts-layer",n);return w.createElement("g",Fc({className:i},le(a,!0),{ref:t}),r)}),hg=w.createContext(null),UA=()=>w.useContext(hg);function ye(e){return function(){return e}}const mg=Math.cos,is=Math.sin,rr=Math.sqrt,ss=Math.PI,fo=2*ss,Mc=Math.PI,$c=2*Mc,an=1e-6,zA=$c-an;function pg(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function KA(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return pg;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class qA{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?pg:KA(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=n-t,c=a-r,u=o-t,f=l-r,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>an)if(!(Math.abs(f*d-c*u)>an)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,x=a-l,g=d*d+c*c,p=m*m+x*x,y=Math.sqrt(g),b=Math.sqrt(h),v=i*Math.tan((Mc-Math.acos((g+h-p)/(2*y*b)))/2),j=v/b,E=v/y;Math.abs(j-1)>an&&this._append`L${t+j*u},${r+j*f}`,this._append`A${i},${i},0,0,${+(f*m>u*x)},${this._x1=t+E*d},${this._y1=r+E*c}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),d=n*Math.sin(a),c=t+l,u=r+d,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>an||Math.abs(this._y1-u)>an)&&this._append`L${c},${u}`,n&&(h<0&&(h=h%$c+$c),h>zA?this._append`A${n},${n},0,1,${f},${t-l},${r-d}A${n},${n},0,1,${f},${this._x1=c},${this._y1=u}`:h>an&&this._append`A${n},${n},0,${+(h>=Mc)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Zu(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new qA(t)}function Qu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xg(e){this._context=e}xg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ho(e){return new xg(e)}function gg(e){return e[0]}function vg(e){return e[1]}function yg(e,t){var r=ye(!0),n=null,a=ho,i=null,o=Zu(l);e=typeof e=="function"?e:e===void 0?gg:ye(e),t=typeof t=="function"?t:t===void 0?vg:ye(t);function l(d){var c,u=(d=Qu(d)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),c=0;c<=u;++c)!(c<u&&r(f=d[c],c,d))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,c,d),+t(f,c,d));if(m)return i=null,m+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:ye(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:ye(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:ye(!!d),l):r},l.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),l):a},l.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),l):n},l}function Li(e,t,r){var n=null,a=ye(!0),i=null,o=ho,l=null,d=Zu(c);e=typeof e=="function"?e:e===void 0?gg:ye(+e),t=typeof t=="function"?t:ye(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?vg:ye(+r);function c(f){var h,m,x,g=(f=Qu(f)).length,p,y=!1,b,v=new Array(g),j=new Array(g);for(i==null&&(l=o(b=d())),h=0;h<=g;++h){if(!(h<g&&a(p=f[h],h,f))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=h-1;x>=m;--x)l.point(v[x],j[x]);l.lineEnd(),l.areaEnd()}y&&(v[h]=+e(p,h,f),j[h]=+t(p,h,f),l.point(n?+n(p,h,f):v[h],r?+r(p,h,f):j[h]))}if(b)return l=null,b+""||null}function u(){return yg().defined(a).curve(o).context(i)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:ye(+f),n=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ye(+f),c):e},c.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ye(+f),c):n},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:ye(+f),r=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ye(+f),c):t},c.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ye(+f),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(f){return arguments.length?(a=typeof f=="function"?f:ye(!!f),c):a},c.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),c):o},c.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),c):i},c}class bg{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function WA(e){return new bg(e,!0)}function HA(e){return new bg(e,!1)}const ed={draw(e,t){const r=rr(t/ss);e.moveTo(r,0),e.arc(0,0,r,0,fo)}},GA={draw(e,t){const r=rr(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},wg=rr(1/3),VA=wg*2,YA={draw(e,t){const r=rr(t/VA),n=r*wg;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},XA={draw(e,t){const r=rr(t),n=-r/2;e.rect(n,n,r,r)}},JA=.8908130915292852,jg=is(ss/10)/is(7*ss/10),ZA=is(fo/10)*jg,QA=-mg(fo/10)*jg,eN={draw(e,t){const r=rr(t*JA),n=ZA*r,a=QA*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=fo*i/5,l=mg(o),d=is(o);e.lineTo(d*r,-l*r),e.lineTo(l*n-d*a,d*n+l*a)}e.closePath()}},Gl=rr(3),tN={draw(e,t){const r=-rr(t/(Gl*3));e.moveTo(0,r*2),e.lineTo(-Gl*r,-r),e.lineTo(Gl*r,-r),e.closePath()}},St=-.5,Dt=rr(3)/2,Rc=1/rr(12),rN=(Rc/2+1)*3,nN={draw(e,t){const r=rr(t/rN),n=r/2,a=r*Rc,i=n,o=r*Rc+r,l=-i,d=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,d),e.lineTo(St*n-Dt*a,Dt*n+St*a),e.lineTo(St*i-Dt*o,Dt*i+St*o),e.lineTo(St*l-Dt*d,Dt*l+St*d),e.lineTo(St*n+Dt*a,St*a-Dt*n),e.lineTo(St*i+Dt*o,St*o-Dt*i),e.lineTo(St*l+Dt*d,St*d-Dt*l),e.closePath()}};function aN(e,t){let r=null,n=Zu(a);e=typeof e=="function"?e:ye(e||ed),t=typeof t=="function"?t:ye(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:ye(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:ye(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function os(){}function ls(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function _g(e){this._context=e}_g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ls(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ls(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iN(e){return new _g(e)}function Ag(e){this._context=e}Ag.prototype={areaStart:os,areaEnd:os,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ls(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sN(e){return new Ag(e)}function Ng(e){this._context=e}Ng.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ls(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oN(e){return new Ng(e)}function Eg(e){this._context=e}Eg.prototype={areaStart:os,areaEnd:os,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function lN(e){return new Eg(e)}function bh(e){return e<0?-1:1}function wh(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(bh(i)+bh(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function jh(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Vl(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function cs(e){this._context=e}cs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Vl(this,this._t0,jh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Vl(this,jh(this,r=wh(this,e,t)),r);break;default:Vl(this,this._t0,r=wh(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Cg(e){this._context=new Sg(e)}(Cg.prototype=Object.create(cs.prototype)).point=function(e,t){cs.prototype.point.call(this,t,e)};function Sg(e){this._context=e}Sg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function cN(e){return new cs(e)}function uN(e){return new Cg(e)}function Dg(e){this._context=e}Dg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=_h(e),a=_h(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _h(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function dN(e){return new Dg(e)}function mo(e,t){this._context=e,this._t=t}mo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function fN(e){return new mo(e,.5)}function hN(e){return new mo(e,0)}function mN(e){return new mo(e,1)}function ia(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Lc(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function pN(e,t){return e[t]}function xN(e){const t=[];return t.key=e,t}function gN(){var e=ye([]),t=Lc,r=ia,n=pN;function a(i){var o=Array.from(e.apply(this,arguments),xN),l,d=o.length,c=-1,u;for(const f of i)for(l=0,++c;l<d;++l)(o[l][c]=[0,+n(f,o[l].key,c,i)]).data=f;for(l=0,u=Qu(t(o));l<d;++l)o[u[l]].index=l;return r(o,u),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ye(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:ye(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Lc:typeof i=="function"?i:ye(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??ia,a):r},a}function vN(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}ia(e,t)}}function yN(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}ia(e,t)}}function bN(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,d=0,c=0;l<o;++l){for(var u=e[t[l]],f=u[n][1]||0,h=u[n-1][1]||0,m=(f-h)/2,x=0;x<l;++x){var g=e[t[x]],p=g[n][1]||0,y=g[n-1][1]||0;m+=p-y}d+=f,c+=m*f}a[n-1][1]+=a[n-1][0]=r,d&&(r-=c/d)}a[n-1][1]+=a[n-1][0]=r,ia(e,t)}}var wN=["type","size","sizeType"];function Uc(){return Uc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uc.apply(null,arguments)}function Ah(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ah(Object(r),!0).forEach(function(n){jN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ah(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jN(e,t,r){return(t=_N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _N(e){var t=AN(e,"string");return typeof t=="symbol"?t:t+""}function AN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NN(e,t){if(e==null)return{};var r,n,a=EN(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function EN(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kg={symbolCircle:ed,symbolCross:GA,symbolDiamond:YA,symbolSquare:XA,symbolStar:eN,symbolTriangle:tN,symbolWye:nN},CN=Math.PI/180,SN=e=>{var t="symbol".concat(bi(e));return kg[t]||ed},DN=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*CN;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},kN=(e,t)=>{kg["symbol".concat(bi(e))]=t},po=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=NN(e,wN),i=Nh(Nh({},a),{},{type:t,size:r,sizeType:n}),o=()=>{var f=SN(t),h=aN().type(f).size(DN(r,n,t));return h()},{className:l,cx:d,cy:c}=i,u=le(i,!0);return d===+d&&c===+c&&r===+r?w.createElement("path",Uc({},u,{className:ue("recharts-symbols",l),transform:"translate(".concat(d,", ").concat(c,")"),d:o()})):null};po.registerSymbol=kN;function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zc.apply(null,arguments)}function Eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Eh(Object(r),!0).forEach(function(n){td(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function td(e,t,r){return(t=ON(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ON(e){var t=TN(e,"string");return typeof t=="symbol"?t:t+""}function TN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kt=32;class rd extends w.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=kt/2,i=kt/6,o=kt/3,l=t.inactive?n:t.color,d=r??t.type;if(d==="none")return null;if(d==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:kt,y2:a,className:"recharts-legend-icon"});if(d==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(kt,"M").concat(2*o,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(d==="rect")return w.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(kt/8,"h").concat(kt,"v").concat(kt*3/4,"h").concat(-kt,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var c=PN({},t);return delete c.legendIcon,w.cloneElement(t.legendIcon,c)}return w.createElement(po,{fill:l,cx:a,cy:a,size:kt,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:kt,height:kt},d={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,f)=>{var h=u.formatter||a,m=ue({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var x=u.inactive?i:u.color,g=h?h(u.value,u,f):u.value;return w.createElement("li",zc({className:m,style:d,key:"legend-item-".concat(f)},uo(this.props,u,f)),w.createElement(Ju,{width:r,height:r,viewBox:l,style:c,"aria-label":"".concat(g," legend icon")},this.renderIcon(u,o)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},g))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}td(rd,"displayName","Legend");td(rd,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Pg={},Og={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t})(Og);var nd={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(nd);var Tg={},xo={},Ig={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Ig);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ig;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(xo);var Bg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Bg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xo,r=Bg;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(Tg);var Fg={},Mg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zs;function r(n){return function(a){return t.get(a,n)}}e.property=r})(Mg);var $g={},Yl={},Xl={},ad={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(ad);var id={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(id);var go={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(go);var Ch;function IN(){return Ch||(Ch=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sd(),r=ad,n=id,a=go;function i(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function x(g,p,y,b,v,j){const E=m(g,p,y,b,v,j);return E!==void 0?!!E:o(g,p,x,j)},new Map)}function o(f,h,m,x){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,x);case"function":return Object.keys(h).length>0?o(f,{...h},m,x):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function l(f,h,m,x){if(h==null)return!0;if(Array.isArray(h))return c(f,h,m,x);if(h instanceof Map)return d(f,h,m,x);if(h instanceof Set)return u(f,h,m,x);const g=Object.keys(h);if(f==null)return g.length===0;if(g.length===0)return!0;if(x&&x.has(h))return x.get(h)===f;x&&x.set(h,f);try{for(let p=0;p<g.length;p++){const y=g[p];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!m(f[y],h[y],y,f,h,x))return!1}return!0}finally{x&&x.delete(h)}}function d(f,h,m,x){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[g,p]of h.entries()){const y=f.get(g);if(m(y,p,g,f,h,x)===!1)return!1}return!0}function c(f,h,m,x){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const g=new Set;for(let p=0;p<h.length;p++){const y=h[p];let b=!1;for(let v=0;v<f.length;v++){if(g.has(v))continue;const j=f[v];let E=!1;if(m(j,y,p,f,h,x)&&(E=!0),E){g.add(v),b=!0;break}}if(!b)return!1}return!0}function u(f,h,m,x){return h.size===0?!0:f instanceof Set?c([...f],[...h],m,x):!1}e.isMatchWith=i,e.isSetMatch=u}(Xl)),Xl}var Sh;function sd(){return Sh||(Sh=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IN();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(Yl)),Yl}var Rg={},od={},ld={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(ld);var vo={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(vo);var yo={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",d="[object Map]",c="[object Set]",u="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",x="[object Error]",g="[object DataView]",p="[object Uint8Array]",y="[object Uint8ClampedArray]",b="[object Uint16Array]",v="[object Uint32Array]",j="[object BigUint64Array]",E="[object Int8Array]",_="[object Int16Array]",C="[object Int32Array]",A="[object BigInt64Array]",S="[object Float32Array]",N="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=u,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=g,e.dateTag=l,e.errorTag=x,e.float32ArrayTag=S,e.float64ArrayTag=N,e.functionTag=f,e.int16ArrayTag=_,e.int32ArrayTag=C,e.int8ArrayTag=E,e.mapTag=d,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=v,e.uint8ArrayTag=p,e.uint8ClampedArrayTag=y})(yo);var Lg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Lg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ld,r=vo,n=yo,a=id,i=Lg;function o(u,f){return l(u,void 0,u,new Map,f)}function l(u,f,h,m=new Map,x=void 0){const g=x==null?void 0:x(u,f,h,m);if(g!=null)return g;if(a.isPrimitive(u))return u;if(m.has(u))return m.get(u);if(Array.isArray(u)){const p=new Array(u.length);m.set(u,p);for(let y=0;y<u.length;y++)p[y]=l(u[y],y,h,m,x);return Object.hasOwn(u,"index")&&(p.index=u.index),Object.hasOwn(u,"input")&&(p.input=u.input),p}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const p=new RegExp(u.source,u.flags);return p.lastIndex=u.lastIndex,p}if(u instanceof Map){const p=new Map;m.set(u,p);for(const[y,b]of u)p.set(y,l(b,y,h,m,x));return p}if(u instanceof Set){const p=new Set;m.set(u,p);for(const y of u)p.add(l(y,void 0,h,m,x));return p}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const p=new(Object.getPrototypeOf(u)).constructor(u.length);m.set(u,p);for(let y=0;y<u.length;y++)p[y]=l(u[y],y,h,m,x);return p}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const p=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return m.set(u,p),d(p,u,h,m,x),p}if(typeof File<"u"&&u instanceof File){const p=new File([u],u.name,{type:u.type});return m.set(u,p),d(p,u,h,m,x),p}if(u instanceof Blob){const p=new Blob([u],{type:u.type});return m.set(u,p),d(p,u,h,m,x),p}if(u instanceof Error){const p=new u.constructor;return m.set(u,p),p.message=u.message,p.name=u.name,p.stack=u.stack,p.cause=u.cause,d(p,u,h,m,x),p}if(typeof u=="object"&&c(u)){const p=Object.create(Object.getPrototypeOf(u));return m.set(u,p),d(p,u,h,m,x),p}return u}function d(u,f,h=u,m,x){const g=[...Object.keys(f),...t.getSymbols(f)];for(let p=0;p<g.length;p++){const y=g[p],b=Object.getOwnPropertyDescriptor(u,y);(b==null||b.writable)&&(u[y]=l(f[y],y,h,m,x))}}function c(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=d})(od);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=od;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Rg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sd(),r=Rg;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})($g);var Ug={},zg={},Kg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=od,r=yo;function n(a,i){return t.cloneDeepWith(a,(o,l,d,c)=>{const u=i==null?void 0:i(o,l,d,c);if(u!=null)return u;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(Kg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kg;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(zg);var qg={},cd={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(cd);var Wg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vo;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Wg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wu,r=cd,n=Wg,a=Qs;function i(o,l){let d;if(Array.isArray(l)?d=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?d=a.toPath(l):d=[l],d.length===0)return!1;let c=o;for(let u=0;u<d.length;u++){const f=d[u];if((c==null||!Object.hasOwn(c,f))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(f)&&f<c.length))return!1;c=c[f]}return!0}e.has=i})(qg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sd(),r=Hu,n=zg,a=Zs,i=qg;function o(l,d){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return d=n.cloneDeep(d),function(c){const u=a.get(c,l);return u===void 0?i.has(c,l):d===void 0?u===void 0:t.isMatch(u,d)}}e.matchesProperty=o})(Ug);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nd,r=Mg,n=$g,a=Ug;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(Fg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Og,r=nd,n=Tg,a=Fg;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=i})(Pg);var BN=Pg.uniqBy;const Dh=tr(BN);function Hg(e,t,r){return t===!0?Dh(e,r):typeof t=="function"?Dh(e,t):e}var Gg={exports:{}},Vg={},Yg={exports:{}},Xg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sa=w;function FN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var MN=typeof Object.is=="function"?Object.is:FN,$N=sa.useState,RN=sa.useEffect,LN=sa.useLayoutEffect,UN=sa.useDebugValue;function zN(e,t){var r=t(),n=$N({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return LN(function(){a.value=r,a.getSnapshot=t,Jl(a)&&i({inst:a})},[e,r,t]),RN(function(){return Jl(a)&&i({inst:a}),e(function(){Jl(a)&&i({inst:a})})},[e]),UN(r),r}function Jl(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!MN(e,r)}catch{return!0}}function KN(e,t){return t()}var qN=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?KN:zN;Xg.useSyncExternalStore=sa.useSyncExternalStore!==void 0?sa.useSyncExternalStore:qN;Yg.exports=Xg;var WN=Yg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=w,HN=WN;function GN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var VN=typeof Object.is=="function"?Object.is:GN,YN=HN.useSyncExternalStore,XN=bo.useRef,JN=bo.useEffect,ZN=bo.useMemo,QN=bo.useDebugValue;Vg.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=XN(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=ZN(function(){function d(m){if(!c){if(c=!0,u=m,m=n(m),a!==void 0&&o.hasValue){var x=o.value;if(a(x,m))return f=x}return f=m}if(x=f,VN(u,m))return x;var g=n(m);return a!==void 0&&a(x,g)?(u=m,x):(u=m,f=g)}var c=!1,u,f,h=r===void 0?null:r;return[function(){return d(t())},h===null?void 0:function(){return d(h())}]},[t,r,n,a]);var l=YN(e,i[0],i[1]);return JN(function(){o.hasValue=!0,o.value=l},[l]),QN(l),l};Gg.exports=Vg;var eE=Gg.exports,ud=w.createContext(null),tE=e=>e,Ee=()=>{var e=w.useContext(ud);return e?e.store.dispatch:tE},Qi=()=>{},rE=()=>Qi,nE=(e,t)=>e===t;function J(e){var t=w.useContext(ud);return eE.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:rE,t?t.store.getState:Qi,t?t.store.getState:Qi,t?e:Qi,nE)}function aE(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function iE(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function sE(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var kh=e=>Array.isArray(e)?e:[e];function oE(e){const t=Array.isArray(e[0])?e[0]:e;return sE(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function lE(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var cE=class{constructor(e){this.value=e}deref(){return this.value}},uE=typeof WeakRef<"u"?WeakRef:cE,dE=0,Ph=1;function Ui(){return{s:dE,v:void 0,o:null,p:null}}function Jg(e,t={}){let r=Ui();const{resultEqualityCheck:n}=t;let a,i=0;function o(){var f;let l=r;const{length:d}=arguments;for(let h=0,m=d;h<m;h++){const x=arguments[h];if(typeof x=="function"||typeof x=="object"&&x!==null){let g=l.o;g===null&&(l.o=g=new WeakMap);const p=g.get(x);p===void 0?(l=Ui(),g.set(x,l)):l=p}else{let g=l.p;g===null&&(l.p=g=new Map);const p=g.get(x);p===void 0?(l=Ui(),g.set(x,l)):l=p}}const c=l;let u;if(l.s===Ph)u=l.v;else if(u=e.apply(null,arguments),i++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,u)&&(u=h,i!==0&&i--),a=typeof u=="object"&&u!==null||typeof u=="function"?new uE(u):u}return c.s=Ph,c.v=u,u}return o.clearCache=()=>{r=Ui(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function fE(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,l,d={},c=a.pop();typeof c=="object"&&(d=c,c=a.pop()),aE(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...r,...d},{memoize:f,memoizeOptions:h=[],argsMemoize:m=Jg,argsMemoizeOptions:x=[]}=u,g=kh(h),p=kh(x),y=oE(a),b=f(function(){return i++,c.apply(null,arguments)},...g),v=m(function(){o++;const E=lE(y,arguments);return l=b.apply(null,E),l},...p);return Object.assign(v,{resultFunc:c,memoizedResultFunc:b,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var F=fE(Jg),hE=Object.assign((e,t=F)=>{iE(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,d)=>(o[r[d]]=l,o),{}))},{withTypes:()=>hE}),Zg={},Qg={},ev={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(ev);var tv={},dd={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(dd);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dd,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(tv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ev,r=tv,n=Qs;function a(i,o,l,d){if(i==null)return[];l=d?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const c=(m,x)=>{let g=m;for(let p=0;p<x.length&&g!=null;++p)g=g[x[p]];return g},u=(m,x)=>x==null||m==null?x:typeof m=="object"&&"key"in m?Object.hasOwn(x,m.key)?x[m.key]:c(x,m.path):typeof m=="function"?m(x):Array.isArray(m)?c(x,m):typeof x=="object"?x[m]:x,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:f.map(x=>u(x,m))})).slice().sort((m,x)=>{for(let g=0;g<f.length;g++){const p=t.compareValues(m.criteria[g],x.criteria[g],l[g]);if(p!==0)return p}return 0}).map(m=>m.original)}e.orderBy=a})(Qg);var rv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(l,d)=>{for(let c=0;c<l.length;c++){const u=l[c];Array.isArray(u)&&d<i?o(u,d+1):a.push(u)}};return o(r,0),a}e.flatten=t})(rv);var fd={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cd,r=xo,n=ad,a=go;function i(o,l,d){return n.isObject(d)&&(typeof l=="number"&&r.isArrayLike(d)&&t.isIndex(l)&&l<d.length||typeof l=="string"&&l in d)?a.eq(d[l],o):!1}e.isIterateeCall=i})(fd);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qg,r=rv,n=fd;function a(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(Zg);var mE=Zg.sortBy;const wo=tr(mE);var nv=e=>e.legend.settings,pE=e=>e.legend.size,xE=e=>e.legend.payload,gE=F([xE,nv],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?wo(n,r):n});function vE(){return J(gE)}var zi=1;function av(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=w.useState({height:0,left:0,top:0,width:0}),n=w.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>zi||Math.abs(o.left-t.left)>zi||Math.abs(o.top-t.top)>zi||Math.abs(o.width-t.width)>zi)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Xe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yE=typeof Symbol=="function"&&Symbol.observable||"@@observable",Oh=yE,Zl=()=>Math.random().toString(36).substring(7).split("").join("."),bE={INIT:`@@redux/INIT${Zl()}`,REPLACE:`@@redux/REPLACE${Zl()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Zl()}`},us=bE;function hd(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function iv(e,t,r){if(typeof e!="function")throw new Error(Xe(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Xe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Xe(1));return r(iv)(e,t)}let n=e,a=t,i=new Map,o=i,l=0,d=!1;function c(){o===i&&(o=new Map,i.forEach((p,y)=>{o.set(y,p)}))}function u(){if(d)throw new Error(Xe(3));return a}function f(p){if(typeof p!="function")throw new Error(Xe(4));if(d)throw new Error(Xe(5));let y=!0;c();const b=l++;return o.set(b,p),function(){if(y){if(d)throw new Error(Xe(6));y=!1,c(),o.delete(b),i=null}}}function h(p){if(!hd(p))throw new Error(Xe(7));if(typeof p.type>"u")throw new Error(Xe(8));if(typeof p.type!="string")throw new Error(Xe(17));if(d)throw new Error(Xe(9));try{d=!0,a=n(a,p)}finally{d=!1}return(i=o).forEach(b=>{b()}),p}function m(p){if(typeof p!="function")throw new Error(Xe(10));n=p,h({type:us.REPLACE})}function x(){const p=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Xe(11));function b(){const j=y;j.next&&j.next(u())}return b(),{unsubscribe:p(b)}},[Oh](){return this}}}return h({type:us.INIT}),{dispatch:h,subscribe:f,getState:u,replaceReducer:m,[Oh]:x}}function wE(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:us.INIT})>"u")throw new Error(Xe(12));if(typeof r(void 0,{type:us.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xe(13))})}function sv(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{wE(r)}catch(i){a=i}return function(o={},l){if(a)throw a;let d=!1;const c={};for(let u=0;u<n.length;u++){const f=n[u],h=r[f],m=o[f],x=h(m,l);if(typeof x>"u")throw l&&l.type,new Error(Xe(14));c[f]=x,d=d||x!==m}return d=d||n.length!==Object.keys(o).length,d?c:o}}function ds(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function jE(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(Xe(15))};const o={getState:a.getState,dispatch:(d,...c)=>i(d,...c)},l=e.map(d=>d(o));return i=ds(...l)(a.dispatch),{...a,dispatch:i}}}function ov(e){return hd(e)&&"type"in e&&typeof e.type=="string"}var lv=Symbol.for("immer-nothing"),Th=Symbol.for("immer-draftable"),Nt=Symbol.for("immer-state");function Xt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var oa=Object.getPrototypeOf;function Nn(e){return!!e&&!!e[Nt]}function br(e){var t;return e?cv(e)||Array.isArray(e)||!!e[Th]||!!((t=e.constructor)!=null&&t[Th])||_o(e)||Ao(e):!1}var _E=Object.prototype.constructor.toString();function cv(e){if(!e||typeof e!="object")return!1;const t=oa(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===_E}function fs(e,t){jo(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function jo(e){const t=e[Nt];return t?t.type_:Array.isArray(e)?1:_o(e)?2:Ao(e)?3:0}function Kc(e,t){return jo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uv(e,t,r){const n=jo(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function AE(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function _o(e){return e instanceof Map}function Ao(e){return e instanceof Set}function sn(e){return e.copy_||e.base_}function qc(e,t){if(_o(e))return new Map(e);if(Ao(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cv(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Nt];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(oa(e),n)}else{const n=oa(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function md(e,t=!1){return No(e)||Nn(e)||!br(e)||(jo(e)>1&&(e.set=e.add=e.clear=e.delete=NE),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>md(n,!0))),e}function NE(){Xt(2)}function No(e){return Object.isFrozen(e)}var EE={};function En(e){const t=EE[e];return t||Xt(0,e),t}var ri;function dv(){return ri}function CE(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ih(e,t){t&&(En("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Wc(e){Hc(e),e.drafts_.forEach(SE),e.drafts_=null}function Hc(e){e===ri&&(ri=e.parent_)}function Bh(e){return ri=CE(ri,e)}function SE(e){const t=e[Nt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Fh(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Nt].modified_&&(Wc(t),Xt(4)),br(e)&&(e=hs(t,e),t.parent_||ms(t,e)),t.patches_&&En("Patches").generateReplacementPatches_(r[Nt].base_,e,t.patches_,t.inversePatches_)):e=hs(t,r,[]),Wc(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lv?e:void 0}function hs(e,t,r){if(No(t))return t;const n=t[Nt];if(!n)return fs(t,(a,i)=>Mh(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return ms(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,o=!1;n.type_===3&&(i=new Set(a),a.clear(),o=!0),fs(i,(l,d)=>Mh(e,n,a,l,d,r,o)),ms(e,a,!1),r&&e.patches_&&En("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Mh(e,t,r,n,a,i,o){if(Nn(a)){const l=i&&t&&t.type_!==3&&!Kc(t.assigned_,n)?i.concat(n):void 0,d=hs(e,a,l);if(uv(r,n,d),Nn(d))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(br(a)&&!No(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;hs(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&ms(e,a)}}function ms(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&md(t,r)}function DE(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:dv(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=pd;r&&(a=[n],i=ni);const{revoke:o,proxy:l}=Proxy.revocable(a,i);return n.draft_=l,n.revoke_=o,l}var pd={get(e,t){if(t===Nt)return e;const r=sn(e);if(!Kc(r,t))return kE(e,r,t);const n=r[t];return e.finalized_||!br(n)?n:n===Ql(e.base_,t)?(ec(e),e.copy_[t]=Vc(n,e)):n},has(e,t){return t in sn(e)},ownKeys(e){return Reflect.ownKeys(sn(e))},set(e,t,r){const n=fv(sn(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Ql(sn(e),t),i=a==null?void 0:a[Nt];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(AE(r,a)&&(r!==void 0||Kc(e.base_,t)))return!0;ec(e),Gc(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ql(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ec(e),Gc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=sn(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Xt(11)},getPrototypeOf(e){return oa(e.base_)},setPrototypeOf(){Xt(12)}},ni={};fs(pd,(e,t)=>{ni[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ni.deleteProperty=function(e,t){return ni.set.call(this,e,t,void 0)};ni.set=function(e,t,r){return pd.set.call(this,e[0],t,r,e[0])};function Ql(e,t){const r=e[Nt];return(r?sn(r):e)[t]}function kE(e,t,r){var a;const n=fv(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function fv(e,t){if(!(t in e))return;let r=oa(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=oa(r)}}function Gc(e){e.modified_||(e.modified_=!0,e.parent_&&Gc(e.parent_))}function ec(e){e.copy_||(e.copy_=qc(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var PE=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(d=i,...c){return o.produce(d,u=>r.call(this,u,...c))}}typeof r!="function"&&Xt(6),n!==void 0&&typeof n!="function"&&Xt(7);let a;if(br(t)){const i=Bh(this),o=Vc(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?Wc(i):Hc(i)}return Ih(i,n),Fh(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===lv&&(a=void 0),this.autoFreeze_&&md(a,!0),n){const i=[],o=[];En("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else Xt(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,d=>t(d,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){br(e)||Xt(8),Nn(e)&&(e=vr(e));const t=Bh(this),r=Vc(e,void 0);return r[Nt].isManual_=!0,Hc(t),r}finishDraft(e,t){const r=e&&e[Nt];(!r||!r.isManual_)&&Xt(9);const{scope_:n}=r;return Ih(n,t),Fh(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=En("Patches").applyPatches_;return Nn(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Vc(e,t){const r=_o(e)?En("MapSet").proxyMap_(e,t):Ao(e)?En("MapSet").proxySet_(e,t):DE(e,t);return(t?t.scope_:dv()).drafts_.push(r),r}function vr(e){return Nn(e)||Xt(10,e),hv(e)}function hv(e){if(!br(e)||No(e))return e;const t=e[Nt];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=qc(e,t.scope_.immer_.useStrictShallowCopy_)}else r=qc(e,!0);return fs(r,(n,a)=>{uv(r,n,hv(a))}),t&&(t.finalized_=!1),r}var Et=new PE,mv=Et.produce;Et.produceWithPatches.bind(Et);Et.setAutoFreeze.bind(Et);Et.setUseStrictShallowCopy.bind(Et);Et.applyPatches.bind(Et);Et.createDraft.bind(Et);Et.finishDraft.bind(Et);function pv(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var OE=pv(),TE=pv,IE=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ds:ds.apply(null,arguments)};function Mt(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(At(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>ov(n)&&n.type===e,r}var xv=class qa extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,qa.prototype)}static get[Symbol.species](){return qa}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new qa(...t[0].concat(this)):new qa(...t.concat(this))}};function $h(e){return br(e)?mv(e,()=>{}):e}function Ki(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function BE(e){return typeof e=="boolean"}var FE=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new xv;return r&&(BE(r)?o.push(OE):o.push(TE(r.extraArgument))),o},ME="RTK_autoBatch",Rh=e=>t=>{setTimeout(t,e)},$E=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const l=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Rh(10):e.type==="callback"?e.queueNotification:Rh(e.timeout),c=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const f=()=>a&&u(),h=n.subscribe(f);return l.add(u),()=>{h(),l.delete(u)}},dispatch(u){var f;try{return a=!((f=u==null?void 0:u.meta)!=null&&f[ME]),i=!a,i&&(o||(o=!0,d(c))),n.dispatch(u)}finally{a=!0}}})},RE=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new xv(e);return n&&a.push($E(typeof n=="object"?n:void 0)),a};function LE(e){const t=FE(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(hd(r))l=sv(r);else throw new Error(At(1));let d;typeof n=="function"?d=n(t):d=t();let c=ds;a&&(c=IE({trace:!1,...typeof a=="object"&&a}));const u=jE(...d),f=RE(u);let h=typeof o=="function"?o(f):f();const m=c(...h);return iv(l,i,m)}function gv(e){const t={},r=[];let n;const a={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(At(28));if(l in t)throw new Error(At(29));return t[l]=o,a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function UE(e){return typeof e=="function"}function zE(e,t){let[r,n,a]=gv(t),i;if(UE(e))i=()=>$h(e());else{const l=$h(e);i=()=>l}function o(l=i(),d){let c=[r[d.type],...n.filter(({matcher:u})=>u(d)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[a]),c.reduce((u,f)=>{if(f)if(Nn(u)){const m=f(u,d);return m===void 0?u:m}else{if(br(u))return mv(u,h=>f(h,d));{const h=f(u,d);if(h===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return u},l)}return o.getInitialState=i,o}var KE="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",qE=(e=21)=>{let t="",r=e;for(;r--;)t+=KE[Math.random()*64|0];return t},WE=Symbol.for("rtk-slice-createasyncthunk");function HE(e,t){return`${e}/${t}`}function GE({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[WE];return function(a){const{name:i,reducerPath:o=i}=a;if(!i)throw new Error(At(11));const l=(typeof a.reducers=="function"?a.reducers(YE()):a.reducers)||{},d=Object.keys(l),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(j,E){const _=typeof j=="string"?j:j.type;if(!_)throw new Error(At(12));if(_ in c.sliceCaseReducersByType)throw new Error(At(13));return c.sliceCaseReducersByType[_]=E,u},addMatcher(j,E){return c.sliceMatchers.push({matcher:j,reducer:E}),u},exposeAction(j,E){return c.actionCreators[j]=E,u},exposeCaseReducer(j,E){return c.sliceCaseReducersByName[j]=E,u}};d.forEach(j=>{const E=l[j],_={reducerName:j,type:HE(i,j),createNotation:typeof a.reducers=="function"};JE(E)?QE(_,E,u,t):XE(_,E,u)});function f(){const[j={},E=[],_=void 0]=typeof a.extraReducers=="function"?gv(a.extraReducers):[a.extraReducers],C={...j,...c.sliceCaseReducersByType};return zE(a.initialState,A=>{for(let S in C)A.addCase(S,C[S]);for(let S of c.sliceMatchers)A.addMatcher(S.matcher,S.reducer);for(let S of E)A.addMatcher(S.matcher,S.reducer);_&&A.addDefaultCase(_)})}const h=j=>j,m=new Map,x=new WeakMap;let g;function p(j,E){return g||(g=f()),g(j,E)}function y(){return g||(g=f()),g.getInitialState()}function b(j,E=!1){function _(A){let S=A[j];return typeof S>"u"&&E&&(S=Ki(x,_,y)),S}function C(A=h){const S=Ki(m,E,()=>new WeakMap);return Ki(S,A,()=>{const N={};for(const[D,k]of Object.entries(a.selectors??{}))N[D]=VE(k,A,()=>Ki(x,A,y),E);return N})}return{reducerPath:j,getSelectors:C,get selectors(){return C(_)},selectSlice:_}}const v={name:i,reducer:p,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:y,...b(o),injectInto(j,{reducerPath:E,..._}={}){const C=E??o;return j.inject({reducerPath:C,reducer:p},_),{...v,...b(C,!0)}}};return v}}function VE(e,t,r,n){function a(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var zt=GE();function YE(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function XE({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!ZE(n))throw new Error(At(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Mt(e,o):Mt(e))}function JE(e){return e._reducerDefinitionType==="asyncThunk"}function ZE(e){return e._reducerDefinitionType==="reducerWithPrepare"}function QE({type:e,reducerName:t},r,n,a){if(!a)throw new Error(At(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:d,settled:c,options:u}=r,f=a(e,i,u);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),d&&n.addCase(f.rejected,d),c&&n.addMatcher(f.settled,c),n.exposeCaseReducer(t,{fulfilled:o||qi,pending:l||qi,rejected:d||qi,settled:c||qi})}function qi(){}var eC="task",vv="listener",yv="completed",xd="cancelled",tC=`task-${xd}`,rC=`task-${yv}`,Yc=`${vv}-${xd}`,nC=`${vv}-${yv}`,Eo=class{constructor(e){nr(this,"name","TaskAbortError");nr(this,"message");this.code=e,this.message=`${eC} ${xd} (reason: ${e})`}},gd=(e,t)=>{if(typeof e!="function")throw new TypeError(At(32))},ps=()=>{},bv=(e,t=ps)=>(e.catch(t),e),wv=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),gn=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},vn=e=>{if(e.aborted){const{reason:t}=e;throw new Eo(t)}};function jv(e,t){let r=ps;return new Promise((n,a)=>{const i=()=>a(new Eo(e.reason));if(e.aborted){i();return}r=wv(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=ps})}var aC=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Eo?"cancelled":"rejected",error:r}}finally{t==null||t()}},xs=e=>t=>bv(jv(e,t).then(r=>(vn(e),r))),_v=e=>{const t=xs(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:ea}=Object,Lh={},Co="listenerMiddleware",iC=(e,t)=>{const r=n=>wv(e,()=>gn(n,e.reason));return(n,a)=>{gd(n);const i=new AbortController;r(i);const o=aC(async()=>{vn(e),vn(i.signal);const l=await n({pause:xs(i.signal),delay:_v(i.signal),signal:i.signal});return vn(i.signal),l},()=>gn(i,rC));return a!=null&&a.autoJoin&&t.push(o.catch(ps)),{result:xs(e)(o),cancel(){gn(i,tC)}}}},sC=(e,t)=>{const r=async(n,a)=>{vn(t);let i=()=>{};const l=[new Promise((d,c)=>{let u=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),d([f,h.getState(),h.getOriginalState()])}});i=()=>{u(),c()}})];a!=null&&l.push(new Promise(d=>setTimeout(d,a,null)));try{const d=await jv(t,Promise.race(l));return vn(t),d}finally{i()}};return(n,a)=>bv(r(n,a))},Av=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=Mt(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(At(21));return gd(i),{predicate:a,type:t,effect:i}},Nv=ea(e=>{const{type:t,predicate:r,effect:n}=Av(e);return{id:qE(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(At(22))}}},{withTypes:()=>Nv}),Uh=(e,t)=>{const{type:r,effect:n,predicate:a}=Av(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},Xc=e=>{e.pending.forEach(t=>{gn(t,Yc)})},oC=e=>()=>{e.forEach(Xc),e.clear()},zh=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Ev=ea(Mt(`${Co}/add`),{withTypes:()=>Ev}),lC=Mt(`${Co}/removeAll`),Cv=ea(Mt(`${Co}/remove`),{withTypes:()=>Cv}),cC=(...e)=>{console.error(`${Co}/error`,...e)},ji=(e={})=>{const t=new Map,{extra:r,onError:n=cC}=e;gd(n);const a=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),f=>{u.unsubscribe(),f!=null&&f.cancelActive&&Xc(u)}),i=u=>{const f=Uh(t,u)??Nv(u);return a(f)};ea(i,{withTypes:()=>i});const o=u=>{const f=Uh(t,u);return f&&(f.unsubscribe(),u.cancelActive&&Xc(f)),!!f};ea(o,{withTypes:()=>o});const l=async(u,f,h,m)=>{const x=new AbortController,g=sC(i,x.signal),p=[];try{u.pending.add(x),await Promise.resolve(u.effect(f,ea({},h,{getOriginalState:m,condition:(y,b)=>g(y,b).then(Boolean),take:g,delay:_v(x.signal),pause:xs(x.signal),extra:r,signal:x.signal,fork:iC(x.signal,p),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((y,b,v)=>{y!==x&&(gn(y,Yc),v.delete(y))})},cancel:()=>{gn(x,Yc),u.pending.delete(x)},throwIfCancelled:()=>{vn(x.signal)}})))}catch(y){y instanceof Eo||zh(n,y,{raisedBy:"effect"})}finally{await Promise.all(p),gn(x,nC),u.pending.delete(x)}},d=oC(t);return{middleware:u=>f=>h=>{if(!ov(h))return f(h);if(Ev.match(h))return i(h.payload);if(lC.match(h)){d();return}if(Cv.match(h))return o(h.payload);let m=u.getState();const x=()=>{if(m===Lh)throw new Error(At(23));return m};let g;try{if(g=f(h),t.size>0){const p=u.getState(),y=Array.from(t.values());for(const b of y){let v=!1;try{v=b.predicate(h,p,m)}catch(j){v=!1,zh(n,j,{raisedBy:"predicate"})}v&&l(b,h,u,x)}}}finally{m=Lh}return g},startListening:i,stopListening:o,clearListeners:d}};function At(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var uC={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Sv=zt({name:"chartLayout",initialState:uC,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:dC,setLayout:fC,setChartSize:hC,setScale:mC}=Sv.actions,pC=Sv.reducer;function Kh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kh(Object(r),!0).forEach(function(n){xC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xC(e,t,r){return(t=gC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gC(e){var t=vC(e,"string");return typeof t=="symbol"?t:t+""}function vC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gs=Math.PI/180,yC=e=>e*180/Math.PI,Be=(e,t,r,n)=>({x:e+Math.cos(-gs*n)*r,y:t+Math.sin(-gs*n)*r}),Dv=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},bC=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},wC=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=bC({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,d=Math.acos(l);return n>i&&(d=2*Math.PI-d),{radius:o,angle:yC(d),angleInRadian:d}},jC=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},_C=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},AC=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=wC({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:d,endAngle:c}=jC(t),u=i,f;if(d<=c){for(;u>c;)u-=360;for(;u<d;)u+=360;f=u>=d&&u<=c}else{for(;u>d;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=d}return f?qh(qh({},t),{},{radius:a,angle:_C(u,t)}):null};function Wh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wh(Object(r),!0).forEach(function(n){NC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NC(e,t,r){return(t=EC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EC(e){var t=CC(e,"string");return typeof t=="symbol"?t:t+""}function CC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function be(e,t,r){return xe(e)||xe(t)?r:lr(t)?Wr(e,t,r):typeof t=="function"?t(e):r}var SC=(e,t,r,n,a)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<l;d++){var c=d>0?r[d-1].coordinate:r[l-1].coordinate,u=r[d].coordinate,f=d>=l-1?r[0].coordinate:r[d+1].coordinate,h=void 0;if(at(u-c)!==at(f-u)){var m=[];if(at(f-u)===at(a[1]-a[0])){h=f;var x=u+a[1]-a[0];m[0]=Math.min(x,(x+c)/2),m[1]=Math.max(x,(x+c)/2)}else{h=c;var g=f+a[1]-a[0];m[0]=Math.min(u,(g+u)/2),m[1]=Math.max(u,(g+u)/2)}var p=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>p[0]&&e<=p[1]||e>=m[0]&&e<=m[1]){({index:o}=r[d]);break}}else{var y=Math.min(c,f),b=Math.max(c,f);if(e>(y+u)/2&&e<=(b+u)/2){({index:o}=r[d]);break}}}else if(t){for(var v=0;v<l;v++)if(v===0&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v>0&&v<l-1&&e>(t[v].coordinate+t[v-1].coordinate)/2&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v===l-1&&e>(t[v].coordinate+t[v-1].coordinate)/2){({index:o}=t[v]);break}}return o},DC=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&X(e[i]))return Ot(Ot({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&X(e[o]))return Ot(Ot({},e),{},{[o]:e[o]+(a||0)})}return e},Yr=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",kv=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,i,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(i=!0),l.coordinate));return a||o.push(t),i||o.push(r),o},Pv=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:l,isCategorical:d,categoricalDomain:c,tickCount:u,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var x=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,g=a==="category"&&o.bandwidth?o.bandwidth()/x:0;if(g=m==="angleAxis"&&i&&i.length>=2?at(i[0]-i[1])*2*g:g,f||h){var p=(f||h||[]).map((y,b)=>{var v=n?n.indexOf(y):y;return{coordinate:o(v)+g,value:y,offset:g,index:b}});return p.filter(y=>!Ft(y.coordinate))}return d&&c?c.map((y,b)=>({coordinate:o(y)+g,value:y,index:b,offset:g})):o.ticks&&u!=null?o.ticks(u).map((y,b)=>({coordinate:o(y)+g,value:y,offset:g,index:b})):o.domain().map((y,b)=>({coordinate:o(y)+g,value:n?n[y]:y,index:b,offset:g}))},Hh=1e-4,kC=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Hh,i=Math.max(n[0],n[1])+Hh,o=e(t[0]),l=e(t[r-1]);(o<a||o>i||l<a||l>i)&&e.domain([t[0],t[r-1]])}},PC=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,o=0;o<t;++o){var l=Ft(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},OC=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var o=Ft(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},TC={sign:PC,expand:vN,none:ia,silhouette:yN,wiggle:bN,positive:OC},IC=(e,t,r)=>{var n=TC[r],a=gN().keys(t).value((i,o)=>+be(i,o,0)).order(Lc).offset(n);return a(e)};function BC(e){return e==null?void 0:String(e)}function vs(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!xe(a[t.dataKey])){var l=ug(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=be(a,xe(o)?t.dataKey:o);return xe(d)?null:t.scale(d)}var FC=e=>{var t=e.flat(2).filter(X);return[Math.min(...t),Math.max(...t)]},MC=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],$C=(e,t,r)=>{if(e!=null)return MC(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:o}=i,l=o.reduce((d,c)=>{var u=FC(c.slice(t,r+1));return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},Gh=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vh=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Jc=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=wo(t,u=>u.coordinate),i=1/0,o=1,l=a.length;o<l;o++){var d=a[o],c=a[o-1];i=Math.min((d.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function Yh(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return Ot(Ot({},t),{},{dataKey:r,payload:n,value:a,name:i})}function wa(e,t){if(e)return String(e);if(typeof t=="string")return t}function RC(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return n?AC({x:e,y:t},n):null}var LC=(e,t,r,n)=>{var a=t.find(c=>c&&c.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:o}=n;return Ot(Ot(Ot({},n),Be(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=a.coordinate,{angle:d}=n;return Ot(Ot(Ot({},n),Be(n.cx,n.cy,l,d)),{},{angle:d,radius:l})}return{x:0,y:0}},UC=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Er=e=>e.layout.width,Cr=e=>e.layout.height,zC=e=>e.layout.scale,Ov=e=>e.layout.margin,vd=F(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),yd=F(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),bd="data-recharts-item-index",wd="data-recharts-item-data-key",So=60;function Xh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xh(Object(r),!0).forEach(function(n){KC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KC(e,t,r){return(t=qC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qC(e){var t=WC(e,"string");return typeof t=="symbol"?t:t+""}function WC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HC=e=>e.brush.height,Ge=F([Er,Cr,Ov,HC,vd,yd,nv,pE],(e,t,r,n,a,i,o,l)=>{var d=i.reduce((x,g)=>{var{orientation:p}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:So;return Tr(Tr({},x),{},{[p]:x[p]+y})}return x},{left:r.left||0,right:r.right||0}),c=a.reduce((x,g)=>{var{orientation:p}=g;return!g.mirror&&!g.hide?Tr(Tr({},x),{},{[p]:Wr(x,"".concat(p))+g.height}):x},{top:r.top||0,bottom:r.bottom||0}),u=Tr(Tr({},c),d),f=u.bottom;u.bottom+=n,u=DC(u,o,l);var h=e-u.left-u.right,m=t-u.top-u.bottom;return Tr(Tr({brushBottom:f},u),{},{width:Math.max(h,0),height:Math.max(m,0)})}),GC=F(Ge,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Tv=F(Er,Cr,(e,t)=>({x:0,y:0,width:e,height:t})),VC=w.createContext(null),st=()=>w.useContext(VC)!=null,Do=e=>e.brush,ko=F([Do,Ge,Ov],(e,t,r)=>({height:e.height,x:X(e.x)?e.x:t.left,y:X(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:X(e.width)?e.width:t.width})),jd=()=>{var e,t=st(),r=J(GC),n=J(ko),a=(e=J(Do))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},YC={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Iv=()=>{var e;return(e=J(Ge))!==null&&e!==void 0?e:YC},_d=()=>J(Er),Ad=()=>J(Cr),XC={top:0,right:0,bottom:0,left:0},JC=()=>{var e;return(e=J(t=>t.layout.margin))!==null&&e!==void 0?e:XC},_e=e=>e.layout.layoutType,Nd=()=>J(_e),ZC={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Bv=zt({name:"legend",initialState:ZC,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=vr(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Jh,setLegendSettings:QC,addLegendPayload:Fv,removeLegendPayload:Mv}=Bv.actions,eS=Bv.reducer,tS=["contextPayload"];function Zc(){return Zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zc.apply(null,arguments)}function Zh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function la(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zh(Object(r),!0).forEach(function(n){Ed(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ed(e,t,r){return(t=rS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rS(e){var t=nS(e,"string");return typeof t=="symbol"?t:t+""}function nS(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aS(e,t){if(e==null)return{};var r,n,a=iS(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iS(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sS(e){return e.value}function oS(e){var{contextPayload:t}=e,r=aS(e,tS),n=Hg(t,e.payloadUniqBy,sS),a=la(la({},r),{},{payload:n});return w.isValidElement(e.content)?w.cloneElement(e.content,a):typeof e.content=="function"?w.createElement(e.content,a):w.createElement(rd,a)}function lS(e,t,r,n,a,i){var{layout:o,align:l,verticalAlign:d}=t,c,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?c={left:((n||0)-i.width)/2}:c=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?u={top:((a||0)-i.height)/2}:u=d==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),la(la({},c),u)}function cS(e){var t=Ee();return w.useEffect(()=>{t(QC(e))},[t,e]),null}function uS(e){var t=Ee();return w.useEffect(()=>(t(Jh(e)),()=>{t(Jh({width:0,height:0}))}),[t,e]),null}function dS(e){var t=vE(),r=UA(),n=JC(),{width:a,height:i,wrapperStyle:o,portal:l}=e,[d,c]=av([t]),u=_d(),f=Ad(),h=u-(n.left||0)-(n.right||0),m=Po.getWidthOrHeight(e.layout,i,a,h),x=l?o:la(la({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||i||"auto"},lS(o,e,n,u,f,d)),o),g=l??r;if(g==null)return null;var p=w.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:c},w.createElement(cS,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),w.createElement(uS,{width:d.width,height:d.height}),w.createElement(oS,Zc({},e,m,{margin:n,chartWidth:u,chartHeight:f,contextPayload:t})));return ku.createPortal(p,g)}class Po extends w.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&X(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return w.createElement(dS,this.props)}}Ed(Po,"displayName","Legend");Ed(Po,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qc.apply(null,arguments)}function Qh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qh(Object(r),!0).forEach(function(n){fS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fS(e,t,r){return(t=hS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hS(e){var t=mS(e,"string");return typeof t=="symbol"?t:t+""}function mS(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pS(e){return Array.isArray(e)&&lr(e[0])&&lr(e[1])?e.join(" ~ "):e}var xS=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:o,itemSorter:l,wrapperClassName:d,labelClassName:c,label:u,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(i&&i.length){var E={padding:0,margin:0},_=(l?wo(i,l):i).map((C,A)=>{if(C.type==="none")return null;var S=C.formatter||o||pS,{value:N,name:D}=C,k=N,P=D;if(S){var R=S(N,D,C,A,i);if(Array.isArray(R))[k,P]=R;else if(R!=null)k=R;else return null}var B=tc({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:B},lr(P)?w.createElement("span",{className:"recharts-tooltip-item-name"},P):null,lr(P)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},k),w.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:E},_)}return null},x=tc({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),g=tc({margin:0},a),p=!xe(u),y=p?u:"",b=ue("recharts-default-tooltip",d),v=ue("recharts-tooltip-label",c);p&&f&&i!==void 0&&i!==null&&(y=f(u,i));var j=h?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",Qc({className:b,style:x},j),w.createElement("p",{className:v,style:g},w.isValidElement(y)?y:"".concat(y)),m())},Ia="recharts-tooltip-wrapper",gS={visibility:"hidden"};function vS(e){var{coordinate:t,translateX:r,translateY:n}=e;return ue(Ia,{["".concat(Ia,"-right")]:X(r)&&t&&X(t.x)&&r>=t.x,["".concat(Ia,"-left")]:X(r)&&t&&X(t.x)&&r<t.x,["".concat(Ia,"-bottom")]:X(n)&&t&&X(t.y)&&n>=t.y,["".concat(Ia,"-top")]:X(n)&&t&&X(t.y)&&n<t.y})}function em(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:l,viewBox:d,viewBoxDimension:c}=e;if(i&&X(i[n]))return i[n];var u=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?u:f;var h=d[n];if(h==null)return 0;if(o[n]){var m=u,x=h;return m<x?Math.max(f,h):Math.max(u,h)}if(c==null)return 0;var g=f+l,p=h+c;return g>p?Math.max(u,h):Math.max(f,h)}function yS(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function bS(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:d}=e,c,u,f;return o.height>0&&o.width>0&&r?(u=em({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),f=em({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),c=yS({translateX:u,translateY:f,useTranslate3d:l})):c=gS,{cssProperties:c,cssClasses:vS({translateX:u,translateY:f,coordinate:r})}}function tm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tm(Object(r),!0).forEach(function(n){eu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eu(e,t,r){return(t=wS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wS(e){var t=jS(e,"string");return typeof t=="symbol"?t:t+""}function jS(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _S extends w.PureComponent{constructor(){super(...arguments),eu(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),eu(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:l,isAnimationActive:d,offset:c,position:u,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:x,lastBoundingBox:g,innerRef:p,hasPortalFromProps:y}=this.props,{cssClasses:b,cssProperties:v}=bS({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:f,tooltipBox:{height:g.height,width:g.width},useTranslate3d:h,viewBox:m}),j=y?{}:Wi(Wi({transition:d&&t?"transform ".concat(n,"ms ").concat(a):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),E=Wi(Wi({},j),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},x);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:E,ref:p},i)}}var AS=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Tn={isSsr:AS()},$v=()=>J(e=>e.rootProps.accessibilityLayer);function er(e){return Number.isFinite(e)}function ca(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function tu(){return tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tu.apply(null,arguments)}function rm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rm(Object(r),!0).forEach(function(n){NS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NS(e,t,r){return(t=ES(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ES(e){var t=CS(e,"string");return typeof t=="symbol"?t:t+""}function CS(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var am={curveBasisClosed:sN,curveBasisOpen:oN,curveBasis:iN,curveBumpX:WA,curveBumpY:HA,curveLinearClosed:lN,curveLinear:ho,curveMonotoneX:cN,curveMonotoneY:uN,curveNatural:dN,curveStep:fN,curveStepAfter:mN,curveStepBefore:hN},Hi=e=>er(e.x)&&er(e.y),Ba=e=>e.x,Fa=e=>e.y,SS=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(bi(e));return(r==="curveMonotone"||r==="curveBump")&&t?am["".concat(r).concat(t==="vertical"?"Y":"X")]:am[r]||ho},DS=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,o=SS(t,a),l=i?r.filter(Hi):r,d;if(Array.isArray(n)){var c=i?n.filter(f=>Hi(f)):n,u=l.map((f,h)=>nm(nm({},f),{},{base:c[h]}));return a==="vertical"?d=Li().y(Fa).x1(Ba).x0(f=>f.base.x):d=Li().x(Ba).y1(Fa).y0(f=>f.base.y),d.defined(Hi).curve(o),d(u)}return a==="vertical"&&X(n)?d=Li().y(Fa).x1(Ba).x0(n):X(n)?d=Li().x(Ba).y1(Fa).y0(n):d=yg().x(Ba).y(Fa),d.defined(Hi).curve(o),d(l)},Oo=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?DS(e):n;return w.createElement("path",tu({},le(e,!1),Xu(e),{className:ue("recharts-curve",t),d:i===null?void 0:i,ref:a}))},kS=["x","y","top","left","width","height","className"];function ru(){return ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ru.apply(null,arguments)}function im(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?im(Object(r),!0).forEach(function(n){OS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):im(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OS(e,t,r){return(t=TS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TS(e){var t=IS(e,"string");return typeof t=="symbol"?t:t+""}function IS(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BS(e,t){if(e==null)return{};var r,n,a=FS(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function FS(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MS=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),$S=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:l}=e,d=BS(e,kS),c=PS({x:t,y:r,top:n,left:a,width:i,height:o},d);return!X(t)||!X(r)||!X(i)||!X(o)||!X(n)||!X(a)?null:w.createElement("path",ru({},le(c,!0),{className:ue("recharts-cross",l),d:MS(t,r,i,o,n,a)}))};function RS(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function sm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sm(Object(r),!0).forEach(function(n){US(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function US(e,t,r){return(t=zS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zS(e){var t=KS(e,"string");return typeof t=="symbol"?t:t+""}function KS(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kt(e,t){var r=LS({},e),n=t,a=Object.keys(t),i=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var Rv={},Lv={},Uv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(Uv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uv,r=ld,n=vo,a=yo,i=go;function o(c,u,f){return l(c,u,void 0,void 0,void 0,void 0,f)}function l(c,u,f,h,m,x,g){const p=g(c,u,f,h,m,x);if(p!==void 0)return p;if(typeof c==typeof u)switch(typeof c){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return c===u;case"number":return c===u||Object.is(c,u);case"function":return c===u;case"object":return d(c,u,x,g)}return d(c,u,x,g)}function d(c,u,f,h){if(Object.is(c,u))return!0;let m=n.getTag(c),x=n.getTag(u);if(m===a.argumentsTag&&(m=a.objectTag),x===a.argumentsTag&&(x=a.objectTag),m!==x)return!1;switch(m){case a.stringTag:return c.toString()===u.toString();case a.numberTag:{const y=c.valueOf(),b=u.valueOf();return i.eq(y,b)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(c.valueOf(),u.valueOf());case a.regexpTag:return c.source===u.source&&c.flags===u.flags;case a.functionTag:return c===u}f=f??new Map;const g=f.get(c),p=f.get(u);if(g!=null&&p!=null)return g===u;f.set(c,u),f.set(u,c);try{switch(m){case a.mapTag:{if(c.size!==u.size)return!1;for(const[y,b]of c.entries())if(!u.has(y)||!l(b,u.get(y),y,c,u,f,h))return!1;return!0}case a.setTag:{if(c.size!==u.size)return!1;const y=Array.from(c.values()),b=Array.from(u.values());for(let v=0;v<y.length;v++){const j=y[v],E=b.findIndex(_=>l(j,_,void 0,c,u,f,h));if(E===-1)return!1;b.splice(E,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(c)!==Buffer.isBuffer(u)||c.length!==u.length)return!1;for(let y=0;y<c.length;y++)if(!l(c[y],u[y],y,c,u,f,h))return!1;return!0}case a.arrayBufferTag:return c.byteLength!==u.byteLength?!1:d(new Uint8Array(c),new Uint8Array(u),f,h);case a.dataViewTag:return c.byteLength!==u.byteLength||c.byteOffset!==u.byteOffset?!1:d(new Uint8Array(c),new Uint8Array(u),f,h);case a.errorTag:return c.name===u.name&&c.message===u.message;case a.objectTag:{if(!(d(c.constructor,u.constructor,f,h)||t.isPlainObject(c)&&t.isPlainObject(u)))return!1;const b=[...Object.keys(c),...r.getSymbols(c)],v=[...Object.keys(u),...r.getSymbols(u)];if(b.length!==v.length)return!1;for(let j=0;j<b.length;j++){const E=b[j],_=c[E];if(!Object.hasOwn(u,E))return!1;const C=u[E];if(!l(_,C,E,c,u,f,h))return!1}return!0}default:return!1}}finally{f.delete(c),f.delete(u)}}e.isEqualWith=o})(Lv);var zv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(zv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lv,r=zv;function n(a,i){return t.isEqualWith(a,i,r.noop)}e.isEqual=n})(Rv);var qS=Rv.isEqual;const WS=tr(qS);function HS(e){var t={},r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[d,...c]=l;if(typeof d=="number"){a=e.setTimeout(i.bind(null,c),d);return}i(d),a=e.setTimeout(i.bind(null,c));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var ys=1e-4,Kv=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],qv=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),om=(e,t)=>r=>{var n=Kv(e,t);return qv(n,r)},GS=(e,t)=>r=>{var n=Kv(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return qv(a,r)},lm=function(){for(var t,r,n,a,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var d=o[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,n,r,a]=d[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else o.length===4&&([t,n,r,a]=o);var c=om(t,r),u=om(n,a),f=GS(t,r),h=x=>x>1?1:x<0?0:x,m=x=>{for(var g=x>1?1:x,p=g,y=0;y<8;++y){var b=c(p)-g,v=f(p);if(Math.abs(b-g)<ys||v<ys)return u(p);p=h(p-b/v)}return u(p)};return m.isStepper=!1,m},VS=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,l,d)=>{var c=-(o-l)*r,u=d*n,f=d+(c-u)*a/1e3,h=d*a/1e3+o;return Math.abs(h-l)<ys&&Math.abs(f)<ys?[l,0]:[h,f]};return i.isStepper=!0,i.dt=a,i},YS=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return lm(e);case"spring":return VS();default:if(e.split("(")[0]==="cubic-bezier")return lm(e)}return typeof e=="function"?e:null};function cm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function um(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cm(Object(r),!0).forEach(function(n){XS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XS(e,t,r){return(t=JS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JS(e){var t=ZS(e,"string");return typeof t=="symbol"?t:t+""}function ZS(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QS=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),e4=(e,t,r)=>e.map(n=>"".concat(QS(n)," ").concat(t,"ms ").concat(r)).join(","),t4=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),ai=(e,t)=>Object.keys(t).reduce((r,n)=>um(um({},r),{},{[n]:e(n,t[n])}),{});function dm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dm(Object(r),!0).forEach(function(n){r4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r4(e,t,r){return(t=n4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n4(e){var t=a4(e,"string");return typeof t=="symbol"?t:t+""}function a4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bs=(e,t,r)=>e+(t-e)*r,nu=e=>{var{from:t,to:r}=e;return t!==r},Wv=(e,t,r)=>{var n=ai((a,i)=>{if(nu(i)){var[o,l]=e(i.from,i.to,i.velocity);return Je(Je({},i),{},{from:o,velocity:l})}return i},t);return r<1?ai((a,i)=>nu(i)?Je(Je({},i),{},{velocity:bs(i.velocity,n[a].velocity,r),from:bs(i.from,n[a].from,r)}):i,t):Wv(e,n,r-1)};function i4(e,t,r,n,a,i){var o,l=n.reduce((h,m)=>Je(Je({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),d=()=>ai((h,m)=>m.from,l),c=()=>!Object.values(l).filter(nu).length,u=null,f=h=>{o||(o=h);var m=h-o,x=m/r.dt;l=Wv(r,l,x),a(Je(Je(Je({},e),t),d())),o=h,c()||(u=i.setTimeout(f))};return()=>(u=i.setTimeout(f),()=>{u()})}function s4(e,t,r,n,a,i,o){var l=null,d=a.reduce((f,h)=>Je(Je({},f),{},{[h]:[e[h],t[h]]}),{}),c,u=f=>{c||(c=f);var h=(f-c)/n,m=ai((g,p)=>bs(...p,r(h)),d);if(i(Je(Je(Je({},e),t),m)),h<1)l=o.setTimeout(u);else{var x=ai((g,p)=>bs(...p,r(1)),d);i(Je(Je(Je({},e),t),x))}};return()=>(l=o.setTimeout(u),()=>{l()})}const o4=(e,t,r,n,a,i)=>{var o=t4(e,t);return r.isStepper===!0?i4(e,t,r,o,a,i):s4(e,t,r,n,o,a,i)};class l4{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}var c4=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},au.apply(null,arguments)}function u4(e,t){if(e==null)return{};var r,n,a=d4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function d4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fm(Object(r),!0).forEach(function(n){fn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fn(e,t,r){return(t=f4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f4(e){var t=h4(e,"string");return typeof t=="symbol"?t:t+""}function h4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m4(){return HS(new l4)}class Cd extends w.PureComponent{constructor(t,r){super(t,r),fn(this,"mounted",!1),fn(this,"manager",null),fn(this,"stopJSAnimation",null),fn(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:i,to:o,children:l,duration:d,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||d<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:a?{[a]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:i,to:o,from:l}=this.props,{style:d}=this.state;if(n){if(!r){var c={style:a?{[a]:o}:o};this.state&&d&&(a&&d[a]!==o||!a&&d!==o)&&this.setState(c);return}if(!(WS(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=u||i?l:t.to;if(this.state&&d){var h={style:a?{[a]:f}:f};(a&&d[a]!==f||!a&&d!==f)&&this.setState(h)}this.runAnimation(Ir(Ir({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:d}=t,c=o4(r,n,YS(i),a,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=c()};this.manager.start([d,o,u,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:i,easing:o,onAnimationStart:l,onAnimationEnd:d,children:c}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof c=="function"||o==="spring"){this.runJSAnimation(t);return}var u=a?{[a]:i}:i,f=e4(Object.keys(u),n,o);this.manager.start([l,r,Ir(Ir({},u),{},{transition:f}),n,d])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:i,easing:o,isActive:l,from:d,to:c,canBegin:u,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:x}=t,g=u4(t,c4),p=w.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||p===0||a<=0)return r;var b=v=>{var{style:j={},className:E}=v.props,_=w.cloneElement(v,Ir(Ir({},g),{},{style:Ir(Ir({},j),y),className:E}));return _};return p===1?b(w.Children.only(r)):w.createElement("div",null,w.Children.map(r,v=>b(v)))}}fn(Cd,"displayName","Animate");fn(Cd,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var p4=w.createContext(null);function Hr(e){var t,r,n=w.useContext(p4);return w.createElement(Cd,au({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:m4()}))}function ws(){return ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ws.apply(null,arguments)}var hm=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,c;if(i>0&&a instanceof Array){for(var u=[0,0,0,0],f=0,h=4;f<h;f++)u[f]=a[f]>i?i:a[f];c="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(d,",").concat(e+l*u[0],",").concat(t)),c+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+o*u[1])),c+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(d,`,
        `).concat(e+r-l*u[2],",").concat(t+n)),c+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-o*u[3])),c+="Z"}else if(i>0&&a===+a&&a>0){var m=Math.min(i,a);c="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(e,",").concat(t+n-o*m," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},x4={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Hv=e=>{var t=Kt(e,x4),r=w.useRef(null),[n,a]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:i,y:o,width:l,height:d,radius:c,className:u}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:x,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||d!==+d||l===0||d===0)return null;var p=ue("recharts-rectangle",u);return g?w.createElement(Hr,{canBegin:n>0,from:{width:l,height:d,x:i,y:o},to:{width:l,height:d,x:i,y:o},duration:h,animationEasing:f,isActive:g},y=>{var{width:b,height:v,x:j,y:E}=y;return w.createElement(Hr,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:x,easing:f},w.createElement("path",ws({},le(t,!0),{className:p,d:hm(j,E,b,v,c),ref:r})))}):w.createElement("path",ws({},le(t,!0),{className:p,d:hm(i,o,l,d,c)}))};function Gv(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=Be(t,r,n,a),l=Be(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iu.apply(null,arguments)}var g4=(e,t)=>{var r=at(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Gi=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:d}=e,c=l*(o?1:-1)+n,u=Math.asin(l/c)/gs,f=d?a:a+i*u,h=Be(t,r,c,f),m=Be(t,r,n,f),x=d?a-i*u:a,g=Be(t,r,c*Math.cos(u*gs),x);return{center:h,circleTangency:m,lineTangency:g,theta:u}},Vv=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,l=g4(i,o),d=i+l,c=Be(t,r,a,i),u=Be(t,r,a,d),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>d),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var h=Be(t,r,n,i),m=Be(t,r,n,d);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=d),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},v4=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:d,endAngle:c}=e,u=at(c-d),{circleTangency:f,lineTangency:h,theta:m}=Gi({cx:t,cy:r,radius:a,angle:d,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:x,lineTangency:g,theta:p}=Gi({cx:t,cy:r,radius:a,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(d-c):Math.abs(d-c)-m-p;if(y<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):Vv({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:d,endAngle:c});var b="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
  `);if(n>0){var{circleTangency:v,lineTangency:j,theta:E}=Gi({cx:t,cy:r,radius:n,angle:d,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:_,lineTangency:C,theta:A}=Gi({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),S=l?Math.abs(d-c):Math.abs(d-c)-E-A;if(S<0&&i===0)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(_.x,",").concat(_.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(S>180),",").concat(+(u>0),",").concat(v.x,",").concat(v.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b},y4={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Yv=e=>{var t=Kt(e,y4),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:d,startAngle:c,endAngle:u,className:f}=t;if(i<a||c===u)return null;var h=ue("recharts-sector",f),m=i-a,x=Bt(o,m,0,!0),g;return x>0&&Math.abs(c-u)<360?g=v4({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(x,m/2),forceCornerRadius:l,cornerIsExternal:d,startAngle:c,endAngle:u}):g=Vv({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:c,endAngle:u}),w.createElement("path",iu({},le(t,!0),{className:h,d:g}))};function b4(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:d,innerRadius:c,outerRadius:u,angle:f}=t,h=Be(l,d,c,f),m=Be(l,d,u,f);n=h.x,a=h.y,i=m.x,o=m.y}else return Gv(t);return[{x:n,y:a},{x:i,y:o}]}var Xv={},Jv={},Zv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dd;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Zv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zv;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Jv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fd,r=Jv;function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-a)/(o||1)),0),d=new Array(l);for(let c=0;c<l;c++)d[c]=a,a+=o;return d}e.range=n})(Xv);var w4=Xv.range;const Qv=tr(w4);function Kr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function j4(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sd(e){let t,r,n;e.length!==2?(t=Kr,r=(l,d)=>Kr(e(l),d),n=(l,d)=>e(l)-d):(t=e===Kr||e===j4?e:_4,r=e,n=e);function a(l,d,c=0,u=l.length){if(c<u){if(t(d,d)!==0)return u;do{const f=c+u>>>1;r(l[f],d)<0?c=f+1:u=f}while(c<u)}return c}function i(l,d,c=0,u=l.length){if(c<u){if(t(d,d)!==0)return u;do{const f=c+u>>>1;r(l[f],d)<=0?c=f+1:u=f}while(c<u)}return c}function o(l,d,c=0,u=l.length){const f=a(l,d,c,u-1);return f>c&&n(l[f-1],d)>-n(l[f],d)?f-1:f}return{left:a,center:o,right:i}}function _4(){return 0}function ey(e){return e===null?NaN:+e}function*A4(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const N4=Sd(Kr),_i=N4.right;Sd(ey).center;class mm extends Map{constructor(t,r=S4){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(pm(this,t))}has(t){return super.has(pm(this,t))}set(t,r){return super.set(E4(this,t),r)}delete(t){return super.delete(C4(this,t))}}function pm({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function E4({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function C4({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function S4(e){return e!==null&&typeof e=="object"?e.valueOf():e}function D4(e=Kr){if(e===Kr)return ty;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ty(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const k4=Math.sqrt(50),P4=Math.sqrt(10),O4=Math.sqrt(2);function js(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=k4?10:i>=P4?5:i>=O4?2:1;let l,d,c;return a<0?(c=Math.pow(10,-a)/o,l=Math.round(e*c),d=Math.round(t*c),l/c<e&&++l,d/c>t&&--d,c=-c):(c=Math.pow(10,a)*o,l=Math.round(e/c),d=Math.round(t/c),l*c<e&&++l,d*c>t&&--d),d<l&&.5<=r&&r<2?js(e,t,r*2):[l,d,c]}function su(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?js(t,e,r):js(e,t,r);if(!(i>=a))return[];const l=i-a+1,d=new Array(l);if(n)if(o<0)for(let c=0;c<l;++c)d[c]=(i-c)/-o;else for(let c=0;c<l;++c)d[c]=(i-c)*o;else if(o<0)for(let c=0;c<l;++c)d[c]=(a+c)/-o;else for(let c=0;c<l;++c)d[c]=(a+c)*o;return d}function ou(e,t,r){return t=+t,e=+e,r=+r,js(e,t,r)[2]}function lu(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?ou(t,e,r):ou(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function xm(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function gm(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function ry(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?ty:D4(a);n>r;){if(n-r>600){const d=n-r+1,c=t-r+1,u=Math.log(d),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(d-f)/d)*(c-d/2<0?-1:1),m=Math.max(r,Math.floor(t-c*f/d+h)),x=Math.min(n,Math.floor(t+(d-c)*f/d+h));ry(e,t,m,x,a)}const i=e[t];let o=r,l=n;for(Ma(e,r,t),a(e[n],i)>0&&Ma(e,r,n);o<l;){for(Ma(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Ma(e,r,l):(++l,Ma(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Ma(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function T4(e,t,r){if(e=Float64Array.from(A4(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return gm(e);if(t>=1)return xm(e);var n,a=(n-1)*t,i=Math.floor(a),o=xm(ry(e,i).subarray(0,i+1)),l=gm(e.subarray(i+1));return o+(l-o)*(a-i)}}function I4(e,t,r=ey){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function B4(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function qt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Sr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cu=Symbol("implicit");function Dd(){var e=new mm,t=[],r=[],n=cu;function a(i){let o=e.get(i);if(o===void 0){if(n!==cu)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new mm;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Dd(t,r).unknown(n)},qt.apply(a,arguments),a}function kd(){var e=Dd().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,d=0,c=0,u=.5;delete e.unknown;function f(){var h=t().length,m=a<n,x=m?a:n,g=m?n:a;i=(g-x)/Math.max(1,h-d+c*2),l&&(i=Math.floor(i)),x+=(g-x-i*(h-d))*u,o=i*(1-d),l&&(x=Math.round(x),o=Math.round(o));var p=B4(h).map(function(y){return x+i*y});return r(m?p.reverse():p)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(d=Math.min(1,c=+h),f()):d},e.paddingInner=function(h){return arguments.length?(d=Math.min(1,h),f()):d},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return kd(t(),[n,a]).round(l).paddingInner(d).paddingOuter(c).align(u)},qt.apply(f(),arguments)}function ny(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ny(t())},e}function F4(){return ny(kd.apply(null,arguments).paddingInner(1))}function Pd(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ay(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ai(){}var ii=.7,_s=1/ii,ta="\\s*([+-]?\\d+)\\s*",si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",or="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M4=/^#([0-9a-f]{3,8})$/,$4=new RegExp(`^rgb\\(${ta},${ta},${ta}\\)$`),R4=new RegExp(`^rgb\\(${or},${or},${or}\\)$`),L4=new RegExp(`^rgba\\(${ta},${ta},${ta},${si}\\)$`),U4=new RegExp(`^rgba\\(${or},${or},${or},${si}\\)$`),z4=new RegExp(`^hsl\\(${si},${or},${or}\\)$`),K4=new RegExp(`^hsla\\(${si},${or},${or},${si}\\)$`),vm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pd(Ai,oi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ym,formatHex:ym,formatHex8:q4,formatHsl:W4,formatRgb:bm,toString:bm});function ym(){return this.rgb().formatHex()}function q4(){return this.rgb().formatHex8()}function W4(){return iy(this).formatHsl()}function bm(){return this.rgb().formatRgb()}function oi(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=M4.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?wm(t):r===3?new ft(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Vi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Vi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$4.exec(e))?new ft(t[1],t[2],t[3],1):(t=R4.exec(e))?new ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=L4.exec(e))?Vi(t[1],t[2],t[3],t[4]):(t=U4.exec(e))?Vi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=z4.exec(e))?Am(t[1],t[2]/100,t[3]/100,1):(t=K4.exec(e))?Am(t[1],t[2]/100,t[3]/100,t[4]):vm.hasOwnProperty(e)?wm(vm[e]):e==="transparent"?new ft(NaN,NaN,NaN,0):null}function wm(e){return new ft(e>>16&255,e>>8&255,e&255,1)}function Vi(e,t,r,n){return n<=0&&(e=t=r=NaN),new ft(e,t,r,n)}function H4(e){return e instanceof Ai||(e=oi(e)),e?(e=e.rgb(),new ft(e.r,e.g,e.b,e.opacity)):new ft}function uu(e,t,r,n){return arguments.length===1?H4(e):new ft(e,t,r,n??1)}function ft(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Pd(ft,uu,ay(Ai,{brighter(e){return e=e==null?_s:Math.pow(_s,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ii:Math.pow(ii,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ft(yn(this.r),yn(this.g),yn(this.b),As(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jm,formatHex:jm,formatHex8:G4,formatRgb:_m,toString:_m}));function jm(){return`#${hn(this.r)}${hn(this.g)}${hn(this.b)}`}function G4(){return`#${hn(this.r)}${hn(this.g)}${hn(this.b)}${hn((isNaN(this.opacity)?1:this.opacity)*255)}`}function _m(){const e=As(this.opacity);return`${e===1?"rgb(":"rgba("}${yn(this.r)}, ${yn(this.g)}, ${yn(this.b)}${e===1?")":`, ${e})`}`}function As(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hn(e){return e=yn(e),(e<16?"0":"")+e.toString(16)}function Am(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Jt(e,t,r,n)}function iy(e){if(e instanceof Jt)return new Jt(e.h,e.s,e.l,e.opacity);if(e instanceof Ai||(e=oi(e)),!e)return new Jt;if(e instanceof Jt)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,d=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=d<.5?i+a:2-i-a,o*=60):l=d>0&&d<1?0:o,new Jt(o,l,d,e.opacity)}function V4(e,t,r,n){return arguments.length===1?iy(e):new Jt(e,t,r,n??1)}function Jt(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Pd(Jt,V4,ay(Ai,{brighter(e){return e=e==null?_s:Math.pow(_s,e),new Jt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ii:Math.pow(ii,e),new Jt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ft(rc(e>=240?e-240:e+120,a,n),rc(e,a,n),rc(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Jt(Nm(this.h),Yi(this.s),Yi(this.l),As(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=As(this.opacity);return`${e===1?"hsl(":"hsla("}${Nm(this.h)}, ${Yi(this.s)*100}%, ${Yi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Nm(e){return e=(e||0)%360,e<0?e+360:e}function Yi(e){return Math.max(0,Math.min(1,e||0))}function rc(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Od=e=>()=>e;function Y4(e,t){return function(r){return e+r*t}}function X4(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function J4(e){return(e=+e)==1?sy:function(t,r){return r-t?X4(t,r,e):Od(isNaN(t)?r:t)}}function sy(e,t){var r=t-e;return r?Y4(e,r):Od(isNaN(e)?t:e)}const Em=function e(t){var r=J4(t);function n(a,i){var o=r((a=uu(a)).r,(i=uu(i)).r),l=r(a.g,i.g),d=r(a.b,i.b),c=sy(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=d(u),a.opacity=c(u),a+""}}return n.gamma=e,n}(1);function Z4(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function Q4(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function eD(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=ja(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function tD(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ns(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function rD(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=ja(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var du=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nc=new RegExp(du.source,"g");function nD(e){return function(){return e}}function aD(e){return function(t){return e(t)+""}}function iD(e,t){var r=du.lastIndex=nc.lastIndex=0,n,a,i,o=-1,l=[],d=[];for(e=e+"",t=t+"";(n=du.exec(e))&&(a=nc.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,d.push({i:o,x:Ns(n,a)})),r=nc.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?aD(d[0].x):nD(t):(t=d.length,function(c){for(var u=0,f;u<t;++u)l[(f=d[u]).i]=f.x(c);return l.join("")})}function ja(e,t){var r=typeof t,n;return t==null||r==="boolean"?Od(t):(r==="number"?Ns:r==="string"?(n=oi(t))?(t=n,Em):iD:t instanceof oi?Em:t instanceof Date?tD:Q4(t)?Z4:Array.isArray(t)?eD:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?rD:Ns)(e,t)}function Td(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function sD(e,t){t===void 0&&(t=e,e=ja);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function oD(e){return function(){return e}}function Es(e){return+e}var Cm=[0,1];function it(e){return e}function fu(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:oD(isNaN(t)?NaN:.5)}function lD(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function cD(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=fu(a,n),i=r(o,i)):(n=fu(n,a),i=r(i,o)),function(l){return i(n(l))}}function uD(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=fu(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var d=_i(e,l,1,n)-1;return i[d](a[d](l))}}function Ni(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function To(){var e=Cm,t=Cm,r=ja,n,a,i,o=it,l,d,c;function u(){var h=Math.min(e.length,t.length);return o!==it&&(o=lD(e[0],e[h-1])),l=h>2?uD:cD,d=c=null,f}function f(h){return h==null||isNaN(h=+h)?i:(d||(d=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((c||(c=l(t,e.map(n),Ns)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Es),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=Td,u()},f.clamp=function(h){return arguments.length?(o=h?!0:it,u()):o!==it},f.interpolate=function(h){return arguments.length?(r=h,u()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,u()}}function Id(){return To()(it,it)}function dD(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Cs(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ua(e){return e=Cs(Math.abs(e)),e?e[1]:NaN}function fD(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],d=0;a>0&&l>0&&(d+l+1>n&&(l=Math.max(1,n-d)),i.push(r.substring(a-=l,a+l)),!((d+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function hD(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var mD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function li(e){if(!(t=mD.exec(e)))throw new Error("invalid format: "+e);var t;return new Bd({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}li.prototype=Bd.prototype;function Bd(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Bd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pD(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var oy;function xD(e,t){var r=Cs(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(oy=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Cs(e,Math.max(0,t+i-1))[0]}function Sm(e,t){var r=Cs(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Dm={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dD,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sm(e*100,t),r:Sm,s:xD,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function km(e){return e}var Pm=Array.prototype.map,Om=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function gD(e){var t=e.grouping===void 0||e.thousands===void 0?km:fD(Pm.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?km:hD(Pm.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function c(f){f=li(f);var h=f.fill,m=f.align,x=f.sign,g=f.symbol,p=f.zero,y=f.width,b=f.comma,v=f.precision,j=f.trim,E=f.type;E==="n"?(b=!0,E="g"):Dm[E]||(v===void 0&&(v=12),j=!0,E="g"),(p||h==="0"&&m==="=")&&(p=!0,h="0",m="=");var _=g==="$"?r:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",C=g==="$"?n:/[%p]/.test(E)?o:"",A=Dm[E],S=/[defgprs%]/.test(E);v=v===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function N(D){var k=_,P=C,R,B,z;if(E==="c")P=A(D)+P,D="";else{D=+D;var $=D<0||1/D<0;if(D=isNaN(D)?d:A(Math.abs(D),v),j&&(D=pD(D)),$&&+D==0&&x!=="+"&&($=!1),k=($?x==="("?x:l:x==="-"||x==="("?"":x)+k,P=(E==="s"?Om[8+oy/3]:"")+P+($&&x==="("?")":""),S){for(R=-1,B=D.length;++R<B;)if(z=D.charCodeAt(R),48>z||z>57){P=(z===46?a+D.slice(R+1):D.slice(R))+P,D=D.slice(0,R);break}}}b&&!p&&(D=t(D,1/0));var q=k.length+D.length+P.length,K=q<y?new Array(y-q+1).join(h):"";switch(b&&p&&(D=t(K+D,K.length?y-P.length:1/0),K=""),m){case"<":D=k+D+P+K;break;case"=":D=k+K+D+P;break;case"^":D=K.slice(0,q=K.length>>1)+k+D+P+K.slice(q);break;default:D=K+k+D+P;break}return i(D)}return N.toString=function(){return f+""},N}function u(f,h){var m=c((f=li(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(ua(h)/3)))*3,g=Math.pow(10,-x),p=Om[8+x/3];return function(y){return m(g*y)+p}}return{format:c,formatPrefix:u}}var Xi,Fd,ly;vD({thousands:",",grouping:[3],currency:["$",""]});function vD(e){return Xi=gD(e),Fd=Xi.format,ly=Xi.formatPrefix,Xi}function yD(e){return Math.max(0,-ua(Math.abs(e)))}function bD(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ua(t)/3)))*3-ua(Math.abs(e)))}function wD(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ua(t)-ua(e))+1}function cy(e,t,r,n){var a=lu(e,t,r),i;switch(n=li(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=bD(a,o))&&(n.precision=i),ly(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=wD(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=yD(a))&&(n.precision=i-(n.type==="%")*2);break}}return Fd(n)}function Xr(e){var t=e.domain;return e.ticks=function(r){var n=t();return su(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return cy(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],d,c,u=10;for(l<o&&(c=o,o=l,l=c,c=a,a=i,i=c);u-- >0;){if(c=ou(o,l,r),c===d)return n[a]=o,n[i]=l,t(n);if(c>0)o=Math.floor(o/c)*c,l=Math.ceil(l/c)*c;else if(c<0)o=Math.ceil(o*c)/c,l=Math.floor(l*c)/c;else break;d=c}return e},e}function uy(){var e=Id();return e.copy=function(){return Ni(e,uy())},qt.apply(e,arguments),Xr(e)}function dy(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Es),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return dy(e).unknown(t)},e=arguments.length?Array.from(e,Es):[0,1],Xr(r)}function fy(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function Tm(e){return Math.log(e)}function Im(e){return Math.exp(e)}function jD(e){return-Math.log(-e)}function _D(e){return-Math.exp(-e)}function AD(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ND(e){return e===10?AD:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ED(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Bm(e){return(t,r)=>-e(-t,r)}function Md(e){const t=e(Tm,Im),r=t.domain;let n=10,a,i;function o(){return a=ED(n),i=ND(n),r()[0]<0?(a=Bm(a),i=Bm(i),e(jD,_D)):e(Tm,Im),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const d=r();let c=d[0],u=d[d.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=a(c),m=a(u),x,g;const p=l==null?10:+l;let y=[];if(!(n%1)&&m-h<p){if(h=Math.floor(h),m=Math.ceil(m),c>0){for(;h<=m;++h)for(x=1;x<n;++x)if(g=h<0?x/i(-h):x*i(h),!(g<c)){if(g>u)break;y.push(g)}}else for(;h<=m;++h)for(x=n-1;x>=1;--x)if(g=h>0?x/i(-h):x*i(h),!(g<c)){if(g>u)break;y.push(g)}y.length*2<p&&(y=su(c,u,p))}else y=su(h,m,Math.min(m-h,p)).map(i);return f?y.reverse():y},t.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=li(d)).precision==null&&(d.trim=!0),d=Fd(d)),l===1/0)return d;const c=Math.max(1,n*l/t.ticks().length);return u=>{let f=u/i(Math.round(a(u)));return f*n<n-.5&&(f*=n),f<=c?d(u):""}},t.nice=()=>r(fy(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function hy(){const e=Md(To()).domain([1,10]);return e.copy=()=>Ni(e,hy()).base(e.base()),qt.apply(e,arguments),e}function Fm(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Mm(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $d(e){var t=1,r=e(Fm(t),Mm(t));return r.constant=function(n){return arguments.length?e(Fm(t=+n),Mm(t)):t},Xr(r)}function my(){var e=$d(To());return e.copy=function(){return Ni(e,my()).constant(e.constant())},qt.apply(e,arguments)}function $m(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function CD(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function SD(e){return e<0?-e*e:e*e}function Rd(e){var t=e(it,it),r=1;function n(){return r===1?e(it,it):r===.5?e(CD,SD):e($m(r),$m(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Xr(t)}function Ld(){var e=Rd(To());return e.copy=function(){return Ni(e,Ld()).exponent(e.exponent())},qt.apply(e,arguments),e}function DD(){return Ld.apply(null,arguments).exponent(.5)}function Rm(e){return Math.sign(e)*e*e}function kD(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function py(){var e=Id(),t=[0,1],r=!1,n;function a(i){var o=kD(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(Rm(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Es)).map(Rm)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return py(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},qt.apply(a,arguments),Xr(a)}function xy(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=I4(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[_i(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Kr),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return xy().domain(e).range(t).unknown(n)},qt.apply(i,arguments)}function gy(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[_i(n,d,0,r)]:i}function l(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,l()):[e,t]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,l()):a.slice()},o.invertExtent=function(d){var c=a.indexOf(d);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return gy().domain([e,t]).range(a).unknown(i)},qt.apply(Xr(o),arguments)}function vy(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[_i(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return vy().domain(e).range(t).unknown(r)},qt.apply(a,arguments)}const ac=new Date,ic=new Date;function Le(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const d=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let c;do d.push(c=new Date(+i)),t(i,l),e(i);while(c<i&&i<o);return d},a.filter=i=>Le(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(ac.setTime(+i),ic.setTime(+o),e(ac),e(ic),Math.floor(r(ac,ic))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Ss=Le(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ss.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Le(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Ss);Ss.range;const mr=1e3,It=mr*60,pr=It*60,wr=pr*24,Ud=wr*7,Lm=wr*30,sc=wr*365,mn=Le(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*mr)},(e,t)=>(t-e)/mr,e=>e.getUTCSeconds());mn.range;const zd=Le(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mr)},(e,t)=>{e.setTime(+e+t*It)},(e,t)=>(t-e)/It,e=>e.getMinutes());zd.range;const Kd=Le(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*It)},(e,t)=>(t-e)/It,e=>e.getUTCMinutes());Kd.range;const qd=Le(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mr-e.getMinutes()*It)},(e,t)=>{e.setTime(+e+t*pr)},(e,t)=>(t-e)/pr,e=>e.getHours());qd.range;const Wd=Le(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*pr)},(e,t)=>(t-e)/pr,e=>e.getUTCHours());Wd.range;const Ei=Le(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*It)/wr,e=>e.getDate()-1);Ei.range;const Io=Le(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wr,e=>e.getUTCDate()-1);Io.range;const yy=Le(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wr,e=>Math.floor(e/wr));yy.range;function In(e){return Le(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*It)/Ud)}const Bo=In(0),Ds=In(1),PD=In(2),OD=In(3),da=In(4),TD=In(5),ID=In(6);Bo.range;Ds.range;PD.range;OD.range;da.range;TD.range;ID.range;function Bn(e){return Le(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ud)}const Fo=Bn(0),ks=Bn(1),BD=Bn(2),FD=Bn(3),fa=Bn(4),MD=Bn(5),$D=Bn(6);Fo.range;ks.range;BD.range;FD.range;fa.range;MD.range;$D.range;const Hd=Le(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Hd.range;const Gd=Le(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Gd.range;const jr=Le(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());jr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Le(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});jr.range;const _r=Le(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_r.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Le(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});_r.range;function by(e,t,r,n,a,i){const o=[[mn,1,mr],[mn,5,5*mr],[mn,15,15*mr],[mn,30,30*mr],[i,1,It],[i,5,5*It],[i,15,15*It],[i,30,30*It],[a,1,pr],[a,3,3*pr],[a,6,6*pr],[a,12,12*pr],[n,1,wr],[n,2,2*wr],[r,1,Ud],[t,1,Lm],[t,3,3*Lm],[e,1,sc]];function l(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const m=f&&typeof f.range=="function"?f:d(c,u,f),x=m?m.range(c,+u+1):[];return h?x.reverse():x}function d(c,u,f){const h=Math.abs(u-c)/f,m=Sd(([,,p])=>p).right(o,h);if(m===o.length)return e.every(lu(c/sc,u/sc,f));if(m===0)return Ss.every(Math.max(lu(c,u,f),1));const[x,g]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return x.every(g)}return[l,d]}const[RD,LD]=by(_r,Gd,Fo,yy,Wd,Kd),[UD,zD]=by(jr,Hd,Bo,Ei,qd,zd);function oc(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function lc(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $a(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function KD(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,d=e.shortMonths,c=Ra(a),u=La(a),f=Ra(i),h=La(i),m=Ra(o),x=La(o),g=Ra(l),p=La(l),y=Ra(d),b=La(d),v={a:$,A:q,b:K,B:Z,c:null,d:Hm,e:Hm,f:fk,g:jk,G:Ak,H:ck,I:uk,j:dk,L:wy,m:hk,M:mk,p:I,q:O,Q:Ym,s:Xm,S:pk,u:xk,U:gk,V:vk,w:yk,W:bk,x:null,X:null,y:wk,Y:_k,Z:Nk,"%":Vm},j={a:T,A:M,b:Q,B:ne,c:null,d:Gm,e:Gm,f:Dk,g:Rk,G:Uk,H:Ek,I:Ck,j:Sk,L:_y,m:kk,M:Pk,p:fe,q:H,Q:Ym,s:Xm,S:Ok,u:Tk,U:Ik,V:Bk,w:Fk,W:Mk,x:null,X:null,y:$k,Y:Lk,Z:zk,"%":Vm},E={a:N,A:D,b:k,B:P,c:R,d:qm,e:qm,f:ik,g:Km,G:zm,H:Wm,I:Wm,j:tk,L:ak,m:ek,M:rk,p:S,q:QD,Q:ok,s:lk,S:nk,u:VD,U:YD,V:XD,w:GD,W:JD,x:B,X:z,y:Km,Y:zm,Z:ZD,"%":sk};v.x=_(r,v),v.X=_(n,v),v.c=_(t,v),j.x=_(r,j),j.X=_(n,j),j.c=_(t,j);function _(U,V){return function(W){var L=[],ae=-1,G=0,ie=U.length,te,Ae,re;for(W instanceof Date||(W=new Date(+W));++ae<ie;)U.charCodeAt(ae)===37&&(L.push(U.slice(G,ae)),(Ae=Um[te=U.charAt(++ae)])!=null?te=U.charAt(++ae):Ae=te==="e"?" ":"0",(re=V[te])&&(te=re(W,Ae)),L.push(te),G=ae+1);return L.push(U.slice(G,ae)),L.join("")}}function C(U,V){return function(W){var L=$a(1900,void 0,1),ae=A(L,U,W+="",0),G,ie;if(ae!=W.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(V&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(G=lc($a(L.y,0,1)),ie=G.getUTCDay(),G=ie>4||ie===0?ks.ceil(G):ks(G),G=Io.offset(G,(L.V-1)*7),L.y=G.getUTCFullYear(),L.m=G.getUTCMonth(),L.d=G.getUTCDate()+(L.w+6)%7):(G=oc($a(L.y,0,1)),ie=G.getDay(),G=ie>4||ie===0?Ds.ceil(G):Ds(G),G=Ei.offset(G,(L.V-1)*7),L.y=G.getFullYear(),L.m=G.getMonth(),L.d=G.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),ie="Z"in L?lc($a(L.y,0,1)).getUTCDay():oc($a(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(ie+5)%7:L.w+L.U*7-(ie+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,lc(L)):oc(L)}}function A(U,V,W,L){for(var ae=0,G=V.length,ie=W.length,te,Ae;ae<G;){if(L>=ie)return-1;if(te=V.charCodeAt(ae++),te===37){if(te=V.charAt(ae++),Ae=E[te in Um?V.charAt(ae++):te],!Ae||(L=Ae(U,W,L))<0)return-1}else if(te!=W.charCodeAt(L++))return-1}return L}function S(U,V,W){var L=c.exec(V.slice(W));return L?(U.p=u.get(L[0].toLowerCase()),W+L[0].length):-1}function N(U,V,W){var L=m.exec(V.slice(W));return L?(U.w=x.get(L[0].toLowerCase()),W+L[0].length):-1}function D(U,V,W){var L=f.exec(V.slice(W));return L?(U.w=h.get(L[0].toLowerCase()),W+L[0].length):-1}function k(U,V,W){var L=y.exec(V.slice(W));return L?(U.m=b.get(L[0].toLowerCase()),W+L[0].length):-1}function P(U,V,W){var L=g.exec(V.slice(W));return L?(U.m=p.get(L[0].toLowerCase()),W+L[0].length):-1}function R(U,V,W){return A(U,t,V,W)}function B(U,V,W){return A(U,r,V,W)}function z(U,V,W){return A(U,n,V,W)}function $(U){return o[U.getDay()]}function q(U){return i[U.getDay()]}function K(U){return d[U.getMonth()]}function Z(U){return l[U.getMonth()]}function I(U){return a[+(U.getHours()>=12)]}function O(U){return 1+~~(U.getMonth()/3)}function T(U){return o[U.getUTCDay()]}function M(U){return i[U.getUTCDay()]}function Q(U){return d[U.getUTCMonth()]}function ne(U){return l[U.getUTCMonth()]}function fe(U){return a[+(U.getUTCHours()>=12)]}function H(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var V=_(U+="",v);return V.toString=function(){return U},V},parse:function(U){var V=C(U+="",!1);return V.toString=function(){return U},V},utcFormat:function(U){var V=_(U+="",j);return V.toString=function(){return U},V},utcParse:function(U){var V=C(U+="",!0);return V.toString=function(){return U},V}}}var Um={"-":"",_:" ",0:"0"},Ve=/^\s*\d+/,qD=/^%/,WD=/[\\^$*+?|[\]().{}]/g;function de(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function HD(e){return e.replace(WD,"\\$&")}function Ra(e){return new RegExp("^(?:"+e.map(HD).join("|")+")","i")}function La(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function GD(e,t,r){var n=Ve.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function VD(e,t,r){var n=Ve.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function YD(e,t,r){var n=Ve.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function XD(e,t,r){var n=Ve.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function JD(e,t,r){var n=Ve.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function zm(e,t,r){var n=Ve.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Km(e,t,r){var n=Ve.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ZD(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function QD(e,t,r){var n=Ve.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function ek(e,t,r){var n=Ve.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function qm(e,t,r){var n=Ve.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function tk(e,t,r){var n=Ve.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Wm(e,t,r){var n=Ve.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function rk(e,t,r){var n=Ve.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function nk(e,t,r){var n=Ve.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function ak(e,t,r){var n=Ve.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function ik(e,t,r){var n=Ve.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function sk(e,t,r){var n=qD.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function ok(e,t,r){var n=Ve.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function lk(e,t,r){var n=Ve.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Hm(e,t){return de(e.getDate(),t,2)}function ck(e,t){return de(e.getHours(),t,2)}function uk(e,t){return de(e.getHours()%12||12,t,2)}function dk(e,t){return de(1+Ei.count(jr(e),e),t,3)}function wy(e,t){return de(e.getMilliseconds(),t,3)}function fk(e,t){return wy(e,t)+"000"}function hk(e,t){return de(e.getMonth()+1,t,2)}function mk(e,t){return de(e.getMinutes(),t,2)}function pk(e,t){return de(e.getSeconds(),t,2)}function xk(e){var t=e.getDay();return t===0?7:t}function gk(e,t){return de(Bo.count(jr(e)-1,e),t,2)}function jy(e){var t=e.getDay();return t>=4||t===0?da(e):da.ceil(e)}function vk(e,t){return e=jy(e),de(da.count(jr(e),e)+(jr(e).getDay()===4),t,2)}function yk(e){return e.getDay()}function bk(e,t){return de(Ds.count(jr(e)-1,e),t,2)}function wk(e,t){return de(e.getFullYear()%100,t,2)}function jk(e,t){return e=jy(e),de(e.getFullYear()%100,t,2)}function _k(e,t){return de(e.getFullYear()%1e4,t,4)}function Ak(e,t){var r=e.getDay();return e=r>=4||r===0?da(e):da.ceil(e),de(e.getFullYear()%1e4,t,4)}function Nk(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+de(t/60|0,"0",2)+de(t%60,"0",2)}function Gm(e,t){return de(e.getUTCDate(),t,2)}function Ek(e,t){return de(e.getUTCHours(),t,2)}function Ck(e,t){return de(e.getUTCHours()%12||12,t,2)}function Sk(e,t){return de(1+Io.count(_r(e),e),t,3)}function _y(e,t){return de(e.getUTCMilliseconds(),t,3)}function Dk(e,t){return _y(e,t)+"000"}function kk(e,t){return de(e.getUTCMonth()+1,t,2)}function Pk(e,t){return de(e.getUTCMinutes(),t,2)}function Ok(e,t){return de(e.getUTCSeconds(),t,2)}function Tk(e){var t=e.getUTCDay();return t===0?7:t}function Ik(e,t){return de(Fo.count(_r(e)-1,e),t,2)}function Ay(e){var t=e.getUTCDay();return t>=4||t===0?fa(e):fa.ceil(e)}function Bk(e,t){return e=Ay(e),de(fa.count(_r(e),e)+(_r(e).getUTCDay()===4),t,2)}function Fk(e){return e.getUTCDay()}function Mk(e,t){return de(ks.count(_r(e)-1,e),t,2)}function $k(e,t){return de(e.getUTCFullYear()%100,t,2)}function Rk(e,t){return e=Ay(e),de(e.getUTCFullYear()%100,t,2)}function Lk(e,t){return de(e.getUTCFullYear()%1e4,t,4)}function Uk(e,t){var r=e.getUTCDay();return e=r>=4||r===0?fa(e):fa.ceil(e),de(e.getUTCFullYear()%1e4,t,4)}function zk(){return"+0000"}function Vm(){return"%"}function Ym(e){return+e}function Xm(e){return Math.floor(+e/1e3)}var Wn,Ny,Ey;Kk({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kk(e){return Wn=KD(e),Ny=Wn.format,Wn.parse,Ey=Wn.utcFormat,Wn.utcParse,Wn}function qk(e){return new Date(e)}function Wk(e){return e instanceof Date?+e:+new Date(+e)}function Vd(e,t,r,n,a,i,o,l,d,c){var u=Id(),f=u.invert,h=u.domain,m=c(".%L"),x=c(":%S"),g=c("%I:%M"),p=c("%I %p"),y=c("%a %d"),b=c("%b %d"),v=c("%B"),j=c("%Y");function E(_){return(d(_)<_?m:l(_)<_?x:o(_)<_?g:i(_)<_?p:n(_)<_?a(_)<_?y:b:r(_)<_?v:j)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?h(Array.from(_,Wk)):h().map(qk)},u.ticks=function(_){var C=h();return e(C[0],C[C.length-1],_??10)},u.tickFormat=function(_,C){return C==null?E:c(C)},u.nice=function(_){var C=h();return(!_||typeof _.range!="function")&&(_=t(C[0],C[C.length-1],_??10)),_?h(fy(C,_)):u},u.copy=function(){return Ni(u,Vd(e,t,r,n,a,i,o,l,d,c))},u}function Hk(){return qt.apply(Vd(UD,zD,jr,Hd,Bo,Ei,qd,zd,mn,Ny).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Gk(){return qt.apply(Vd(RD,LD,_r,Gd,Fo,Io,Wd,Kd,mn,Ey).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mo(){var e=0,t=1,r,n,a,i,o=it,l=!1,d;function c(f){return f==null||isNaN(f=+f)?d:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(f){return arguments.length?(l=!!f,c):l},c.interpolator=function(f){return arguments.length?(o=f,c):o};function u(f){return function(h){var m,x;return arguments.length?([m,x]=h,o=f(m,x),c):[o(0),o(1)]}}return c.range=u(ja),c.rangeRound=u(Td),c.unknown=function(f){return arguments.length?(d=f,c):d},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),c}}function Jr(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Cy(){var e=Xr(Mo()(it));return e.copy=function(){return Jr(e,Cy())},Sr.apply(e,arguments)}function Sy(){var e=Md(Mo()).domain([1,10]);return e.copy=function(){return Jr(e,Sy()).base(e.base())},Sr.apply(e,arguments)}function Dy(){var e=$d(Mo());return e.copy=function(){return Jr(e,Dy()).constant(e.constant())},Sr.apply(e,arguments)}function Yd(){var e=Rd(Mo());return e.copy=function(){return Jr(e,Yd()).exponent(e.exponent())},Sr.apply(e,arguments)}function Vk(){return Yd.apply(null,arguments).exponent(.5)}function ky(){var e=[],t=it;function r(n){if(n!=null&&!isNaN(n=+n))return t((_i(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Kr),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>T4(e,i/n))},r.copy=function(){return ky(t).domain(e)},Sr.apply(r,arguments)}function $o(){var e=0,t=.5,r=1,n=1,a,i,o,l,d,c=it,u,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-i)*(n*g<n*i?l:d),c(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=u(e=+e),i=u(t=+t),o=u(r=+r),l=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(c=g,m):c};function x(g){return function(p){var y,b,v;return arguments.length?([y,b,v]=p,c=sD(g,[y,b,v]),m):[c(0),c(.5),c(1)]}}return m.range=x(ja),m.rangeRound=x(Td),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return u=g,a=g(e),i=g(t),o=g(r),l=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function Py(){var e=Xr($o()(it));return e.copy=function(){return Jr(e,Py())},Sr.apply(e,arguments)}function Oy(){var e=Md($o()).domain([.1,1,10]);return e.copy=function(){return Jr(e,Oy()).base(e.base())},Sr.apply(e,arguments)}function Ty(){var e=$d($o());return e.copy=function(){return Jr(e,Ty()).constant(e.constant())},Sr.apply(e,arguments)}function Xd(){var e=Rd($o());return e.copy=function(){return Jr(e,Xd()).exponent(e.exponent())},Sr.apply(e,arguments)}function Yk(){return Xd.apply(null,arguments).exponent(.5)}const Wa=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kd,scaleDiverging:Py,scaleDivergingLog:Oy,scaleDivergingPow:Xd,scaleDivergingSqrt:Yk,scaleDivergingSymlog:Ty,scaleIdentity:dy,scaleImplicit:cu,scaleLinear:uy,scaleLog:hy,scaleOrdinal:Dd,scalePoint:F4,scalePow:Ld,scaleQuantile:xy,scaleQuantize:gy,scaleRadial:py,scaleSequential:Cy,scaleSequentialLog:Sy,scaleSequentialPow:Yd,scaleSequentialQuantile:ky,scaleSequentialSqrt:Vk,scaleSequentialSymlog:Dy,scaleSqrt:DD,scaleSymlog:my,scaleThreshold:vy,scaleTime:Hk,scaleUtc:Gk,tickFormat:cy},Symbol.toStringTag,{value:"Module"}));var Fn=e=>e.chartData,Jd=F([Fn],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Zd=(e,t,r,n)=>n?Jd(e):Fn(e);function ha(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(er(t)&&er(r))return!0}return!1}function Jm(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Xk(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(er(r))a=r;else if(typeof r=="function")return;if(er(n))i=n;else if(typeof n=="function")return;var o=[a,i];if(ha(o))return o}}function Jk(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(ha(n))return Jm(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(X(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&Gh.test(a)){var d=Gh.exec(a);if(d==null||t==null)o=void 0;else{var c=+d[1];o=t[0]-c}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(X(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&Vh.test(i)){var u=Vh.exec(i);if(u==null||t==null)l=void 0;else{var f=+u[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(ha(h))return t==null?h:Jm(h,t,r)}}}var _a=1e9,Zk={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},e0,Ne=!0,$t="[DecimalError] ",bn=$t+"Invalid argument: ",Qd=$t+"Exponent out of range: ",Aa=Math.floor,on=Math.pow,Qk=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,jt,Ke=1e7,je=7,Iy=9007199254740991,Ps=Aa(Iy/je),Y={};Y.absoluteValue=Y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Y.comparedTo=Y.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Y.decimalPlaces=Y.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*je;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Y.dividedBy=Y.div=function(e){return yr(this,new this.constructor(e))};Y.dividedToIntegerBy=Y.idiv=function(e){var t=this,r=t.constructor;return ge(yr(t,new r(e),0,1),r.precision)};Y.equals=Y.eq=function(e){return!this.cmp(e)};Y.exponent=function(){return Fe(this)};Y.greaterThan=Y.gt=function(e){return this.cmp(e)>0};Y.greaterThanOrEqualTo=Y.gte=function(e){return this.cmp(e)>=0};Y.isInteger=Y.isint=function(){return this.e>this.d.length-2};Y.isNegative=Y.isneg=function(){return this.s<0};Y.isPositive=Y.ispos=function(){return this.s>0};Y.isZero=function(){return this.s===0};Y.lessThan=Y.lt=function(e){return this.cmp(e)<0};Y.lessThanOrEqualTo=Y.lte=function(e){return this.cmp(e)<1};Y.logarithm=Y.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(jt))throw Error($t+"NaN");if(r.s<1)throw Error($t+(r.s?"NaN":"-Infinity"));return r.eq(jt)?new n(0):(Ne=!1,t=yr(ci(r,i),ci(e,i),i),Ne=!0,ge(t,a))};Y.minus=Y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?My(t,e):By(t,(e.s=-e.s,e))};Y.modulo=Y.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error($t+"NaN");return r.s?(Ne=!1,t=yr(r,e,0,1).times(e),Ne=!0,r.minus(t)):ge(new n(r),a)};Y.naturalExponential=Y.exp=function(){return Fy(this)};Y.naturalLogarithm=Y.ln=function(){return ci(this)};Y.negated=Y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Y.plus=Y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?By(t,e):My(t,(e.s=-e.s,e))};Y.precision=Y.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(bn+e);if(t=Fe(a)+1,n=a.d.length-1,r=n*je+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Y.squareRoot=Y.sqrt=function(){var e,t,r,n,a,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error($t+"NaN")}for(e=Fe(l),Ne=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=ir(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Aa((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(yr(l,i,o+2)).times(.5),ir(i.d).slice(0,o)===(t=ir(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(ge(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Ne=!0,ge(n,r)};Y.times=Y.mul=function(e){var t,r,n,a,i,o,l,d,c,u=this,f=u.constructor,h=u.d,m=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,d=h.length,c=m.length,d<c&&(i=h,h=m,m=i,o=d,d=c,c=o),i=[],o=d+c,n=o;n--;)i.push(0);for(n=c;--n>=0;){for(t=0,a=d+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%Ke|0,t=l/Ke|0;i[a]=(i[a]+t)%Ke|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ne?ge(e,f.precision):e};Y.toDecimalPlaces=Y.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(cr(e,0,_a),t===void 0?t=n.rounding:cr(t,0,8),ge(r,e+Fe(r)+1,t))};Y.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Cn(n,!0):(cr(e,0,_a),t===void 0?t=a.rounding:cr(t,0,8),n=ge(new a(n),e+1,t),r=Cn(n,!0,e+1)),r};Y.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Cn(a):(cr(e,0,_a),t===void 0?t=i.rounding:cr(t,0,8),n=ge(new i(a),e+Fe(a)+1,t),r=Cn(n.abs(),!1,e+Fe(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Y.toInteger=Y.toint=function(){var e=this,t=e.constructor;return ge(new t(e),Fe(e)+1,t.rounding)};Y.toNumber=function(){return+this};Y.toPower=Y.pow=function(e){var t,r,n,a,i,o,l=this,d=l.constructor,c=12,u=+(e=new d(e));if(!e.s)return new d(jt);if(l=new d(l),!l.s){if(e.s<1)throw Error($t+"Infinity");return l}if(l.eq(jt))return l;if(n=d.precision,e.eq(jt))return ge(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=Iy){for(a=new d(jt),t=Math.ceil(n/je+4),Ne=!1;r%2&&(a=a.times(l),Qm(a.d,t)),r=Aa(r/2),r!==0;)l=l.times(l),Qm(l.d,t);return Ne=!0,e.s<0?new d(jt).div(a):ge(a,n)}}else if(i<0)throw Error($t+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ne=!1,a=e.times(ci(l,n+c)),Ne=!0,a=Fy(a),a.s=i,a};Y.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Fe(a),n=Cn(a,r<=i.toExpNeg||r>=i.toExpPos)):(cr(e,1,_a),t===void 0?t=i.rounding:cr(t,0,8),a=ge(new i(a),e,t),r=Fe(a),n=Cn(a,e<=r||r<=i.toExpNeg,e)),n};Y.toSignificantDigits=Y.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(cr(e,1,_a),t===void 0?t=n.rounding:cr(t,0,8)),ge(new n(r),e,t)};Y.toString=Y.valueOf=Y.val=Y.toJSON=Y[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Fe(e),r=e.constructor;return Cn(e,t<=r.toExpNeg||t>=r.toExpPos)};function By(e,t){var r,n,a,i,o,l,d,c,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Ne?ge(t,f):t;if(d=e.d,c=t.d,o=e.e,a=t.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,l=c.length):(n=c,a=o,l=d.length),o=Math.ceil(f/je),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=d.length,i=c.length,l-i<0&&(i=l,n=c,c=d,d=n),r=0;i;)r=(d[--i]=d[i]+c[i]+r)/Ke|0,d[i]%=Ke;for(r&&(d.unshift(r),++a),l=d.length;d[--l]==0;)d.pop();return t.d=d,t.e=a,Ne?ge(t,f):t}function cr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(bn+e)}function ir(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=je-n.length,r&&(i+=Mr(r)),i+=n;o=e[t],n=o+"",r=je-n.length,r&&(i+=Mr(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var yr=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%Ke|0,o=i/Ke|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(n[l]!=a[l]){d=n[l]>a[l]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Ke+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,d,c,u,f,h,m,x,g,p,y,b,v,j,E,_,C,A,S=n.constructor,N=n.s==a.s?1:-1,D=n.d,k=a.d;if(!n.s)return new S(n);if(!a.s)throw Error($t+"Division by zero");for(d=n.e-a.e,C=k.length,E=D.length,m=new S(N),x=m.d=[],c=0;k[c]==(D[c]||0);)++c;if(k[c]>(D[c]||0)&&--d,i==null?b=i=S.precision:o?b=i+(Fe(n)-Fe(a))+1:b=i,b<0)return new S(0);if(b=b/je+2|0,c=0,C==1)for(u=0,k=k[0],b++;(c<E||u)&&b--;c++)v=u*Ke+(D[c]||0),x[c]=v/k|0,u=v%k|0;else{for(u=Ke/(k[0]+1)|0,u>1&&(k=e(k,u),D=e(D,u),C=k.length,E=D.length),j=C,g=D.slice(0,C),p=g.length;p<C;)g[p++]=0;A=k.slice(),A.unshift(0),_=k[0],k[1]>=Ke/2&&++_;do u=0,l=t(k,g,C,p),l<0?(y=g[0],C!=p&&(y=y*Ke+(g[1]||0)),u=y/_|0,u>1?(u>=Ke&&(u=Ke-1),f=e(k,u),h=f.length,p=g.length,l=t(f,g,h,p),l==1&&(u--,r(f,C<h?A:k,h))):(u==0&&(l=u=1),f=k.slice()),h=f.length,h<p&&f.unshift(0),r(g,f,p),l==-1&&(p=g.length,l=t(k,g,C,p),l<1&&(u++,r(g,C<p?A:k,p))),p=g.length):l===0&&(u++,g=[0]),x[c++]=u,l&&g[0]?g[p++]=D[j]||0:(g=[D[j]],p=1);while((j++<E||g[0]!==void 0)&&b--)}return x[0]||x.shift(),m.e=d,ge(m,o?i+Fe(m)+1:i)}}();function Fy(e,t){var r,n,a,i,o,l,d=0,c=0,u=e.constructor,f=u.precision;if(Fe(e)>16)throw Error(Qd+Fe(e));if(!e.s)return new u(jt);for(Ne=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(n=Math.log(on(2,c))/Math.LN10*2+5|0,l+=n,r=a=i=new u(jt),u.precision=l;;){if(a=ge(a.times(e),l),r=r.times(++d),o=i.plus(yr(a,r,l)),ir(o.d).slice(0,l)===ir(i.d).slice(0,l)){for(;c--;)i=ge(i.times(i),l);return u.precision=f,t==null?(Ne=!0,ge(i,f)):i}i=o}}function Fe(e){for(var t=e.e*je,r=e.d[0];r>=10;r/=10)t++;return t}function cc(e,t,r){if(t>e.LN10.sd())throw Ne=!0,r&&(e.precision=r),Error($t+"LN10 precision limit exceeded");return ge(new e(e.LN10),t)}function Mr(e){for(var t="";e--;)t+="0";return t}function ci(e,t){var r,n,a,i,o,l,d,c,u,f=1,h=10,m=e,x=m.d,g=m.constructor,p=g.precision;if(m.s<1)throw Error($t+(m.s?"NaN":"-Infinity"));if(m.eq(jt))return new g(0);if(t==null?(Ne=!1,c=p):c=t,m.eq(10))return t==null&&(Ne=!0),cc(g,c);if(c+=h,g.precision=c,r=ir(x),n=r.charAt(0),i=Fe(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=ir(m.d),n=r.charAt(0),f++;i=Fe(m),n>1?(m=new g("0."+r),i++):m=new g(n+"."+r.slice(1))}else return d=cc(g,c+2,p).times(i+""),m=ci(new g(n+"."+r.slice(1)),c-h).plus(d),g.precision=p,t==null?(Ne=!0,ge(m,p)):m;for(l=o=m=yr(m.minus(jt),m.plus(jt),c),u=ge(m.times(m),c),a=3;;){if(o=ge(o.times(u),c),d=l.plus(yr(o,new g(a),c)),ir(d.d).slice(0,c)===ir(l.d).slice(0,c))return l=l.times(2),i!==0&&(l=l.plus(cc(g,c+2,p).times(i+""))),l=yr(l,new g(f),c),g.precision=p,t==null?(Ne=!0,ge(l,p)):l;l=d,a+=2}}function Zm(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Aa(r/je),e.d=[],n=(r+1)%je,r<0&&(n+=je),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=je;n<a;)e.d.push(+t.slice(n,n+=je));t=t.slice(n),n=je-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ne&&(e.e>Ps||e.e<-Ps))throw Error(Qd+r)}else e.s=0,e.e=0,e.d=[0];return e}function ge(e,t,r){var n,a,i,o,l,d,c,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=je,a=t,c=f[u=0];else{if(u=Math.ceil((n+1)/je),i=f.length,u>=i)return e;for(c=i=f[u],o=1;i>=10;i/=10)o++;n%=je,a=n-je+o}if(r!==void 0&&(i=on(10,o-a-1),l=c/i%10|0,d=t<0||f[u+1]!==void 0||c%i,d=r<4?(l||d)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(n>0?a>0?c/on(10,o-a):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return d?(i=Fe(e),f.length=1,t=t-i-1,f[0]=on(10,(je-t%je)%je),e.e=Aa(-t/je)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=u,i=1,u--):(f.length=u+1,i=on(10,je-n),f[u]=a>0?(c/on(10,o-a)%on(10,a)|0)*i:0),d)for(;;)if(u==0){(f[0]+=i)==Ke&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=Ke)break;f[u--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Ne&&(e.e>Ps||e.e<-Ps))throw Error(Qd+Fe(e));return e}function My(e,t){var r,n,a,i,o,l,d,c,u,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ne?ge(t,m):t;if(d=e.d,f=t.d,n=t.e,c=e.e,d=d.slice(),o=c-n,o){for(u=o<0,u?(r=d,o=-o,l=f.length):(r=f,n=c,l=d.length),a=Math.max(Math.ceil(m/je),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,l=f.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(d[a]!=f[a]){u=d[a]<f[a];break}o=0}for(u&&(r=d,d=f,f=r,t.s=-t.s),l=d.length,a=f.length-l;a>0;--a)d[l++]=0;for(a=f.length;a>o;){if(d[--a]<f[a]){for(i=a;i&&d[--i]===0;)d[i]=Ke-1;--d[i],d[a]+=Ke}d[a]-=f[a]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Ne?ge(t,m):t):new h(0)}function Cn(e,t,r){var n,a=Fe(e),i=ir(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Mr(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Mr(-a-1)+i,r&&(n=r-o)>0&&(i+=Mr(n))):a>=o?(i+=Mr(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Mr(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Mr(n))),e.s<0?"-"+i:i}function Qm(e,t){if(e.length>t)return e.length=t,!0}function $y(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(bn+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Zm(o,i.toString())}else if(typeof i!="string")throw Error(bn+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Qk.test(i))Zm(o,i);else throw Error(bn+i)}if(a.prototype=Y,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=$y,a.config=a.set=eP,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function eP(e){if(!e||typeof e!="object")throw Error($t+"Object expected");var t,r,n,a=["precision",1,_a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Aa(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(bn+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(bn+r+": "+n);return this}var e0=$y(Zk);jt=new e0(1);const he=e0;var tP=e=>e,Ry={},Ly=e=>e===Ry,ep=e=>function t(){return arguments.length===0||arguments.length===1&&Ly(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Uy=(e,t)=>e===1?t:ep(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(o=>o!==Ry).length;return i>=e?t(...n):Uy(e-i,ep(function(){for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];var c=n.map(u=>Ly(u)?l.shift():u);return t(...c,...l)}))}),Ro=e=>Uy(e.length,e),hu=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},rP=Ro((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),nP=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return tP;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((l,d)=>d(l),i(...arguments))}},mu=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),zy=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((o,l)=>{var d;return o===((d=t)===null||d===void 0?void 0:d[l])})||(t=a,r=e(...a)),r}};function Ky(e){var t;return e===0?t=1:t=Math.floor(new he(e).abs().log(10).toNumber())+1,t}function qy(e,t,r){for(var n=new he(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}Ro((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});Ro((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Ro((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Wy=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Hy=(e,t,r)=>{if(e.lte(0))return new he(0);var n=Ky(e.toNumber()),a=new he(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new he(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(a);return t?new he(d.toNumber()):new he(Math.ceil(d.toNumber()))},aP=(e,t,r)=>{var n=new he(1),a=new he(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new he(10).pow(Ky(e)-1),a=new he(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new he(Math.floor(e)))}else e===0?a=new he(Math.floor((t-1)/2)):r||(a=new he(Math.floor(e)));var o=Math.floor((t-1)/2),l=nP(rP(d=>a.add(new he(d-o).mul(n)).toNumber()),hu);return l(0,t)},Gy=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new he(0),tickMin:new he(0),tickMax:new he(0)};var o=Hy(new he(r).sub(t).div(n-1),a,i),l;t<=0&&r>=0?l=new he(0):(l=new he(t).add(r).div(2),l=l.sub(new he(l).mod(o)));var d=Math.ceil(l.sub(t).div(o).toNumber()),c=Math.ceil(new he(r).sub(l).div(o).toNumber()),u=d+c+1;return u>n?Gy(t,r,n,a,i+1):(u<n&&(c=r>0?c+(n-u):c,d=r>0?d:d+(n-u)),{step:o,tickMin:l.sub(new he(d).mul(o)),tickMax:l.add(new he(c).mul(o))})};function iP(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=Wy([t,r]);if(o===-1/0||l===1/0){var d=l===1/0?[o,...hu(0,n-1).map(()=>1/0)]:[...hu(0,n-1).map(()=>-1/0),l];return t>r?mu(d):d}if(o===l)return aP(o,n,a);var{step:c,tickMin:u,tickMax:f}=Gy(o,l,i,a,0),h=qy(u,f.add(new he(.1).mul(c)),c);return t>r?mu(h):h}function sP(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=Wy([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),d=Hy(new he(o).sub(i).div(l-1),a,0),c=[...qy(new he(i),new he(o),d),o];return a===!1&&(c=c.map(u=>Math.round(u))),r>n?mu(c):c}var oP=zy(iP),lP=zy(sP),cP=e=>e.rootProps.barCategoryGap,Ci=e=>e.rootProps.stackOffset,t0=e=>e.options.chartName,r0=e=>e.rootProps.syncId,Vy=e=>e.rootProps.syncMethod,n0=e=>e.options.eventEmitter,fr={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},yt={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Lo=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},uP={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:fr.angleAxisId,includeHidden:!1,name:void 0,reversed:fr.reversed,scale:fr.scale,tick:fr.tick,tickCount:void 0,ticks:void 0,type:fr.type,unit:void 0},dP={allowDataOverflow:yt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yt.scale,tick:yt.tick,tickCount:yt.tickCount,ticks:void 0,type:yt.type,unit:void 0},fP={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:fr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fr.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fr.scale,tick:fr.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},hP={allowDataOverflow:yt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yt.scale,tick:yt.tick,tickCount:yt.tickCount,ticks:void 0,type:"category",unit:void 0},a0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?fP:uP,i0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?hP:dP,Uo=e=>e.polarOptions,s0=F([Er,Cr,Ge],Dv),Yy=F([Uo,s0],(e,t)=>{if(e!=null)return Bt(e.innerRadius,t,0)}),Xy=F([Uo,s0],(e,t)=>{if(e!=null)return Bt(e.outerRadius,t,t*.8)}),mP=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Jy=F([Uo],mP);F([a0,Jy],Lo);var Zy=F([s0,Yy,Xy],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});F([i0,Zy],Lo);var pP=F([_e,Uo,Yy,Xy,Er,Cr],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:d,endAngle:c}=t;return{cx:Bt(o,a,a/2),cy:Bt(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:c,clockWise:!1}}}),ke=(e,t)=>t,Si=(e,t,r)=>r;function tp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tp(Object(r),!0).forEach(function(n){xP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xP(e,t,r){return(t=gP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gP(e){var t=vP(e,"string");return typeof t=="symbol"?t:t+""}function vP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pu=[0,"auto"],gt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Dr=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??gt},vt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:pu,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:So},Zr=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??vt},zr={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},o0=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??zr},Pe=(e,t,r)=>{switch(t){case"xAxis":return Dr(e,r);case"yAxis":return Zr(e,r);case"zAxis":return o0(e,r);case"angleAxis":return a0(e,r);case"radiusAxis":return i0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},yP=(e,t,r)=>{switch(t){case"xAxis":return Dr(e,r);case"yAxis":return Zr(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Di=(e,t,r)=>{switch(t){case"xAxis":return Dr(e,r);case"yAxis":return Zr(e,r);case"angleAxis":return a0(e,r);case"radiusAxis":return i0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Qy=e=>e.graphicalItems.countOfBars>0;function l0(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var c0=e=>e.graphicalItems.cartesianItems,bP=F([ke,Si],l0),u0=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),ki=F([c0,Pe,bP],u0),eb=e=>e.filter(t=>t.stackId===void 0),wP=F([ki],eb),d0=e=>e.map(t=>t.data).filter(Boolean).flat(1),jP=F([ki],d0),f0=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},zo=F([jP,Zd],f0),h0=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:be(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:be(a,n)}))):e.map(n=>({value:n})),Ko=F([zo,Pe,ki],h0);function tb(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Mn(e){return e.filter(t=>lr(t)||t instanceof Date).map(Number).filter(t=>Ft(t)===!1)}function _P(e,t,r){return!r||typeof t!="number"||Ft(t)?[]:r.length?Mn(r.flatMap(n=>{var a=be(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!er(i)||!er(o)))return[t-i,t+o]})):[]}var rb=(e,t,r)=>{var n={},a=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[o,l]=i,d=l.map(c=>c.dataKey);return[o,{stackedData:IC(e,d,r),graphicalItems:l}]}))},AP=F([zo,ki,Ci],rb),nb=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var i=$C(e,n,a);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},NP=F([AP,Fn,ke],nb),ab=(e,t,r,n)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,l,d=(o=i.errorBars)===null||o===void 0?void 0:o.filter(u=>tb(n,u)),c=be(a,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:c,errorDomain:_P(a,c,d)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:be(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),EP=F(zo,Pe,wP,ke,ab);function CP(e){var{value:t}=e;if(lr(t)||t instanceof Date)return t}var SP=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Mn(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},DP=(e,t,r)=>{var n=e.map(CP).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&cg(n))?Qv(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},m0=e=>{var t;if(e==null||!("domain"in e))return pu;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Mn(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:pu},p0=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},ib=e=>e.referenceElements.dots,Na=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),kP=F([ib,ke,Si],Na),sb=e=>e.referenceElements.areas,PP=F([sb,ke,Si],Na),ob=e=>e.referenceElements.lines,OP=F([ob,ke,Si],Na),lb=(e,t)=>{var r=Mn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},TP=F(kP,ke,lb),cb=(e,t)=>{var r=Mn(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},IP=F([PP,ke],cb),ub=(e,t)=>{var r=Mn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},BP=F(OP,ke,ub),FP=F(TP,BP,IP,(e,t,r)=>p0(e,r,t)),db=F([Pe],m0),x0=(e,t,r,n,a)=>{var i=Xk(t,e.allowDataOverflow);return i??Jk(t,p0(r,a,SP(n)),e.allowDataOverflow)},MP=F([Pe,db,NP,EP,FP],x0),$P=[0,1],g0=(e,t,r,n,a,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:d}=e,c=Yr(t,i);return c&&l==null?Qv(0,r.length):d==="category"?DP(n,e,c):a==="expand"?$P:o}},v0=F([Pe,_e,zo,Ko,Ci,ke,MP],g0),fb=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(bi(i));return l in Wa?l:"point"}}},Ea=F([Pe,_e,Qy,t0,ke],fb);function RP(e){if(e!=null){if(e in Wa)return Wa[e]();var t="scale".concat(bi(e));if(t in Wa)return Wa[t]()}}function y0(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=RP(t);if(a!=null){var i=a.domain(r).range(n);return kC(i),i}}}var b0=(e,t,r)=>{var n=m0(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&ha(e))return oP(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ha(e))return lP(e,t.tickCount,t.allowDecimals)}},w0=F([v0,Di,Ea],b0),j0=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&ha(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,i),Math.max(o,l)]}return t},LP=F([Pe,v0,w0,ke],j0),UP=F(Ko,Pe,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Mn(e.map(l=>l.value))).sort((l,d)=>l-d);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/a}}),hb=F(UP,_e,cP,Ge,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!er(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=Bt(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),zP=(e,t)=>{var r=Dr(e,t);return r==null||typeof r.padding!="string"?0:hb(e,"xAxis",t,r.padding)},KP=(e,t)=>{var r=Zr(e,t);return r==null||typeof r.padding!="string"?0:hb(e,"yAxis",t,r.padding)},qP=F(Dr,zP,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),WP=F(Zr,KP,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),HP=F([Ge,qP,ko,Do,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),GP=F([Ge,_e,WP,ko,Do,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Pi=(e,t,r,n)=>{var a;switch(t){case"xAxis":return HP(e,r,n);case"yAxis":return GP(e,r,n);case"zAxis":return(a=o0(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Jy(e);case"radiusAxis":return Zy(e,r);default:return}},mb=F([Pe,Pi],Lo),Ca=F([Pe,Ea,LP,mb],y0);F(ki,ke,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>tb(t,r)));function pb(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var qo=(e,t)=>t,Wo=(e,t,r)=>r,VP=F(vd,qo,Wo,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(pb)),YP=F(yd,qo,Wo,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(pb)),xb=(e,t)=>({width:e.width,height:t.height}),XP=(e,t)=>{var r=typeof t.width=="number"?t.width:So;return{width:r,height:e.height}},JP=F(Ge,Dr,xb),ZP=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},QP=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},e6=F(Cr,Ge,VP,qo,Wo,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var d=xb(t,l);o==null&&(o=ZP(t,n,e));var c=n==="top"&&!a||n==="bottom"&&a;i[l.id]=o-Number(c)*d.height,o+=(c?-1:1)*d.height}),i}),t6=F(Er,Ge,YP,qo,Wo,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var d=XP(t,l);o==null&&(o=QP(t,n,e));var c=n==="left"&&!a||n==="right"&&a;i[l.id]=o-Number(c)*d.width,o+=(c?-1:1)*d.width}),i}),r6=(e,t)=>{var r=Ge(e),n=Dr(e,t);if(n!=null){var a=e6(e,n.orientation,n.mirror),i=a[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},n6=(e,t)=>{var r=Ge(e),n=Zr(e,t);if(n!=null){var a=t6(e,n.orientation,n.mirror),i=a[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},a6=F(Ge,Zr,(e,t)=>{var r=typeof t.width=="number"?t.width:So;return{width:r,height:e.height}}),gb=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,l=Yr(e,n),d=t.map(c=>c.value);if(o&&l&&i==="category"&&a&&cg(d))return d}},_0=F([_e,Ko,Pe,ke],gb),vb=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=Yr(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(l=>l.value)}},A0=F([_e,Ko,Di,ke],vb),rp=F([_e,yP,Ea,Ca,_0,A0,Pi,w0,ke],(e,t,r,n,a,i,o,l,d)=>{if(t==null)return null;var c=Yr(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:a,isCategorical:c,niceTicks:l,range:o,realScaleType:r,scale:n}}),i6=(e,t,r,n,a,i,o,l,d)=>{if(!(t==null||n==null)){var c=Yr(e,d),{type:u,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=u==="category"&&n.bandwidth?n.bandwidth()/m:0;x=d==="angleAxis"&&i!=null&&i.length>=2?at(i[0]-i[1])*2*x:x;var g=f||a;if(g){var p=g.map((y,b)=>{var v=o?o.indexOf(y):y;return{index:b,coordinate:n(v)+x,value:y,offset:x}});return p.filter(y=>!Ft(y.coordinate))}return c&&l?l.map((y,b)=>({coordinate:n(y)+x,value:y,index:b,offset:x})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+x,value:y,offset:x})):n.domain().map((y,b)=>({coordinate:n(y)+x,value:o?o[y]:y,index:b,offset:x}))}},yb=F([_e,Di,Ea,Ca,w0,Pi,_0,A0,ke],i6),s6=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Yr(e,o),{tickCount:d}=t,c=0;return c=o==="angleAxis"&&(n==null?void 0:n.length)>=2?at(n[0]-n[1])*2*c:c,l&&i?i.map((u,f)=>({coordinate:r(u)+c,value:u,index:f,offset:c})):r.ticks?r.ticks(d).map(u=>({coordinate:r(u)+c,value:u,offset:c})):r.domain().map((u,f)=>({coordinate:r(u)+c,value:a?a[u]:u,index:f,offset:c}))}},Ho=F([_e,Di,Ca,Pi,_0,A0,ke],s6),Sa=F(Pe,Ca,(e,t)=>{if(!(e==null||t==null))return Os(Os({},e),{},{scale:t})}),o6=F([Pe,Ea,v0,mb],y0),l6=F((e,t,r)=>o0(e,r),o6,(e,t)=>{if(!(e==null||t==null))return Os(Os({},e),{},{scale:t})}),c6=F([_e,vd,yd],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),bb=e=>e.options.defaultTooltipEventType,wb=e=>e.options.validateTooltipEventTypes;function jb(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function N0(e,t){var r=bb(e),n=wb(e);return jb(t,r,n)}function u6(e){return J(t=>N0(t,e))}var _b=(e,t)=>{var r,n=Number(t);if(!(Ft(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},d6=e=>e.tooltip.settings,Rr={active:!1,index:null,dataKey:void 0,coordinate:void 0},f6={itemInteraction:{click:Rr,hover:Rr},axisInteraction:{click:Rr,hover:Rr},keyboardInteraction:Rr,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Ab=zt({name:"tooltip",initialState:f6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=vr(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:h6,removeTooltipEntrySettings:m6,setTooltipSettingsState:p6,setActiveMouseOverItemIndex:Nb,mouseLeaveItem:x6,mouseLeaveChart:Eb,setActiveClickItemIndex:g6,setMouseOverAxisIndex:Cb,setMouseClickAxisIndex:v6,setSyncInteraction:xu,setKeyboardInteraction:gu}=Ab.actions,y6=Ab.reducer;function np(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?np(Object(r),!0).forEach(function(n){b6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):np(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b6(e,t,r){return(t=w6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w6(e){var t=j6(e,"string");return typeof t=="symbol"?t:t+""}function j6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _6(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function A6(e){return e.index!=null}var Sb=(e,t,r,n)=>{if(t==null)return Rr;var a=_6(e,t,r);if(a==null)return Rr;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(A6(a)){if(i)return Ji(Ji({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Ji(Ji({},Rr),{},{coordinate:a.coordinate})},E0=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!er(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},Db=(e,t,r,n,a,i,o,l)=>{if(!(i==null||l==null)){var d=o[0],c=d==null?void 0:l(d.positions,i);if(c!=null)return c;var u=a==null?void 0:a[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},kb=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===a})},Oi=e=>e.options.tooltipPayloadSearcher,Da=e=>e.tooltip;function ap(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ip(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ap(Object(r),!0).forEach(function(n){N6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ap(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N6(e,t,r){return(t=E6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E6(e){var t=C6(e,"string");return typeof t=="symbol"?t:t+""}function C6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S6(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function D6(e,t){return e??t}var Pb=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:d,dataStartIndex:c,dataEndIndex:u}=r,f=[];return e.reduce((h,m)=>{var x,{dataDefinedOnItem:g,settings:p}=m,y=D6(g,l),b=S6(y,c,u),v=(x=p==null?void 0:p.dataKey)!==null&&x!==void 0?x:n==null?void 0:n.dataKey,j=p==null?void 0:p.nameKey,E;if(n!=null&&n.dataKey&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?E=ug(b,n.dataKey,a):E=i(b,t,d,j),Array.isArray(E))E.forEach(C=>{var A=ip(ip({},p),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});h.push(Yh({tooltipEntrySettings:A,dataKey:C.dataKey,payload:C.payload,value:be(C.payload,C.dataKey),name:C.name}))});else{var _;h.push(Yh({tooltipEntrySettings:p,dataKey:v,payload:E,value:be(E,v),name:(_=be(E,j))!==null&&_!==void 0?_:p==null?void 0:p.name}))}return h},f)}},Ye=e=>{var t=_e(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ka=e=>e.tooltip.settings.axisId,Ze=e=>{var t=Ye(e),r=ka(e);return Di(e,t,r)},C0=F([Ze,_e,Qy,t0,Ye],fb),k6=F([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),P6=F([Ye,ka],l0),Go=F([k6,Ze,P6],u0),O6=F([Go],d0),$n=F([O6,Fn],f0),S0=F([$n,Ze,Go],h0),T6=F([Ze],m0),I6=F([$n,Go,Ci],rb),B6=F([I6,Fn,Ye],nb),F6=F([Go],eb),M6=F([$n,Ze,F6,Ye],ab),$6=F([ib,Ye,ka],Na),R6=F([$6,Ye],lb),L6=F([sb,Ye,ka],Na),U6=F([L6,Ye],cb),z6=F([ob,Ye,ka],Na),K6=F([z6,Ye],ub),q6=F([R6,K6,U6],p0),W6=F([Ze,T6,B6,M6,q6],x0),Ob=F([Ze,_e,$n,S0,Ci,Ye,W6],g0),H6=F([Ob,Ze,C0],b0),G6=F([Ze,Ob,H6,Ye],j0),Tb=e=>{var t=Ye(e),r=ka(e),n=!1;return Pi(e,t,r,n)},Ib=F([Ze,Tb],Lo),Bb=F([Ze,C0,G6,Ib],y0),V6=F([_e,S0,Ze,Ye],gb),Y6=F([_e,S0,Ze,Ye],vb),X6=(e,t,r,n,a,i,o,l)=>{if(t){var{type:d}=t,c=Yr(e,l);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=d==="category"&&n.bandwidth?n.bandwidth()/u:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?at(a[0]-a[1])*2*f:f,c&&o?o.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:i?i[h]:h,index:m,offset:f}))}}},kr=F([_e,Ze,C0,Bb,Tb,V6,Y6,Ye],X6),D0=F([bb,wb,d6],(e,t,r)=>jb(r.shared,e,t)),Fb=e=>e.tooltip.settings.trigger,k0=e=>e.tooltip.settings.defaultIndex,Vo=F([Da,D0,Fb,k0],Sb),Sn=F([Vo,$n],E0),Mb=F([kr,Sn],_b),J6=F([Vo],e=>{if(e)return e.dataKey}),$b=F([Da,D0,Fb,k0],kb),Z6=F([Er,Cr,_e,Ge,kr,k0,$b,Oi],Db),Q6=F([Vo,Z6],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),eO=F([Vo],e=>e.active),tO=F([$b,Sn,Fn,Ze,Mb,Oi,D0],Pb),rO=F([tO],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function sp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function op(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sp(Object(r),!0).forEach(function(n){nO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nO(e,t,r){return(t=aO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aO(e){var t=iO(e,"string");return typeof t=="symbol"?t:t+""}function iO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sO=()=>J(Ze),oO=()=>{var e=sO(),t=J(kr),r=J(Bb);return Jc(op(op({},e),{},{scale:r}),t)},lO=()=>J(t0),P0=(e,t)=>t,Rb=(e,t,r)=>r,O0=(e,t,r,n)=>n,cO=F(kr,e=>wo(e,t=>t.coordinate)),T0=F([Da,P0,Rb,O0],Sb),Lb=F([T0,$n],E0),uO=(e,t,r)=>{if(t!=null){var n=Da(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Ub=F([Da,P0,Rb,O0],kb),Ts=F([Er,Cr,_e,Ge,kr,O0,Ub,Oi],Db),dO=F([T0,Ts],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),zb=F(kr,Lb,_b),fO=F([Ub,Lb,Fn,Ze,zb,Oi,P0],Pb),hO=F([T0],e=>({isActive:e.active,activeIndex:e.index})),mO=(e,t,r,n,a,i,o,l)=>{if(!(!e||!t||!n||!a||!i)){var d=RC(e.chartX,e.chartY,t,r,l);if(d){var c=UC(d,t),u=SC(c,o,i,n,a),f=LC(t,i,u,d);return{activeIndex:String(u),activeCoordinate:f}}}};function vu(){return vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vu.apply(null,arguments)}function lp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lp(Object(r),!0).forEach(function(n){pO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pO(e,t,r){return(t=xO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xO(e){var t=gO(e,"string");return typeof t=="symbol"?t:t+""}function gO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vO(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:d,chartName:c}=e,u=t,f=r,h=n;if(!l||!u||c!=="ScatterChart"&&d!=="axis")return null;var m,x;if(c==="ScatterChart")m=u,x=$S;else if(c==="BarChart")m=RS(o,u,a,i),x=Hv;else if(o==="radial"){var{cx:g,cy:p,radius:y,startAngle:b,endAngle:v}=Gv(u);m={cx:g,cy:p,startAngle:b,endAngle:v,innerRadius:y,outerRadius:y},x=Yv}else m={points:b4(o,u,a)},x=Oo;var j=typeof l=="object"&&"className"in l?l.className:void 0,E=Zi(Zi(Zi(Zi({stroke:"#ccc",pointerEvents:"none"},a),m),le(l,!1)),{},{payload:f,payloadIndex:h,className:ue("recharts-tooltip-cursor",j)});return w.isValidElement(l)?w.cloneElement(l,E):w.createElement(x,E)}function yO(e){var t=oO(),r=Iv(),n=Nd(),a=lO();return w.createElement(vO,vu({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var Kb=w.createContext(null),bO=()=>w.useContext(Kb),qb={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,c,u){this.fn=d,this.context=c,this.once=u||!1}function i(d,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new a(u,f||d,h),x=r?r+c:c;return d._events[x]?d._events[x].fn?d._events[x]=[d._events[x],m]:d._events[x].push(m):(d._events[x]=m,d._eventsCount++),d}function o(d,c){--d._eventsCount===0?d._events=new n:delete d._events[c]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)t.call(u,f)&&c.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},l.prototype.listeners=function(c){var u=r?r+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,x=new Array(m);h<m;h++)x[h]=f[h].fn;return x},l.prototype.listenerCount=function(c){var u=r?r+c:c,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(c,u,f,h,m,x){var g=r?r+c:c;if(!this._events[g])return!1;var p=this._events[g],y=arguments.length,b,v;if(p.fn){switch(p.once&&this.removeListener(c,p.fn,void 0,!0),y){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,u),!0;case 3:return p.fn.call(p.context,u,f),!0;case 4:return p.fn.call(p.context,u,f,h),!0;case 5:return p.fn.call(p.context,u,f,h,m),!0;case 6:return p.fn.call(p.context,u,f,h,m,x),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];p.fn.apply(p.context,b)}else{var j=p.length,E;for(v=0;v<j;v++)switch(p[v].once&&this.removeListener(c,p[v].fn,void 0,!0),y){case 1:p[v].fn.call(p[v].context);break;case 2:p[v].fn.call(p[v].context,u);break;case 3:p[v].fn.call(p[v].context,u,f);break;case 4:p[v].fn.call(p[v].context,u,f,h);break;default:if(!b)for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];p[v].fn.apply(p[v].context,b)}}return!0},l.prototype.on=function(c,u,f){return i(this,c,u,f,!1)},l.prototype.once=function(c,u,f){return i(this,c,u,f,!0)},l.prototype.removeListener=function(c,u,f,h){var m=r?r+c:c;if(!this._events[m])return this;if(!u)return o(this,m),this;var x=this._events[m];if(x.fn)x.fn===u&&(!h||x.once)&&(!f||x.context===f)&&o(this,m);else{for(var g=0,p=[],y=x.length;g<y;g++)(x[g].fn!==u||h&&!x[g].once||f&&x[g].context!==f)&&p.push(x[g]);p.length?this._events[m]=p.length===1?p[0]:p:o(this,m)}return this},l.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(qb);var wO=qb.exports;const jO=tr(wO);var ui=new jO,yu="recharts.syncEvent.tooltip",cp="recharts.syncEvent.brush";function I0(e,t){if(t){var r=Number.parseInt(t,10);if(!Ft(r))return e==null?void 0:e[r]}}var _O={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Wb=zt({name:"options",initialState:_O,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),AO=Wb.reducer,{createEventEmitter:NO}=Wb.actions;function EO(e){return e.tooltip.syncInteraction}var CO={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Hb=zt({name:"chartData",initialState:CO,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:up,setDataStartEndIndexes:SO,setComputedData:fF}=Hb.actions,DO=Hb.reducer,Gb=()=>{};function kO(){var e=J(r0),t=J(n0),r=Ee(),n=J(Vy),a=J(kr),i=Nd(),o=jd(),l=J(d=>d.rootProps.className);w.useEffect(()=>{if(e==null)return Gb;var d=(c,u,f)=>{if(t!==f&&e===c){if(n==="index"){r(u);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},x=n(a,m);h=a[x]}else n==="value"&&(h=a.find(_=>String(_.value)===u.payload.label));var{coordinate:g}=u.payload;if(h==null||u.payload.active===!1||g==null||o==null){r(xu({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:p,y}=g,b=Math.min(p,o.x+o.width),v=Math.min(y,o.y+o.height),j={x:i==="horizontal"?h.coordinate:b,y:i==="horizontal"?v:h.coordinate},E=xu({active:u.payload.active,coordinate:j,dataKey:u.payload.dataKey,index:String(h.index),label:u.payload.label});r(E)}}};return ui.on(yu,d),()=>{ui.off(yu,d)}},[l,r,t,e,n,a,i,o])}function PO(){var e=J(r0),t=J(n0),r=Ee();w.useEffect(()=>{if(e==null)return Gb;var n=(a,i,o)=>{t!==o&&e===a&&r(SO(i))};return ui.on(cp,n),()=>{ui.off(cp,n)}},[r,t,e])}function OO(){var e=Ee();w.useEffect(()=>{e(NO())},[e]),kO(),PO()}function TO(e,t,r,n,a,i){var o=J(h=>uO(h,e,t)),l=J(n0),d=J(r0),c=J(Vy),u=J(EO),f=u==null?void 0:u.active;w.useEffect(()=>{if(!f&&d!=null&&l!=null){var h=xu({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});ui.emit(yu,d,h,l)}},[f,r,o,a,n,l,d,c,i])}function dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dp(Object(r),!0).forEach(function(n){IO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IO(e,t,r){return(t=BO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BO(e){var t=FO(e,"string");return typeof t=="symbol"?t:t+""}function FO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MO(e){return e.dataKey}function $O(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(xS,t)}var hp=[],RO={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Tn.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function di(e){var t=Kt(e,RO),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,content:o,filterNull:l,isAnimationActive:d,offset:c,payloadUniqBy:u,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:x,cursor:g,shared:p,trigger:y,defaultIndex:b,portal:v,axisId:j}=t,E=Ee(),_=typeof b=="number"?String(b):b;w.useEffect(()=>{E(p6({shared:p,trigger:y,axisId:j,active:r,defaultIndex:_}))},[E,p,y,j,r,_]);var C=jd(),A=$v(),S=u6(p),{activeIndex:N,isActive:D}=J(Q=>hO(Q,S,y,_)),k=J(Q=>fO(Q,S,y,_)),P=J(Q=>zb(Q,S,y,_)),R=J(Q=>dO(Q,S,y,_)),B=k,z=bO(),$=r??D,[q,K]=av([B,$]),Z=S==="axis"?P:void 0;TO(S,y,R,Z,N,$);var I=v??z;if(I==null)return null;var O=B??hp;$||(O=hp),l&&O.length&&(O=Hg(B.filter(Q=>Q.value!=null&&(Q.hide!==!0||t.includeHidden)),u,MO));var T=O.length>0,M=w.createElement(_S,{allowEscapeViewBox:n,animationDuration:a,animationEasing:i,isAnimationActive:d,active:$,coordinate:R,hasPayload:T,offset:c,position:f,reverseDirection:h,useTranslate3d:m,viewBox:C,wrapperStyle:x,lastBoundingBox:q,innerRef:K,hasPortalFromProps:!!v},$O(o,fp(fp({},t),{},{payload:O,label:Z,active:$,coordinate:R,accessibilityLayer:A})));return w.createElement(w.Fragment,null,ku.createPortal(M,I),$&&w.createElement(yO,{cursor:g,tooltipEventType:S,coordinate:R,payload:B,index:N}))}var Vb={},Yb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=0,a={}){typeof a!="object"&&(a={});let i=null,o=null,l=null,d=0,c=null,u;const{leading:f=!1,trailing:h=!0,maxWait:m}=a,x="maxWait"in a,g=x?Math.max(Number(m)||0,n):0,p=C=>(i!==null&&(u=r.apply(o,i)),i=o=null,d=C,u),y=C=>(d=C,c=setTimeout(E,n),f&&i!==null?p(C):u),b=C=>(c=null,h&&i!==null?p(C):u),v=C=>{if(l===null)return!0;const A=C-l,S=A>=n||A<0,N=x&&C-d>=g;return S||N},j=C=>{const A=l===null?0:C-l,S=n-A,N=g-(C-d);return x?Math.min(S,N):S},E=()=>{const C=Date.now();if(v(C))return b(C);c=setTimeout(E,j(C))},_=function(...C){const A=Date.now(),S=v(A);if(i=C,o=this,l=A,S){if(c===null)return y(A);if(x)return clearTimeout(c),c=setTimeout(E,n),p(A)}return c===null&&(c=setTimeout(E,n)),u};return _.cancel=()=>{c!==null&&clearTimeout(c),d=0,l=i=o=c=null},_.flush=()=>c===null?u:b(Date.now()),_}e.debounce=t})(Yb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yb;function r(n,a=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r})(Vb);var LO=Vb.throttle;const UO=tr(LO);var Ya=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function mp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mp(Object(r),!0).forEach(function(n){zO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zO(e,t,r){return(t=KO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KO(e){var t=qO(e,"string");return typeof t=="symbol"?t:t+""}function qO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fi=w.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:d,children:c,debounce:u=0,id:f,className:h,onResize:m,style:x={}}=e,g=w.useRef(null),p=w.useRef();p.current=m,w.useImperativeHandle(t,()=>g.current);var[y,b]=w.useState({containerWidth:n.width,containerHeight:n.height}),v=w.useCallback((E,_)=>{b(C=>{var A=Math.round(E),S=Math.round(_);return C.containerWidth===A&&C.containerHeight===S?C:{containerWidth:A,containerHeight:S}})},[]);w.useEffect(()=>{var E=S=>{var N,{width:D,height:k}=S[0].contentRect;v(D,k),(N=p.current)===null||N===void 0||N.call(p,D,k)};u>0&&(E=UO(E,u,{trailing:!0,leading:!1}));var _=new ResizeObserver(E),{width:C,height:A}=g.current.getBoundingClientRect();return v(C,A),_.observe(g.current),()=>{_.disconnect()}},[v,u]);var j=w.useMemo(()=>{var{containerWidth:E,containerHeight:_}=y;if(E<0||_<0)return null;Ya(dn(a)||dn(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,i),Ya(!r||r>0,"The aspect(%s) must be greater than zero.",r);var C=dn(a)?E:a,A=dn(i)?_:i;return r&&r>0&&(C?A=C/r:A&&(C=A*r),d&&A>d&&(A=d)),Ya(C>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,A,a,i,o,l,r),w.Children.map(c,S=>w.cloneElement(S,{width:C,height:A,style:uc({width:C,height:A},S.props.style)}))},[r,c,i,d,l,o,y,a]);return w.createElement("div",{id:f?"".concat(f):void 0,className:ue("recharts-responsive-container",h),style:uc(uc({},x),{},{width:a,height:i,minWidth:o,minHeight:l,maxHeight:d}),ref:g},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),Ti=e=>null;Ti.displayName="Cell";function pp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pp(Object(r),!0).forEach(function(n){WO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WO(e,t,r){return(t=HO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HO(e){var t=GO(e,"string");return typeof t=="symbol"?t:t+""}function GO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hn={widthCache:{},cacheCount:0},VO=2e3,YO={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},xp="recharts_measurement_span";function XO(e){var t=bu({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var Xa=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Tn.isSsr)return{width:0,height:0};var n=XO(r),a=JSON.stringify({text:t,copyStyle:n});if(Hn.widthCache[a])return Hn.widthCache[a];try{var i=document.getElementById(xp);i||(i=document.createElement("span"),i.setAttribute("id",xp),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=bu(bu({},YO),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),d={width:l.width,height:l.height};return Hn.widthCache[a]=d,++Hn.cacheCount>VO&&(Hn.cacheCount=0,Hn.widthCache={}),d}catch{return{width:0,height:0}}},gp=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vp=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JO=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ZO=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Xb={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},QO=Object.keys(Xb),Jn="NaN";function e8(e,t){return e*Xb[t]}class ut{static parse(t){var r,[,n,a]=(r=ZO.exec(t))!==null&&r!==void 0?r:[];return new ut(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Ft(t)&&(this.unit=""),r!==""&&!JO.test(r)&&(this.num=NaN,this.unit=""),QO.includes(r)&&(this.num=e8(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ut(NaN,""):new ut(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ut(NaN,""):new ut(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ut(NaN,""):new ut(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ut(NaN,""):new ut(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ft(this.num)}}function Jb(e){if(e.includes(Jn))return Jn;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=gp.exec(t))!==null&&r!==void 0?r:[],o=ut.parse(n??""),l=ut.parse(i??""),d=a==="*"?o.multiply(l):o.divide(l);if(d.isNaN())return Jn;t=t.replace(gp,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,f,h]=(c=vp.exec(t))!==null&&c!==void 0?c:[],m=ut.parse(u??""),x=ut.parse(h??""),g=f==="+"?m.add(x):m.subtract(x);if(g.isNaN())return Jn;t=t.replace(vp,g.toString())}return t}var yp=/\(([^()]*)\)/;function t8(e){for(var t=e,r;(r=yp.exec(t))!=null;){var[,n]=r;t=t.replace(yp,Jb(n))}return t}function r8(e){var t=e.replace(/\s+/g,"");return t=t8(t),t=Jb(t),t}function n8(e){try{return r8(e)}catch{return Jn}}function dc(e){var t=n8(e.slice(5,-1));return t===Jn?"":t}var a8=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],i8=["dx","dy","angle","className","breakAll"];function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wu.apply(null,arguments)}function bp(e,t){if(e==null)return{};var r,n,a=s8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Zb=/[ \f\n\r\t\v\u2028\u2029]+/,Qb=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];xe(t)||(r?a=t.toString().split(""):a=t.toString().split(Zb));var i=a.map(l=>({word:l,width:Xa(l,n).width})),o=r?0:Xa(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},o8=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:l,breakAll:d}=e,c=X(i),u=o,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((k,P)=>{var{word:R,width:B}=P,z=k[k.length-1];if(z&&(n==null||a||z.width+B+r<Number(n)))z.words.push(R),z.width+=B+r;else{var $={words:[R],width:B};k.push($)}return k},[])},h=f(t),m=N=>N.reduce((D,k)=>D.width>k.width?D:k);if(!c||a)return h;var x=h.length>i||m(h).width>Number(n);if(!x)return h;for(var g="…",p=N=>{var D=u.slice(0,N),k=Qb({breakAll:d,style:l,children:D+g}).wordsWithComputedWidth,P=f(k),R=P.length>i||m(P).width>Number(n);return[R,P]},y=0,b=u.length-1,v=0,j;y<=b&&v<=u.length-1;){var E=Math.floor((y+b)/2),_=E-1,[C,A]=p(_),[S]=p(E);if(!C&&!S&&(y=E+1),C&&S&&(b=E-1),!C&&S){j=A;break}v++}return j||h},wp=e=>{var t=xe(e)?[]:e.toString().split(Zb);return[{words:t}]},l8=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!Tn.isSsr){var l,d,c=Qb({breakAll:i,children:n,style:a});if(c){var{wordsWithComputedWidth:u,spaceWidth:f}=c;l=u,d=f}else return wp(n);return o8({breakAll:i,children:n,maxLines:o,style:a},l,d,t,r)}return wp(n)},jp="#808080",Yo=w.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:d="end",fill:c=jp}=e,u=bp(e,a8),f=w.useMemo(()=>l8({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:h,dy:m,angle:x,className:g,breakAll:p}=u,y=bp(u,i8);if(!lr(r)||!lr(n))return null;var b=r+(X(h)?h:0),v=n+(X(m)?m:0),j;switch(d){case"start":j=dc("calc(".concat(i,")"));break;case"middle":j=dc("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:j=dc("calc(".concat(f.length-1," * -").concat(a,")"));break}var E=[];if(o){var _=f[0].width,{width:C}=u;E.push("scale(".concat(X(C)?C/_:1,")"))}return x&&E.push("rotate(".concat(x,", ").concat(b,", ").concat(v,")")),E.length&&(y.transform=E.join(" ")),w.createElement("text",wu({},le(y,!0),{ref:t,x:b,y:v,className:ue("recharts-text",g),textAnchor:l,fill:c.includes("url")?jp:c}),f.map((A,S)=>{var N=A.words.join(p?"":" ");return w.createElement("tspan",{x:b,dy:S===0?j:a,key:"".concat(N,"-").concat(S)},N)}))});Yo.displayName="Text";var c8=["offset"],u8=["labelRef"];function _p(e,t){if(e==null)return{};var r,n,a=d8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function d8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ap(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ap(Object(r),!0).forEach(function(n){f8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ap(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f8(e,t,r){return(t=h8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h8(e){var t=m8(e,"string");return typeof t=="symbol"?t:t+""}function m8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hr(){return hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hr.apply(null,arguments)}var p8=e=>{var{value:t,formatter:r}=e,n=xe(e.children)?t:e.children;return typeof r=="function"?r(n):n},B0=e=>e!=null&&typeof e=="function",x8=(e,t)=>{var r=at(t-e),n=Math.min(Math.abs(t-e),360);return r*n},g8=(e,t,r)=>{var{position:n,viewBox:a,offset:i,className:o}=e,{cx:l,cy:d,innerRadius:c,outerRadius:u,startAngle:f,endAngle:h,clockWise:m}=a,x=(c+u)/2,g=x8(f,h),p=g>=0?1:-1,y,b;n==="insideStart"?(y=f+p*i,b=m):n==="insideEnd"?(y=h-p*i,b=!m):n==="end"&&(y=h+p*i,b=m),b=g<=0?b:!b;var v=Be(l,d,x,y),j=Be(l,d,x,y+(b?1:-1)*359),E="M".concat(v.x,",").concat(v.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(b?0:1,`,
    `).concat(j.x,",").concat(j.y),_=xe(e.id)?An("recharts-radial-line-"):e.id;return w.createElement("text",hr({},r,{dominantBaseline:"central",className:ue("recharts-radial-bar-label",o)}),w.createElement("defs",null,w.createElement("path",{id:_,d:E})),w.createElement("textPath",{xlinkHref:"#".concat(_)},t))},v8=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:a,cy:i,innerRadius:o,outerRadius:l,startAngle:d,endAngle:c}=t,u=(d+c)/2;if(n==="outside"){var{x:f,y:h}=Be(a,i,l+r,u);return{x:f,y:h,textAnchor:f>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(o+l)/2,{x,y:g}=Be(a,i,m,u);return{x,y:g,textAnchor:"middle",verticalAnchor:"middle"}},y8=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:i,y:o,width:l,height:d}=t,c=d>=0?1:-1,u=c*n,f=c>0?"end":"start",h=c>0?"start":"end",m=l>=0?1:-1,x=m*n,g=m>0?"end":"start",p=m>0?"start":"end";if(a==="top"){var y={x:i+l/2,y:o-c*n,textAnchor:"middle",verticalAnchor:f};return Te(Te({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(a==="bottom"){var b={x:i+l/2,y:o+d+u,textAnchor:"middle",verticalAnchor:h};return Te(Te({},b),r?{height:Math.max(r.y+r.height-(o+d),0),width:l}:{})}if(a==="left"){var v={x:i-x,y:o+d/2,textAnchor:g,verticalAnchor:"middle"};return Te(Te({},v),r?{width:Math.max(v.x-r.x,0),height:d}:{})}if(a==="right"){var j={x:i+l+x,y:o+d/2,textAnchor:p,verticalAnchor:"middle"};return Te(Te({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:d}:{})}var E=r?{width:l,height:d}:{};return a==="insideLeft"?Te({x:i+x,y:o+d/2,textAnchor:p,verticalAnchor:"middle"},E):a==="insideRight"?Te({x:i+l-x,y:o+d/2,textAnchor:g,verticalAnchor:"middle"},E):a==="insideTop"?Te({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:h},E):a==="insideBottom"?Te({x:i+l/2,y:o+d-u,textAnchor:"middle",verticalAnchor:f},E):a==="insideTopLeft"?Te({x:i+x,y:o+u,textAnchor:p,verticalAnchor:h},E):a==="insideTopRight"?Te({x:i+l-x,y:o+u,textAnchor:g,verticalAnchor:h},E):a==="insideBottomLeft"?Te({x:i+x,y:o+d-u,textAnchor:p,verticalAnchor:f},E):a==="insideBottomRight"?Te({x:i+l-x,y:o+d-u,textAnchor:g,verticalAnchor:f},E):a&&typeof a=="object"&&(X(a.x)||dn(a.x))&&(X(a.y)||dn(a.y))?Te({x:i+Bt(a.x,l),y:o+Bt(a.y,d),textAnchor:"end",verticalAnchor:"end"},E):Te({x:i+l/2,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},E)},b8=e=>"cx"in e&&X(e.cx);function wt(e){var{offset:t=5}=e,r=_p(e,c8),n=Te({offset:t},r),{viewBox:a,position:i,value:o,children:l,content:d,className:c="",textBreakAll:u,labelRef:f}=n,h=jd(),m=a||h;if(!m||xe(o)&&xe(l)&&!w.isValidElement(d)&&typeof d!="function")return null;if(w.isValidElement(d)){var{labelRef:x}=n,g=_p(n,u8);return w.cloneElement(d,g)}var p;if(typeof d=="function"){if(p=w.createElement(d,n),w.isValidElement(p))return p}else p=p8(n);var y=b8(m),b=le(n,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return g8(n,p,b);var v=y?v8(n):y8(n,m);return w.createElement(Yo,hr({ref:f,className:ue("recharts-label",c)},b,v,{breakAll:u}),p)}wt.displayName="Label";var ew=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:i,r:o,radius:l,innerRadius:d,outerRadius:c,x:u,y:f,top:h,left:m,width:x,height:g,clockWise:p,labelViewBox:y}=e;if(y)return y;if(X(x)&&X(g)){if(X(u)&&X(f))return{x:u,y:f,width:x,height:g};if(X(h)&&X(m))return{x:h,y:m,width:x,height:g}}if(X(u)&&X(f))return{x:u,y:f,width:0,height:0};if(X(t)&&X(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:i||n||0,innerRadius:d||0,outerRadius:c||l||o||0,clockWise:p};if(e.viewBox)return e.viewBox},w8=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?w.createElement(wt,hr({key:"label-implicit"},n)):lr(e)?w.createElement(wt,hr({key:"label-implicit",value:e},n)):w.isValidElement(e)?e.type===wt?w.cloneElement(e,Te({key:"label-implicit"},n)):w.createElement(wt,hr({key:"label-implicit",content:e},n)):B0(e)?w.createElement(wt,hr({key:"label-implicit",content:e},n)):e&&typeof e=="object"?w.createElement(wt,hr({},e,{key:"label-implicit"},n)):null},j8=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:i}=t,o=ew(t),l=wi(a,wt).map((c,u)=>w.cloneElement(c,{viewBox:r||o,key:"label-".concat(u)}));if(!n)return l;var d=w8(t.label,r||o,i);return[d,...l]};wt.parseViewBox=ew;wt.renderCallByParent=j8;var tw={},rw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(rw);var nw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(nw);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rw,r=nw,n=xo;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(tw);var _8=tw.last;const A8=tr(_8);var N8=["valueAccessor"],E8=["data","dataKey","clockWise","id","textBreakAll"];function Is(){return Is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Is.apply(null,arguments)}function Np(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ep(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Np(Object(r),!0).forEach(function(n){C8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Np(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C8(e,t,r){return(t=S8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S8(e){var t=D8(e,"string");return typeof t=="symbol"?t:t+""}function D8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cp(e,t){if(e==null)return{};var r,n,a=k8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function k8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var P8=e=>Array.isArray(e.value)?A8(e.value):e.value;function qr(e){var{valueAccessor:t=P8}=e,r=Cp(e,N8),{data:n,dataKey:a,clockWise:i,id:o,textBreakAll:l}=r,d=Cp(r,E8);return!n||!n.length?null:w.createElement(Re,{className:"recharts-label-list"},n.map((c,u)=>{var f=xe(a)?t(c,u):be(c&&c.payload,a),h=xe(o)?{}:{id:"".concat(o,"-").concat(u)};return w.createElement(wt,Is({},le(c,!0),d,h,{parentViewBox:c.parentViewBox,value:f,textBreakAll:l,viewBox:wt.parseViewBox(xe(i)?c:Ep(Ep({},c),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}qr.displayName="LabelList";function O8(e,t){return e?e===!0?w.createElement(qr,{key:"labelList-implicit",data:t}):w.isValidElement(e)||B0(e)?w.createElement(qr,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?w.createElement(qr,Is({data:t},e,{key:"labelList-implicit"})):null:null}function T8(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=wi(n,qr).map((o,l)=>w.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var i=O8(e.label,t);return[i,...a]}qr.renderCallByParent=T8;function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ju.apply(null,arguments)}var aw=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=ue("recharts-dot",a);return t===+t&&r===+r&&n===+n?w.createElement("circle",ju({},le(e,!1),Xu(e),{className:i,cx:t,cy:r,r:n})):null},iw=e=>e.graphicalItems.polarItems,I8=F([ke,Si],l0),F0=F([iw,Pe,I8],u0),B8=F([F0],d0),M0=F([B8,Jd],f0),F8=F([M0,Pe,F0],h0),M8=F([M0,Pe,F0],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var i,o=be(n,(i=t.dataKey)!==null&&i!==void 0?i:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:be(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),Sp=()=>{},$8=F([Pe,db,Sp,M8,Sp],x0),sw=F([Pe,_e,M0,F8,Ci,ke,$8],g0),R8=F([sw,Pe,Ea],b0);F([Pe,sw,R8,ke],j0);var L8={radiusAxis:{},angleAxis:{}},ow=zt({name:"polarAxis",initialState:L8,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:hF,removeRadiusAxis:mF,addAngleAxis:pF,removeAngleAxis:xF}=ow.actions,U8=ow.reducer;function Dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dp(Object(r),!0).forEach(function(n){z8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z8(e,t,r){return(t=K8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K8(e){var t=q8(e,"string");return typeof t=="symbol"?t:t+""}function q8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $0=(e,t)=>t,W8=[],R0=(e,t,r)=>(r==null?void 0:r.length)===0?W8:r,lw=F([Jd,$0,R0],(e,t,r)=>{var{chartData:n}=e,a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(i=>kp(kp({},t.presentationProps),i.props))),a!=null)return a}),H8=F([lw,$0,R0],(e,t,r)=>{if(e!=null)return e.map((n,a)=>{var i,o=be(n,t.nameKey,t.name),l;return r!=null&&(i=r[a])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:wa(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),G8=F([iw,$0],(e,t)=>{if(e.some(r=>r.type==="pie"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),V8=F([lw,G8,R0,Ge],(e,t,r,n)=>{if(!(t==null||e==null))return B5({offset:n,pieSettings:t,displayedData:e,cells:r})}),Y8={countOfBars:0,cartesianItems:[],polarItems:[]},cw=zt({name:"graphicalItems",initialState:Y8,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=vr(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=vr(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=vr(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:gF,removeBar:vF,addCartesianGraphicalItem:X8,replaceCartesianGraphicalItem:J8,removeCartesianGraphicalItem:Z8,addPolarGraphicalItem:Q8,removePolarGraphicalItem:e5}=cw.actions,t5=cw.reducer;function Pp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Op(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pp(Object(r),!0).forEach(function(n){r5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r5(e,t,r){return(t=n5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n5(e){var t=a5(e,"string");return typeof t=="symbol"?t:t+""}function a5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i5(e){var t=Ee(),r=w.useRef(null);return w.useEffect(()=>{var n=Op(Op({},e),{},{stackId:BC(e.stackId)});r.current===null?t(X8(n)):r.current!==n&&t(J8({prev:r.current,next:n})),r.current=n},[t,e]),w.useEffect(()=>()=>{r.current&&(t(Z8(r.current)),r.current=null)},[t]),null}function s5(e){var t=Ee();return w.useEffect(()=>(t(Q8(e)),()=>{t(e5(e))}),[t,e]),null}var uw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(uw);var o5=uw.isPlainObject;const l5=tr(o5);function Bs(){return Bs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bs.apply(null,arguments)}var Tp=(e,t,r,n,a)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+a),o+="L ".concat(e+r-i/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},c5={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},u5=e=>{var t=Kt(e,c5),r=w.useRef(),[n,a]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var p=r.current.getTotalLength();p&&a(p)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:d,height:c,className:u}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:x}=t;if(i!==+i||o!==+o||l!==+l||d!==+d||c!==+c||l===0&&d===0||c===0)return null;var g=ue("recharts-trapezoid",u);return x?w.createElement(Hr,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:c,x:i,y:o},to:{upperWidth:l,lowerWidth:d,height:c,x:i,y:o},duration:h,animationEasing:f,isActive:x},p=>{var{upperWidth:y,lowerWidth:b,height:v,x:j,y:E}=p;return w.createElement(Hr,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},w.createElement("path",Bs({},le(t,!0),{className:g,d:Tp(j,E,y,b,v),ref:r})))}):w.createElement("g",null,w.createElement("path",Bs({},le(t,!0),{className:g,d:Tp(i,o,l,d,c)})))},d5=["option","shapeType","propTransformer","activeClassName","isActive"];function f5(e,t){if(e==null)return{};var r,n,a=h5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function h5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ip(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ip(Object(r),!0).forEach(function(n){m5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ip(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m5(e,t,r){return(t=p5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p5(e){var t=x5(e,"string");return typeof t=="symbol"?t:t+""}function x5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g5(e,t){return Fs(Fs({},t),e)}function v5(e,t){return e==="symbols"}function Bp(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return w.createElement(Hv,r);case"trapezoid":return w.createElement(u5,r);case"sector":return w.createElement(Yv,r);case"symbols":if(v5(t))return w.createElement(po,r);break;default:return null}}function y5(e){return w.isValidElement(e)?e.props:e}function _u(e){var{option:t,shapeType:r,propTransformer:n=g5,activeClassName:a="recharts-active-shape",isActive:i}=e,o=f5(e,d5),l;if(w.isValidElement(t))l=w.cloneElement(t,Fs(Fs({},o),y5(t)));else if(typeof t=="function")l=t(o);else if(l5(t)&&typeof t!="boolean"){var d=n(t,o);l=w.createElement(Bp,{shapeType:r,elementProps:d})}else{var c=o;l=w.createElement(Bp,{shapeType:r,elementProps:c})}return i?w.createElement(Re,{className:a},l):l}var dw=(e,t)=>{var r=Ee();return(n,a)=>i=>{e==null||e(n,a,i),r(Nb({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},fw=e=>{var t=Ee();return(r,n)=>a=>{e==null||e(r,n,a),t(x6())}},hw=(e,t)=>{var r=Ee();return(n,a)=>i=>{e==null||e(n,a,i),r(g6({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function L0(e){var{fn:t,args:r}=e,n=Ee(),a=st();return w.useEffect(()=>{if(!a){var i=t(r);return n(h6(i)),()=>{n(m6(i))}}},[t,r,n,a]),null}var mw=()=>{};function pw(e){var{legendPayload:t}=e,r=Ee(),n=st();return w.useEffect(()=>n?mw:(r(Fv(t)),()=>{r(Mv(t))}),[r,n,t]),null}function b5(e){var{legendPayload:t}=e,r=Ee(),n=J(_e);return w.useEffect(()=>n!=="centric"&&n!=="radial"?mw:(r(Fv(t)),()=>{r(Mv(t))}),[r,n,t]),null}function U0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=w.useRef(An(t)),n=w.useRef(e);return n.current!==e&&(r.current=An(t),n.current=e),r.current}var w5=["onMouseEnter","onClick","onMouseLeave"];function j5(e,t){if(e==null)return{};var r,n,a=_5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Fp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fp(Object(r),!0).forEach(function(n){Xo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xo(e,t,r){return(t=A5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A5(e){var t=N5(e,"string");return typeof t=="symbol"?t:t+""}function N5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dn(){return Dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dn.apply(null,arguments)}function E5(e){var t=w.useMemo(()=>le(e,!1),[e]),r=w.useMemo(()=>wi(e.children,Ti),[e.children]),n=w.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:t}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,t]),a=J(i=>H8(i,n,r));return w.createElement(b5,{legendPayload:a})}function C5(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:i,fill:o,name:l,hide:d,tooltipType:c}=e;return{dataDefinedOnItem:n==null?void 0:n.map(u=>u.tooltipPayload),positions:n==null?void 0:n.map(u=>u.tooltipPosition),settings:{stroke:a,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:wa(l,t),hide:d,type:c,color:o,unit:""}}}var S5=(e,t)=>e>t?"start":e<t?"end":"middle",D5=(e,t,r)=>typeof t=="function"?t(e):Bt(t,r,r*.8),k5=(e,t,r)=>{var{top:n,left:a,width:i,height:o}=t,l=Dv(i,o),d=a+Bt(e.cx,i,i/2),c=n+Bt(e.cy,o,o/2),u=Bt(e.innerRadius,l,0),f=D5(r,e.outerRadius,l),h=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:d,cy:c,innerRadius:u,outerRadius:f,maxRadius:h}},P5=(e,t)=>{var r=at(t-e),n=Math.min(Math.abs(t-e),360);return r*n},O5=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ue("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return w.createElement(Oo,Dn({},t,{type:"linear",className:r}))},T5=(e,t,r)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),w.isValidElement(n)))return n;var a=ue("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return w.createElement(Yo,Dn({},t,{alignmentBaseline:"middle",className:a}),n)};function I5(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:i,dataKey:o}=r;if(!n||!a||!t)return null;var l=le(r,!1),d=le(a,!1),c=le(i,!1),u=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,m)=>{var x=(h.startAngle+h.endAngle)/2,g=Be(h.cx,h.cy,h.outerRadius+u,x),p=Se(Se(Se(Se({},l),h),{},{stroke:"none"},d),{},{index:m,textAnchor:S5(g.x,h.cx)},g),y=Se(Se(Se(Se({},l),h),{},{fill:"none",stroke:h.fill},c),{},{index:m,points:[Be(h.cx,h.cy,h.outerRadius,x),g],key:"line"});return w.createElement(Re,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},i&&O5(i,y),T5(a,p,be(h,o)))});return w.createElement(Re,{className:"recharts-pie-labels"},f)}function xw(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:i}=e,o=J(Sn),{onMouseEnter:l,onClick:d,onMouseLeave:c}=a,u=j5(a,w5),f=dw(l,a.dataKey),h=fw(c),m=hw(d,a.dataKey);return t==null?null:w.createElement(w.Fragment,null,t.map((x,g)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&t.length!==1)return null;var p=r&&String(g)===o,y=o?n:null,b=p?r:y,v=Se(Se({},x),{},{stroke:x.stroke,tabIndex:-1,[bd]:g,[wd]:a.dataKey});return w.createElement(Re,Dn({tabIndex:-1,className:"recharts-pie-sector"},uo(u,x,g),{onMouseEnter:f(x,g),onMouseLeave:h(x,g),onClick:m(x,g),key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(g)}),w.createElement(_u,Dn({option:b,isActive:p,shapeType:"sector"},v)))}),w.createElement(I5,{sectors:t,props:a,showLabels:i}))}function B5(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:d,dataKey:c,nameKey:u,tooltipType:f}=r,h=Math.abs(r.minAngle),m=P5(l,d),x=Math.abs(m),g=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,p=n.filter(_=>be(_,c,0)!==0).length,y=(x>=360?p:p-1)*g,b=x-p*h-y,v=n.reduce((_,C)=>{var A=be(C,c,0);return _+(X(A)?A:0)},0),j;if(v>0){var E;j=n.map((_,C)=>{var A=be(_,c,0),S=be(_,u,C),N=k5(r,i,_),D=(X(A)?A:0)/v,k,P=Se(Se({},_),a&&a[C]&&a[C].props);C?k=E.endAngle+at(m)*g*(A!==0?1:0):k=l;var R=k+at(m)*((A!==0?h:0)+D*b),B=(k+R)/2,z=(N.innerRadius+N.outerRadius)/2,$=[{name:S,value:A,payload:P,dataKey:c,type:f}],q=Be(N.cx,N.cy,z,B);return E=Se(Se(Se(Se({},r.presentationProps),{},{percent:D,cornerRadius:o,name:S,tooltipPayload:$,midAngle:B,middleRadius:z,tooltipPosition:q},P),N),{},{value:be(_,c),startAngle:k,endAngle:R,payload:P,paddingAngle:at(m)*g}),E})}return j}function F5(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:d,inactiveShape:c,onAnimationStart:u,onAnimationEnd:f}=t,h=U0(t,"recharts-pie-"),m=r.current,[x,g]=w.useState(!0),p=w.useCallback(()=>{typeof f=="function"&&f(),g(!1)},[f]),y=w.useCallback(()=>{typeof u=="function"&&u(),g(!0)},[u]);return w.createElement(Hr,{begin:i,duration:o,isActive:a,easing:l,from:{t:0},to:{t:1},onAnimationStart:y,onAnimationEnd:p,key:h},b=>{var{t:v}=b,j=[],E=n&&n[0],_=E.startAngle;return n.forEach((C,A)=>{var S=m&&m[A],N=A>0?Wr(C,"paddingAngle",0):0;if(S){var D=Yt(S.endAngle-S.startAngle,C.endAngle-C.startAngle),k=Se(Se({},C),{},{startAngle:_+N,endAngle:_+D(v)+N});j.push(k),_=k.endAngle}else{var{endAngle:P,startAngle:R}=C,B=Yt(0,P-R),z=B(v),$=Se(Se({},C),{},{startAngle:_+N,endAngle:_+z+N});j.push($),_=$.endAngle}}),r.current=j,w.createElement(Re,null,w.createElement(xw,{sectors:j,activeShape:d,inactiveShape:c,allOtherPieProps:t,showLabels:!x}))})}function M5(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,i=w.useRef(null),o=i.current;return r&&t&&t.length&&(!o||o!==t)?w.createElement(F5,{props:e,previousSectorsRef:i}):w.createElement(xw,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function $5(e){var{hide:t,className:r,rootTabIndex:n}=e,a=ue("recharts-pie",r);return t?null:w.createElement(Re,{tabIndex:n,className:a},w.createElement(M5,e))}var gw={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Tn.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function R5(e){var t=Kt(e,gw),r=w.useMemo(()=>wi(e.children,Ti),[e.children]),n=le(t,!1),a=w.useMemo(()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:n}),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,n]),i=J(o=>V8(o,a,r));return w.createElement(w.Fragment,null,w.createElement(L0,{fn:C5,args:Se(Se({},t),{},{sectors:i})}),w.createElement($5,Dn({},t,{sectors:i})))}class z0 extends w.PureComponent{constructor(){super(...arguments),Xo(this,"id",An("recharts-pie-"))}render(){return w.createElement(w.Fragment,null,w.createElement(s5,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),w.createElement(E5,this.props),w.createElement(R5,this.props),this.props.children)}}Xo(z0,"displayName","Pie");Xo(z0,"defaultProps",gw);var L5=F([Ge],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),U5=F([L5,Er,Cr],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),z5=e=>{var t=st();return J(r=>Sa(r,"xAxis",e,t))},K5=e=>{var t=st();return J(r=>Sa(r,"yAxis",e,t))},K0=()=>J(U5),q5=()=>J(rO);function Mp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $p(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mp(Object(r),!0).forEach(function(n){W5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W5(e,t,r){return(t=H5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H5(e){var t=G5(e,"string");return typeof t=="symbol"?t:t+""}function G5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V5=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var o=$p($p({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},le(a,!1)),Xu(a)),l;return w.isValidElement(a)?l=w.cloneElement(a,o):typeof a=="function"?l=a(o):l=w.createElement(aw,o),w.createElement(Re,{className:"recharts-active-dot"},l)};function Y5(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,i=J(Sn),o=q5();if(t==null||o==null)return null;var l=t.find(d=>o.includes(d.payload));return xe(l)?null:V5({point:l,childIndex:Number(i),mainColor:r,dataKey:a,activeDot:n})}var X5=["children"];function J5(e,t){if(e==null)return{};var r,n,a=Z5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Z5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Rp=()=>{},vw=w.createContext({addErrorBar:Rp,removeErrorBar:Rp}),Q5={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},yw=w.createContext(Q5);function bw(e){var{children:t}=e,r=J5(e,X5);return w.createElement(yw.Provider,{value:r},t)}var e3=()=>w.useContext(yw),ww=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,data:o,stackId:l,hide:d,type:c,barSize:u}=e,[f,h]=w.useState([]),m=w.useCallback(p=>{h(y=>[...y,p])},[h]),x=w.useCallback(p=>{h(y=>y.filter(b=>b!==p))},[h]),g=st();return w.createElement(vw.Provider,{value:{addErrorBar:m,removeErrorBar:x}},w.createElement(i5,{type:c,data:o,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,errorBars:f,stackId:l,hide:d,barSize:u,isPanorama:g}),t)};function t3(e){var{addErrorBar:t,removeErrorBar:r}=w.useContext(vw);return w.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var r3=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function jw(e,t,r){return(t=n3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n3(e){var t=a3(e,"string");return typeof t=="symbol"?t:t+""}function a3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hi.apply(null,arguments)}function i3(e,t){if(e==null)return{};var r,n,a=s3(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function o3(e){var{direction:t,width:r,dataKey:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:l}=e,d=i3(e,r3),c=le(d,!1),{data:u,dataPointFormatter:f,xAxisId:h,yAxisId:m,errorBarOffset:x}=e3(),g=z5(h),p=K5(m);if((g==null?void 0:g.scale)==null||(p==null?void 0:p.scale)==null||u==null||t==="x"&&g.type!=="number")return null;var y=u.map(b=>{var{x:v,y:j,value:E,errorVal:_}=f(b,n,t);if(!_)return null;var C=[],A,S;if(Array.isArray(_)?[A,S]=_:A=S=_,t==="x"){var{scale:N}=g,D=j+x,k=D+r,P=D-r,R=N(E-A),B=N(E+S);C.push({x1:B,y1:k,x2:B,y2:P}),C.push({x1:R,y1:D,x2:B,y2:D}),C.push({x1:R,y1:k,x2:R,y2:P})}else if(t==="y"){var{scale:z}=p,$=v+x,q=$-r,K=$+r,Z=z(E-A),I=z(E+S);C.push({x1:q,y1:I,x2:K,y2:I}),C.push({x1:$,y1:Z,x2:$,y2:I}),C.push({x1:q,y1:Z,x2:K,y2:Z})}var O="".concat(v+x,"px ").concat(j+x,"px");return w.createElement(Re,hi({className:"recharts-errorBar",key:"bar-".concat(C.map(T=>"".concat(T.x1,"-").concat(T.x2,"-").concat(T.y1,"-").concat(T.y2)))},c),C.map(T=>{var M=a?{transformOrigin:"".concat(T.x1-5,"px")}:void 0;return w.createElement(Hr,{from:{transform:"scaleY(0)",transformOrigin:O},to:{transform:"scaleY(1)",transformOrigin:O},begin:i,easing:l,isActive:a,duration:o,key:"line-".concat(T.x1,"-").concat(T.x2,"-").concat(T.y1,"-").concat(T.y2),style:{transformOrigin:O}},w.createElement("line",hi({},T,{style:M})))}))});return w.createElement(Re,{className:"recharts-errorBars"},y)}var _w=w.createContext(void 0);function l3(e){var t=w.useContext(_w);return e??t??"x"}function c3(e){var{direction:t,children:r}=e;return w.createElement(_w.Provider,{value:t},r)}var Aw={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function u3(e){var t=l3(e.direction),{width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o}=Kt(e,Aw);return w.createElement(w.Fragment,null,w.createElement(t3,{dataKey:e.dataKey,direction:t}),w.createElement(o3,hi({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o})))}class Nw extends w.Component{render(){return w.createElement(u3,this.props)}}jw(Nw,"defaultProps",Aw);jw(Nw,"displayName","ErrorBar");function q0(e,t){var r,n,a=J(c=>Dr(c,e)),i=J(c=>Zr(c,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:gt.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:vt.allowDataOverflow,d=o||l;return{needClip:d,needClipX:o,needClipY:l}}function Ew(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=K0(),{needClipX:i,needClipY:o,needClip:l}=q0(t,r);if(!l)return null;var{x:d,y:c,width:u,height:f}=a;return w.createElement("clipPath",{id:"clipPath-".concat(n)},w.createElement("rect",{x:i?d:d-u/2,y:o?c:c-f/2,width:i?u:u*2,height:o?f:f*2}))}var Cw=e=>{var{chartData:t}=e,r=Ee(),n=st();return w.useEffect(()=>n?()=>{}:(r(up(t)),()=>{r(up(void 0))}),[t,r,n]),null},Lp={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Sw=zt({name:"brush",initialState:Lp,reducers:{setBrushSettings(e,t){return t.payload==null?Lp:t.payload}}}),{setBrushSettings:yF}=Sw.actions,d3=Sw.reducer;function f3(e,t,r){return(t=h3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h3(e){var t=m3(e,"string");return typeof t=="symbol"?t:t+""}function m3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class W0{static create(t){return new W0(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}f3(W0,"EPS",1e-4);function p3(e){return(e%180+180)%180}var x3=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=p3(a),o=i*Math.PI/180,l=Math.atan(n/r),d=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},g3={dots:[],areas:[],lines:[]},Dw=zt({name:"referenceElements",initialState:g3,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=vr(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=vr(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=vr(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:bF,removeDot:wF,addArea:jF,removeArea:_F,addLine:AF,removeLine:NF}=Dw.actions,v3=Dw.reducer,y3=w.createContext(void 0),b3=e=>{var{children:t}=e,[r]=w.useState("".concat(An("recharts"),"-clip")),n=K0();if(n==null)return null;var{x:a,y:i,width:o,height:l}=n;return w.createElement(y3.Provider,{value:r},w.createElement("defs",null,w.createElement("clipPath",{id:r},w.createElement("rect",{x:a,y:i,height:l,width:o}))),t)};function fc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function kw(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function w3(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return x3(n,r)}function j3(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:l}=e;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Ms(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function _3(e,t){return kw(e,t+1)}function A3(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:l}=t,d=0,c=1,u=o,f=function(){var x=n==null?void 0:n[d];if(x===void 0)return{v:kw(n,c)};var g=d,p,y=()=>(p===void 0&&(p=r(x,g)),p),b=x.coordinate,v=d===0||Ms(e,b,y,u,l);v||(d=0,u=o,c+=1),v&&(u=b+e*(y()/2+a),d+=c)},h;c<=i.length;)if(h=f(),h)return h.v;return[]}function Up(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Up(Object(r),!0).forEach(function(n){N3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Up(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N3(e,t,r){return(t=E3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E3(e){var t=C3(e,"string");return typeof t=="symbol"?t:t+""}function C3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S3(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:d}=t,c=function(h){var m=i[h],x,g=()=>(x===void 0&&(x=r(m,h)),x);if(h===o-1){var p=e*(m.coordinate+e*g()/2-d);i[h]=m=tt(tt({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate})}else i[h]=m=tt(tt({},m),{},{tickCoord:m.coordinate});var y=Ms(e,m.tickCoord,g,l,d);y&&(d=m.tickCoord-e*(g()/2+a),i[h]=tt(tt({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function D3(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,{start:d,end:c}=t;if(i){var u=n[l-1],f=r(u,l-1),h=e*(u.coordinate+e*f/2-c);o[l-1]=u=tt(tt({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate});var m=Ms(e,u.tickCoord,()=>f,d,c);m&&(c=u.tickCoord-e*(f/2+a),o[l-1]=tt(tt({},u),{},{isShow:!0}))}for(var x=i?l-1:l,g=function(b){var v=o[b],j,E=()=>(j===void 0&&(j=r(v,b)),j);if(b===0){var _=e*(v.coordinate-e*E()/2-d);o[b]=v=tt(tt({},v),{},{tickCoord:_<0?v.coordinate-_*e:v.coordinate})}else o[b]=v=tt(tt({},v),{},{tickCoord:v.coordinate});var C=Ms(e,v.tickCoord,E,d,c);C&&(d=v.tickCoord+e*(E()/2+a),o[b]=tt(tt({},v),{},{isShow:!0}))},p=0;p<x;p++)g(p);return o}function H0(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:l,interval:d,tickFormatter:c,unit:u,angle:f}=e;if(!a||!a.length||!n)return[];if(X(d)||Tn.isSsr){var h;return(h=_3(a,X(d)?d:0))!==null&&h!==void 0?h:[]}var m=[],x=l==="top"||l==="bottom"?"width":"height",g=u&&x==="width"?Xa(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=(v,j)=>{var E=typeof c=="function"?c(v.value,j):v.value;return x==="width"?w3(Xa(E,{fontSize:t,letterSpacing:r}),g,f):Xa(E,{fontSize:t,letterSpacing:r})[x]},y=a.length>=2?at(a[1].coordinate-a[0].coordinate):1,b=j3(i,y,x);return d==="equidistantPreserveStart"?A3(y,b,p,a,o):(d==="preserveStart"||d==="preserveStartEnd"?m=D3(y,b,p,a,o,d==="preserveStartEnd"):m=S3(y,b,p,a,o),m.filter(v=>v.isShow))}var k3=["viewBox"],P3=["viewBox"];function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zn.apply(null,arguments)}function zp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zp(Object(r),!0).forEach(function(n){G0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kp(e,t){if(e==null)return{};var r,n,a=O3(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function O3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function G0(e,t,r){return(t=T3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T3(e){var t=I3(e,"string");return typeof t=="symbol"?t:t+""}function I3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Qr extends w.Component{constructor(t){super(t),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=Kp(t,k3),i=this.props,{viewBox:o}=i,l=Kp(i,P3);return!fc(n,o)||!fc(a,l)||!fc(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:i,orientation:o,tickSize:l,mirror:d,tickMargin:c}=this.props,u,f,h,m,x,g,p=d?-1:1,y=t.tickSize||l,b=X(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=f=t.coordinate,m=n+ +!d*i,h=m-p*y,g=h-p*c,x=b;break;case"left":h=m=t.coordinate,f=r+ +!d*a,u=f-p*y,x=u-p*c,g=b;break;case"right":h=m=t.coordinate,f=r+ +d*a,u=f+p*y,x=u+p*c,g=b;break;default:u=f=t.coordinate,m=n+ +d*i,h=m+p*y,g=h+p*c,x=b;break}return{line:{x1:u,y1:h,x2:f,y2:m},tick:{x,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:l}=this.props,d=Me(Me(Me({},le(this.props,!1)),le(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var c=+(i==="top"&&!o||i==="bottom"&&o);d=Me(Me({},d),{},{x1:t,y1:r+c*a,x2:t+n,y2:r+c*a})}else{var u=+(i==="left"&&!o||i==="right"&&o);d=Me(Me({},d),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+a})}return w.createElement("line",Zn({},d,{className:ue("recharts-cartesian-axis-line",Wr(l,"className"))}))}static renderTickItem(t,r,n){var a,i=ue(r.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))a=w.cloneElement(t,Me(Me({},r),{},{className:i}));else if(typeof t=="function")a=t(Me(Me({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=ue(o,t.className)),a=w.createElement(Yo,Zn({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:i,tick:o,tickFormatter:l,unit:d}=this.props,c=H0(Me(Me({},this.props),{},{ticks:n}),t,r),u=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),h=le(this.props,!1),m=le(o,!1),x=Me(Me({},h),{},{fill:"none"},le(a,!1)),g=c.map((p,y)=>{var{line:b,tick:v}=this.getTickLineCoord(p),j=Me(Me(Me(Me({textAnchor:u,verticalAnchor:f},h),{},{stroke:"none",fill:i},m),v),{},{index:y,payload:p,visibleTicksCount:c.length,tickFormatter:l});return w.createElement(Re,Zn({className:"recharts-cartesian-axis-tick",key:"tick-".concat(p.value,"-").concat(p.coordinate,"-").concat(p.tickCoord)},uo(this.props,p,y)),a&&w.createElement("line",Zn({},x,b,{className:ue("recharts-cartesian-axis-tick-line",Wr(a,"className"))})),o&&Qr.renderTickItem(o,j,"".concat(typeof l=="function"?l(p.value,y):p.value).concat(d||"")))});return g.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},g):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:w.createElement(Re,{className:ue("recharts-cartesian-axis",a),ref:l=>{if(l){var d=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var c=d[0];if(c){var u=window.getComputedStyle(c).fontSize,f=window.getComputedStyle(c).letterSpacing;(u!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),wt.renderCallByParent(this.props))}}G0(Qr,"displayName","CartesianAxis");G0(Qr,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var B3=["x1","y1","x2","y2","key"],F3=["offset"],M3=["xAxisId","yAxisId"],$3=["xAxisId","yAxisId"];function qp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qp(Object(r),!0).forEach(function(n){R3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R3(e,t,r){return(t=L3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L3(e){var t=U3(e,"string");return typeof t=="symbol"?t:t+""}function U3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pn.apply(null,arguments)}function $s(e,t){if(e==null)return{};var r,n,a=z3(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function z3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var K3=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:l}=e;return w.createElement("rect",{x:n,y:a,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Pw(e,t){var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:i,y2:o,key:l}=t,d=$s(t,B3),c=le(d,!1),{offset:u}=c,f=$s(c,F3);r=w.createElement("line",pn({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function q3(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,l=$s(e,M3),d=a.map((c,u)=>{var f=nt(nt({},l),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(u),index:u});return Pw(n,f)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function W3(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,l=$s(e,$3),d=a.map((c,u)=>{var f=nt(nt({},l),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(u),index:u});return Pw(n,f)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function H3(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:l,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var c=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==c[0]&&c.unshift(0);var u=c.map((f,h)=>{var m=!c[h+1],x=m?a+o-f:c[h+1]-f;if(x<=0)return null;var g=h%t.length;return w.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:x,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function G3(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:l,verticalPoints:d}=e;if(!t||!r||!r.length)return null;var c=d.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==c[0]&&c.unshift(0);var u=c.map((f,h)=>{var m=!c[h+1],x=m?a+o-f:c[h+1]-f;if(x<=0)return null;var g=h%r.length;return w.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:x,height:l,stroke:"none",fill:r[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var V3=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return kv(H0(nt(nt(nt({},Qr.defaultProps),r),{},{ticks:Pv(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},Y3=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return kv(H0(nt(nt(nt({},Qr.defaultProps),r),{},{ticks:Pv(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},X3={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function mi(e){var t=_d(),r=Ad(),n=Iv(),a=nt(nt({},Kt(e,X3)),{},{x:X(e.x)?e.x:n.left,y:X(e.y)?e.y:n.top,width:X(e.width)?e.width:n.width,height:X(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:d,width:c,height:u,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,x=st(),g=J(S=>rp(S,"xAxis",i,x)),p=J(S=>rp(S,"yAxis",o,x));if(!X(c)||c<=0||!X(u)||u<=0||!X(l)||l!==+l||!X(d)||d!==+d)return null;var y=a.verticalCoordinatesGenerator||V3,b=a.horizontalCoordinatesGenerator||Y3,{horizontalPoints:v,verticalPoints:j}=a;if((!v||!v.length)&&typeof b=="function"){var E=h&&h.length,_=b({yAxis:p?nt(nt({},p),{},{ticks:E?h:p.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);Ya(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(v=_)}if((!j||!j.length)&&typeof y=="function"){var C=m&&m.length,A=y({xAxis:g?nt(nt({},g),{},{ticks:C?m:g.ticks}):void 0,width:t,height:r,offset:n},C?!0:f);Ya(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(j=A)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(K3,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),w.createElement(H3,pn({},a,{horizontalPoints:v})),w.createElement(G3,pn({},a,{verticalPoints:j})),w.createElement(q3,pn({},a,{offset:n,horizontalPoints:v,xAxis:g,yAxis:p})),w.createElement(W3,pn({},a,{offset:n,verticalPoints:j,xAxis:g,yAxis:p})))}mi.displayName="CartesianGrid";var Ow=(e,t,r,n)=>Sa(e,"xAxis",t,n),Tw=(e,t,r,n)=>Ho(e,"xAxis",t,n),Iw=(e,t,r,n)=>Sa(e,"yAxis",r,n),Bw=(e,t,r,n)=>Ho(e,"yAxis",r,n),J3=F([_e,Ow,Iw,Tw,Bw],(e,t,r,n,a)=>Yr(e,"xAxis")?Jc(t,n,!1):Jc(r,a,!1)),Z3=(e,t,r,n,a)=>a,Q3=F([c0,Z3],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),eT=F([_e,Ow,Iw,Tw,Bw,Q3,J3,Zd],(e,t,r,n,a,i,o,l)=>{var{chartData:d,dataStartIndex:c,dataEndIndex:u}=l;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null)){var{dataKey:f,data:h}=i,m;if(h!=null&&h.length>0?m=h:m=d==null?void 0:d.slice(c,u+1),m!=null)return yT({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:o,displayedData:m})}}),tT=["type","layout","connectNulls","needClip"],rT=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function Fw(e,t){if(e==null)return{};var r,n,a=nT(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nT(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Wp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wp(Object(r),!0).forEach(function(n){Jo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jo(e,t,r){return(t=aT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aT(e){var t=iT(e,"string");return typeof t=="symbol"?t:t+""}function iT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ma(){return ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ma.apply(null,arguments)}var sT=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:wa(r,t),payload:e}]};function oT(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:l,unit:d}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:wa(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:d}}}var Mw=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function lT(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var cT=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return Mw(t,e);for(var a=Math.floor(e/n),i=e%n,o=t-e,l=[],d=0,c=0;d<r.length;c+=r[d],++d)if(c+r[d]>i){l=[...r.slice(0,d),i-c];break}var u=l.length%2===0?[0,o]:[o];return[...lT(r,a),...l,...u].map(f=>"".concat(f,"px")).join(", ")};function uT(e,t){var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=ue("recharts-line-dot",typeof e!="boolean"?e.className:"");r=w.createElement(aw,ma({},t,{className:n}))}return r}function dT(e,t){return e==null?!1:t?!0:e.length===1}function fT(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:o}=n;if(!dT(r,a))return null;var l=fg(a),d=le(n,!1),c=le(a,!0),u=r.map((h,m)=>{var x=Vt(Vt(Vt({key:"dot-".concat(m),r:3},d),c),{},{index:m,cx:h.x,cy:h.y,dataKey:i,value:h.value,payload:h.payload,points:r});return uT(a,x)}),f={clipPath:o?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):null};return w.createElement(Re,ma({className:"recharts-line-dots",key:"dots"},f),u)}function Au(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i,showLabels:o}=e,{type:l,layout:d,connectNulls:c,needClip:u}=i,f=Fw(i,tT),h=Vt(Vt({},le(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):null,points:n,type:l,layout:d,connectNulls:c,strokeDasharray:a??i.strokeDasharray});return w.createElement(w.Fragment,null,(n==null?void 0:n.length)>1&&w.createElement(Oo,ma({},h,{pathRef:r})),w.createElement(fT,{points:n,clipPathId:t,props:i}),o&&qr.renderCallByParent(i,n))}function hT(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function mT(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:d,animationBegin:c,animationDuration:u,animationEasing:f,animateNewValues:h,width:m,height:x,onAnimationEnd:g,onAnimationStart:p}=r,y=a.current,b=U0(r,"recharts-line-"),[v,j]=w.useState(!1),E=w.useCallback(()=>{typeof g=="function"&&g(),j(!1)},[g]),_=w.useCallback(()=>{typeof p=="function"&&p(),j(!0)},[p]),C=hT(n.current),A=i.current;return w.createElement(Hr,{begin:c,duration:u,isActive:d,easing:f,from:{t:0},to:{t:1},onAnimationEnd:E,onAnimationStart:_,key:b},S=>{var{t:N}=S,D=Yt(A,C+A),k=Math.min(D(N),C),P;if(l){var R="".concat(l).split(/[,\s]+/gim).map($=>parseFloat($));P=cT(k,C,R)}else P=Mw(C,k);if(y){var B=y.length/o.length,z=N===1?o:o.map(($,q)=>{var K=Math.floor(q*B);if(y[K]){var Z=y[K],I=Yt(Z.x,$.x),O=Yt(Z.y,$.y);return Vt(Vt({},$),{},{x:I(N),y:O(N)})}if(h){var T=Yt(m*2,$.x),M=Yt(x/2,$.y);return Vt(Vt({},$),{},{x:T(N),y:M(N)})}return Vt(Vt({},$),{},{x:$.x,y:$.y})});return a.current=z,w.createElement(Au,{props:r,points:z,clipPathId:t,pathRef:n,showLabels:!v,strokeDasharray:P})}return N>0&&C>0&&(a.current=o,i.current=k),w.createElement(Au,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!v,strokeDasharray:P})})}function pT(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:a}=r,i=w.useRef(null),o=w.useRef(0),l=w.useRef(null),d=i.current;return a&&n&&n.length&&d!==n?w.createElement(mT,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:l}):w.createElement(Au,{props:r,points:n,clipPathId:t,pathRef:l,showLabels:!0})}var xT=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:be(e.payload,t)});class gT extends w.Component{constructor(){super(...arguments),Jo(this,"id",An("recharts-line-"))}render(){var t,{hide:r,dot:n,points:a,className:i,xAxisId:o,yAxisId:l,top:d,left:c,width:u,height:f,id:h,needClip:m,layout:x}=this.props;if(r)return null;var g=ue("recharts-line",i),p=xe(h)?this.id:h,{r:y=3,strokeWidth:b=2}=(t=le(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},v=fg(n),j=y*2+b;return w.createElement(w.Fragment,null,w.createElement(Re,{className:g},m&&w.createElement("defs",null,w.createElement(Ew,{clipPathId:p,xAxisId:o,yAxisId:l}),!v&&w.createElement("clipPath",{id:"clipPath-dots-".concat(p)},w.createElement("rect",{x:c-j/2,y:d-j/2,width:u+j,height:f+j}))),w.createElement(pT,{props:this.props,clipPathId:p}),w.createElement(c3,{direction:x==="horizontal"?"y":"x"},w.createElement(bw,{xAxisId:o,yAxisId:l,data:a,dataPointFormatter:xT,errorBarOffset:0},this.props.children))),w.createElement(Y5,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var $w={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Tn.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function vT(e){var t=Kt(e,$w),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:l,dot:d,hide:c,isAnimationActive:u,label:f,legendType:h,xAxisId:m,yAxisId:x}=t,g=Fw(t,rT),{needClip:p}=q0(m,x),{height:y,width:b,x:v,y:j}=K0(),E=Nd(),_=st(),C=w.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),A=J(S=>eT(S,m,x,_,C));return E!=="horizontal"&&E!=="vertical"?null:w.createElement(gT,ma({},g,{connectNulls:l,dot:d,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:c,label:f,legendType:h,xAxisId:m,yAxisId:x,points:A,layout:E,height:y,width:b,left:v,top:j,needClip:p}))}function yT(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:d}=e;return d.map((c,u)=>{var f=be(c,o);return t==="horizontal"?{x:vs({axis:r,ticks:a,bandSize:l,entry:c,index:u}),y:xe(f)?null:n.scale(f),value:f,payload:c}:{x:xe(f)?null:r.scale(f),y:vs({axis:n,ticks:i,bandSize:l,entry:c,index:u}),value:f,payload:c}})}class pa extends w.PureComponent{render(){return w.createElement(ww,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},w.createElement(pw,{legendPayload:sT(this.props)}),w.createElement(L0,{fn:oT,args:this.props}),w.createElement(vT,this.props))}}Jo(pa,"displayName","Line");Jo(pa,"defaultProps",$w);function Hp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hp(Object(r),!0).forEach(function(n){bT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bT(e,t,r){return(t=wT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wT(e){var t=jT(e,"string");return typeof t=="symbol"?t:t+""}function jT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _T={xAxis:{},yAxis:{},zAxis:{}},Rw=zt({name:"cartesianAxis",initialState:_T,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=Gp(Gp({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:AT,removeXAxis:NT,addYAxis:ET,removeYAxis:CT,addZAxis:ST,removeZAxis:DT,updateYAxisWidth:kT}=Rw.actions,PT=Rw.reducer;function Lw(e,t,r){return(t=OT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OT(e){var t=TT(e,"string");return typeof t=="symbol"?t:t+""}function TT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IT(e){var t=Ee();return w.useEffect(()=>(t(ST(e)),()=>{t(DT(e))}),[e,t]),null}class V0 extends w.Component{render(){return w.createElement(IT,{domain:this.props.domain,id:this.props.zAxisId,dataKey:this.props.dataKey,name:this.props.name,unit:this.props.unit,range:this.props.range,scale:this.props.scale,type:this.props.type,allowDuplicatedCategory:zr.allowDuplicatedCategory,allowDataOverflow:zr.allowDataOverflow,reversed:zr.reversed,includeHidden:zr.includeHidden})}}Lw(V0,"displayName","ZAxis");Lw(V0,"defaultProps",{zAxisId:0,range:zr.range,scale:zr.scale,type:zr.type});var BT=["option","isActive"];function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ja.apply(null,arguments)}function FT(e,t){if(e==null)return{};var r,n,a=MT(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MT(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $T(e){var{option:t,isActive:r}=e,n=FT(e,BT);return typeof t=="string"?w.createElement(_u,Ja({option:w.createElement(po,Ja({type:t},n)),isActive:r,shapeType:"symbols"},n)):w.createElement(_u,Ja({option:t,isActive:r,shapeType:"symbols"},n))}var RT=(e,t,r,n,a,i,o)=>Sa(e,"xAxis",t,o),LT=(e,t,r,n,a,i,o)=>Ho(e,"xAxis",t,o),UT=(e,t,r,n,a,i,o)=>Sa(e,"yAxis",r,o),zT=(e,t,r,n,a,i,o)=>Ho(e,"yAxis",r,o),KT=(e,t,r,n)=>l6(e,"zAxis",n,!1),qT=(e,t,r,n,a)=>a,WT=(e,t,r,n,a,i)=>i,HT=(e,t,r,n,a,i,o)=>Zd(e,t,r,o),GT=F([c0,qT],(e,t)=>{if(e.some(r=>r.type==="scatter"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),VT=F([HT,RT,LT,UT,zT,KT,GT,WT],(e,t,r,n,a,i,o,l)=>{var{chartData:d,dataStartIndex:c,dataEndIndex:u}=e;if(o!=null){var f;if((o==null?void 0:o.data)!=null&&o.data.length>0?f=o.data:f=d==null?void 0:d.slice(c,u+1),!(f==null||t==null||n==null||r==null||a==null||(r==null?void 0:r.length)===0||(a==null?void 0:a.length)===0))return iI({displayedData:f,xAxis:t,yAxis:n,zAxis:i,scatterSettings:o,xAxisTicks:r,yAxisTicks:a,cells:l})}}),YT=["onMouseEnter","onClick","onMouseLeave"],XT=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function Uw(e,t){if(e==null)return{};var r,n,a=JT(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JT(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function xa(){return xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xa.apply(null,arguments)}function Vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vp(Object(r),!0).forEach(function(n){Y0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y0(e,t,r){return(t=ZT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZT(e){var t=QT(e,"string");return typeof t=="symbol"?t:t+""}function QT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eI=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:wa(r,t),payload:e}]};function tI(e){var{points:t,props:r}=e,{line:n,lineType:a,lineJointType:i}=r;if(!n)return null;var o=le(r,!1),l=le(n,!1),d,c;if(a==="joint")d=t.map(p=>({x:p.cx,y:p.cy}));else if(a==="fitting"){var{xmin:u,xmax:f,a:h,b:m}=kA(t),x=p=>h*p+m;d=[{x:u,y:x(u)},{x:f,y:x(f)}]}var g=ht(ht(ht({},o),{},{fill:"none",stroke:o&&o.fill},l),{},{points:d});return w.isValidElement(n)?c=w.cloneElement(n,g):typeof n=="function"?c=n(g):c=w.createElement(Oo,xa({},g,{type:i})),w.createElement(Re,{className:"recharts-scatter-line",key:"recharts-scatter-line"},c)}function zw(e){var{points:t,showLabels:r,allOtherScatterProps:n}=e,{shape:a,activeShape:i,dataKey:o}=n,l=le(n,!1),d=J(Sn),{onMouseEnter:c,onClick:u,onMouseLeave:f}=n,h=Uw(n,YT),m=dw(c,n.dataKey),x=fw(f),g=hw(u,n.dataKey);return t==null?null:w.createElement(w.Fragment,null,w.createElement(tI,{points:t,props:n}),t.map((p,y)=>{var b=i&&d===String(y),v=b?i:a,j=ht(ht(ht({key:"symbol-".concat(y)},l),p),{},{[bd]:y,[wd]:String(o)});return w.createElement(Re,xa({className:"recharts-scatter-symbol"},uo(h,p,y),{onMouseEnter:m(p,y),onMouseLeave:x(p,y),onClick:g(p,y),key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(y)}),w.createElement($T,xa({option:v,isActive:b},j)))}),r&&qr.renderCallByParent(n,t))}function rI(e){var{previousPointsRef:t,props:r}=e,{points:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:l}=r,d=t.current,c=U0(r,"recharts-scatter-"),[u,f]=w.useState(!1),h=w.useCallback(()=>{f(!1)},[]),m=w.useCallback(()=>{f(!0)},[]);return w.createElement(Hr,{begin:i,duration:o,isActive:a,easing:l,from:{t:0},to:{t:1},onAnimationEnd:h,onAnimationStart:m,key:c},x=>{var{t:g}=x,p=g===1?n:n.map((y,b)=>{var v=d&&d[b];if(v){var j=Yt(v.cx,y.cx),E=Yt(v.cy,y.cy),_=Yt(v.size,y.size);return ht(ht({},y),{},{cx:j(g),cy:E(g),size:_(g)})}var C=Yt(0,y.size);return ht(ht({},y),{},{size:C(g)})});return g>0&&(t.current=p),w.createElement(Re,null,w.createElement(zw,{points:p,allOtherScatterProps:r,showLabels:!u}))})}function nI(e){var{points:t,isAnimationActive:r}=e,n=w.useRef(null),a=n.current;return r&&t&&t.length&&(!a||a!==t)?w.createElement(rI,{props:e,previousPointsRef:n}):w.createElement(zw,{points:t,allOtherScatterProps:e,showLabels:!0})}function aI(e){var{dataKey:t,points:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:l,tooltipType:d}=e;return{dataDefinedOnItem:r==null?void 0:r.map(c=>c.tooltipPayload),positions:r==null?void 0:r.map(c=>c.tooltipPosition),settings:{stroke:n,strokeWidth:a,fill:i,nameKey:void 0,dataKey:t,name:wa(o,t),hide:l,type:d,color:i,unit:""}}}function iI(e){var{displayedData:t,xAxis:r,yAxis:n,zAxis:a,scatterSettings:i,xAxisTicks:o,yAxisTicks:l,cells:d}=e,c=xe(r.dataKey)?i.dataKey:r.dataKey,u=xe(n.dataKey)?i.dataKey:n.dataKey,f=a&&a.dataKey,h=a?a.range:V0.defaultProps.range,m=h&&h[0],x=r.scale.bandwidth?r.scale.bandwidth():0,g=n.scale.bandwidth?n.scale.bandwidth():0;return t.map((p,y)=>{var b=be(p,c),v=be(p,u),j=!xe(f)&&be(p,f)||"-",E=[{name:xe(r.dataKey)?i.name:r.name||r.dataKey,unit:r.unit||"",value:b,payload:p,dataKey:c,type:i.tooltipType},{name:xe(n.dataKey)?i.name:n.name||n.dataKey,unit:n.unit||"",value:v,payload:p,dataKey:u,type:i.tooltipType}];j!=="-"&&E.push({name:a.name||a.dataKey,unit:a.unit||"",value:j,payload:p,dataKey:f,type:i.tooltipType});var _=vs({axis:r,ticks:o,bandSize:x,entry:p,index:y,dataKey:c}),C=vs({axis:n,ticks:l,bandSize:g,entry:p,index:y,dataKey:u}),A=j!=="-"?a.scale(j):m,S=Math.sqrt(Math.max(A,0)/Math.PI);return ht(ht({},p),{},{cx:_,cy:C,x:_-S,y:C-S,width:2*S,height:2*S,size:A,node:{x:b,y:v,z:j},tooltipPayload:E,tooltipPosition:{x:_,y:C},payload:p},d&&d[y]&&d[y].props)})}var sI=(e,t,r)=>({x:e.cx,y:e.cy,value:r==="x"?+e.node.x:+e.node.y,errorVal:be(e,t)});function oI(e){var t=w.useRef(An("recharts-scatter-")),{hide:r,points:n,className:a,needClip:i,xAxisId:o,yAxisId:l,id:d,children:c}=e;if(r)return null;var u=ue("recharts-scatter",a),f=xe(d)?t.current:d;return w.createElement(Re,{className:u,clipPath:i?"url(#clipPath-".concat(f,")"):null},i&&w.createElement("defs",null,w.createElement(Ew,{clipPathId:f,xAxisId:o,yAxisId:l})),w.createElement(bw,{xAxisId:o,yAxisId:l,data:n,dataPointFormatter:sI,errorBarOffset:0},c),w.createElement(Re,{key:"recharts-scatter-symbols"},w.createElement(nI,e)))}var Kw={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Tn.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};function lI(e){var t=Kt(e,Kw),{animationBegin:r,animationDuration:n,animationEasing:a,hide:i,isAnimationActive:o,legendType:l,lineJointType:d,lineType:c,shape:u,xAxisId:f,yAxisId:h,zAxisId:m}=t,x=Uw(t,XT),{needClip:g}=q0(f,h),p=w.useMemo(()=>wi(e.children,Ti),[e.children]),y=w.useMemo(()=>({name:e.name,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey}),[e.data,e.dataKey,e.name,e.tooltipType]),b=st(),v=J(j=>VT(j,f,h,m,y,p,b));return g==null?null:w.createElement(w.Fragment,null,w.createElement(L0,{fn:aI,args:ht(ht({},e),{},{points:v})}),w.createElement(oI,xa({},x,{xAxisId:f,yAxisId:h,zAxisId:m,lineType:c,lineJointType:d,legendType:l,shape:u,hide:i,isAnimationActive:o,animationBegin:r,animationDuration:n,animationEasing:a,points:v,needClip:g})))}class X0 extends w.Component{render(){return w.createElement(ww,{type:"scatter",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:this.props.zAxisId,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},w.createElement(pw,{legendPayload:eI(this.props)}),w.createElement(lI,this.props))}}Y0(X0,"displayName","Scatter");Y0(X0,"defaultProps",Kw);var cI=["children"],uI=["dangerouslySetInnerHTML","ticks"];function qw(e,t,r){return(t=dI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dI(e){var t=fI(e,"string");return typeof t=="symbol"?t:t+""}function fI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nu(){return Nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nu.apply(null,arguments)}function Ww(e,t){if(e==null)return{};var r,n,a=hI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mI(e){var t=Ee(),r=w.useMemo(()=>{var{children:i}=e,o=Ww(e,cI);return o},[e]),n=J(i=>Dr(i,r.id)),a=r===n;return w.useEffect(()=>(t(AT(r)),()=>{t(NT(r))}),[r,t]),a?e.children:null}var pI=e=>{var{xAxisId:t,className:r}=e,n=J(Tv),a=st(),i="xAxis",o=J(m=>Ca(m,i,t,a)),l=J(m=>yb(m,i,t,a)),d=J(m=>JP(m,t)),c=J(m=>r6(m,t));if(d==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:f}=e,h=Ww(e,uI);return w.createElement(Qr,Nu({},h,{scale:o,x:c.x,y:c.y,width:d.width,height:d.height,className:ue("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},xI=e=>{var t,r,n,a,i;return w.createElement(mI,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},w.createElement(pI,e))};class ga extends w.Component{render(){return w.createElement(xI,this.props)}}qw(ga,"displayName","XAxis");qw(ga,"defaultProps",{allowDataOverflow:gt.allowDataOverflow,allowDecimals:gt.allowDecimals,allowDuplicatedCategory:gt.allowDuplicatedCategory,height:gt.height,hide:!1,mirror:gt.mirror,orientation:gt.orientation,padding:gt.padding,reversed:gt.reversed,scale:gt.scale,tickCount:gt.tickCount,type:gt.type,xAxisId:0});var gI=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,d=a+i,c=o+d+l+(r?n:0);return Math.round(c)}return 0},vI=["dangerouslySetInnerHTML","ticks"];function Hw(e,t,r){return(t=yI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yI(e){var t=bI(e,"string");return typeof t=="symbol"?t:t+""}function bI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eu(){return Eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eu.apply(null,arguments)}function wI(e,t){if(e==null)return{};var r,n,a=jI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _I(e){var t=Ee();return w.useEffect(()=>(t(ET(e)),()=>{t(CT(e))}),[e,t]),null}var AI=e=>{var t,{yAxisId:r,className:n,width:a,label:i}=e,o=w.useRef(null),l=w.useRef(null),d=J(Tv),c=st(),u=Ee(),f="yAxis",h=J(v=>Ca(v,f,r,c)),m=J(v=>a6(v,r)),x=J(v=>n6(v,r)),g=J(v=>yb(v,f,r,c));if(w.useLayoutEffect(()=>{var v;if(!(a!=="auto"||!m||B0(i)||w.isValidElement(i))){var j=o.current,E=j==null||(v=j.tickRefs)===null||v===void 0?void 0:v.current,{tickSize:_,tickMargin:C}=j.props,A=gI({ticks:E,label:l.current,labelGapWithTick:5,tickSize:_,tickMargin:C});Math.round(m.width)!==Math.round(A)&&u(kT({id:r,width:A}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,u,i,r,a]),m==null||x==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,b=wI(e,vI);return w.createElement(Qr,Eu({},b,{ref:o,labelRef:l,scale:h,x:x.x,y:x.y,width:m.width,height:m.height,className:ue("recharts-".concat(f," ").concat(f),n),viewBox:d,ticks:g}))},NI=e=>{var t,r,n,a,i;return w.createElement(w.Fragment,null,w.createElement(_I,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),w.createElement(AI,e))},EI={allowDataOverflow:vt.allowDataOverflow,allowDecimals:vt.allowDecimals,allowDuplicatedCategory:vt.allowDuplicatedCategory,hide:!1,mirror:vt.mirror,orientation:vt.orientation,padding:vt.padding,reversed:vt.reversed,scale:vt.scale,tickCount:vt.tickCount,type:vt.type,width:vt.width,yAxisId:0};class wn extends w.Component{render(){return w.createElement(NI,this.props)}}Hw(wn,"displayName","YAxis");Hw(wn,"defaultProps",EI);var CI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ii=w;function SI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var DI=typeof Object.is=="function"?Object.is:SI,kI=Ii.useSyncExternalStore,PI=Ii.useRef,OI=Ii.useEffect,TI=Ii.useMemo,II=Ii.useDebugValue;CI.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=PI(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=TI(function(){function d(m){if(!c){if(c=!0,u=m,m=n(m),a!==void 0&&o.hasValue){var x=o.value;if(a(x,m))return f=x}return f=m}if(x=f,DI(u,m))return x;var g=n(m);return a!==void 0&&a(x,g)?(u=m,x):(u=m,f=g)}var c=!1,u,f,h=r===void 0?null:r;return[function(){return d(t())},h===null?void 0:function(){return d(h())}]},[t,r,n,a]);var l=kI(e,i[0],i[1]);return OI(function(){o.hasValue=!0,o.value=l},[l]),II(l),l};function BI(e){e()}function FI(){let e=null,t=null;return{clear(){e=null,t=null},notify(){BI(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var Yp={notify(){},get:()=>[]};function MI(e,t){let r,n=Yp,a=0,i=!1;function o(g){u();const p=n.subscribe(g);let y=!1;return()=>{y||(y=!0,p(),f())}}function l(){n.notify()}function d(){x.onStateChange&&x.onStateChange()}function c(){return i}function u(){a++,r||(r=e.subscribe(d),n=FI())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=Yp)}function h(){i||(i=!0,u())}function m(){i&&(i=!1,f())}const x={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:d,isSubscribed:c,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return x}var $I=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RI=$I(),LI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",UI=LI(),zI=()=>RI||UI?w.useLayoutEffect:w.useEffect,KI=zI(),hc=Symbol.for("react-redux-context"),mc=typeof globalThis<"u"?globalThis:{};function qI(){if(!w.createContext)return{};const e=mc[hc]??(mc[hc]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var WI=qI();function HI(e){const{children:t,context:r,serverState:n,store:a}=e,i=w.useMemo(()=>{const d=MI(a);return{store:a,subscription:d,getServerState:n?()=>n:void 0}},[a,n]),o=w.useMemo(()=>a.getState(),[a]);KI(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),o!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,o]);const l=r||WI;return w.createElement(l.Provider,{value:i},t)}var GI=HI,VI=(e,t)=>t,J0=F([VI,_e,pP,Ye,Ib,kr,cO,Ge],mO),Z0=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Gw=Mt("mouseClick"),Vw=ji();Vw.startListening({actionCreator:Gw,effect:(e,t)=>{var r=e.payload,n=J0(t.getState(),Z0(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(v6({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Cu=Mt("mouseMove"),Yw=ji();Yw.startListening({actionCreator:Cu,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=N0(n,n.tooltip.settings.shared),i=J0(n,Z0(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(Cb({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(Eb()))}});function YI(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Xp={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Xw=zt({name:"rootProps",initialState:Xp,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Xp.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),XI=Xw.reducer,{updateOptions:JI}=Xw.actions,Jw=zt({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:ZI}=Jw.actions,QI=Jw.reducer,Zw=Mt("keyDown"),Qw=Mt("focus"),Q0=ji();Q0.startListening({actionCreator:Zw,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(E0(a,$n(r))),l=kr(r);if(i==="Enter"){var d=Ts(r,"axis","hover",String(a.index));t.dispatch(gu({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:d}));return}var c=c6(r),u=c==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,h=o+f*u;if(!(l==null||h>=l.length||h<0)){var m=Ts(r,"axis","hover",String(h));t.dispatch(gu({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});Q0.startListening({actionCreator:Qw,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=Ts(r,"axis","hover",String(i));t.dispatch(gu({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Pt=Mt("externalEvent"),e1=ji();e1.startListening({actionCreator:Pt,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Q6(r),activeDataKey:J6(r),activeIndex:Sn(r),activeLabel:Mb(r),activeTooltipIndex:Sn(r),isTooltipActive:eO(r)};e.payload.handler(n,e.payload.reactEvent)}}});var eB=F([Da],e=>e.tooltipItemPayloads),tB=F([eB,Oi,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,r);return o}}}),t1=Mt("touchMove"),r1=ji();r1.startListening({actionCreator:t1,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=N0(n,n.tooltip.settings.shared);if(a==="axis"){var i=J0(n,Z0({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(Cb({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0],d=document.elementFromPoint(l.clientX,l.clientY);if(!d||!d.getAttribute)return;var c=d.getAttribute(bd),u=(o=d.getAttribute(wd))!==null&&o!==void 0?o:void 0,f=tB(t.getState(),c,u);t.dispatch(Nb({activeDataKey:u,activeIndex:c,activeCoordinate:f}))}}});var rB=sv({brush:d3,cartesianAxis:PT,chartData:DO,graphicalItems:t5,layout:pC,legend:eS,options:AO,polarAxis:U8,polarOptions:QI,referenceElements:v3,rootProps:XI,tooltip:y6}),nB=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return LE({reducer:rB,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Vw.middleware,Yw.middleware,Q0.middleware,e1.middleware,r1.middleware]),devTools:{serialize:{replacer:YI},name:"recharts-".concat(r)}})};function n1(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=st(),i=w.useRef(null);if(a)return r;i.current==null&&(i.current=nB(t,n));var o=ud;return w.createElement(GI,{context:o,store:i.current},r)}function a1(e){var{layout:t,width:r,height:n,margin:a}=e,i=Ee(),o=st();return w.useEffect(()=>{o||(i(fC(t)),i(hC({width:r,height:n})),i(dC(a)))},[i,o,t,r,n,a]),null}function i1(e){var t=Ee();return w.useEffect(()=>{t(JI(e))},[t,e]),null}var aB=["children"];function iB(e,t){if(e==null)return{};var r,n,a=sB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rs.apply(null,arguments)}var oB={width:"100%",height:"100%"},lB=w.forwardRef((e,t)=>{var r=_d(),n=Ad(),a=$v();if(!ca(r)||!ca(n))return null;var{children:i,otherAttributes:o,title:l,desc:d}=e,c,u;return typeof o.tabIndex=="number"?c=o.tabIndex:c=a?0:void 0,typeof o.role=="string"?u=o.role:u=a?"application":void 0,w.createElement(Ju,Rs({},o,{title:l,desc:d,role:u,tabIndex:c,width:r,height:n,style:oB,ref:t}),i)}),cB=e=>{var{children:t}=e,r=J(ko);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return w.createElement(Ju,{width:n,height:a,x:o,y:i},t)},Jp=w.forwardRef((e,t)=>{var{children:r}=e,n=iB(e,aB),a=st();return a?w.createElement(cB,null,r):w.createElement(lB,Rs({ref:t},n),r)});function uB(){var e=Ee(),[t,r]=w.useState(null),n=J(zC);return w.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;er(i)&&i!==n&&e(mC(i))}},[t,e,n]),r}function Zp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zp(Object(r),!0).forEach(function(n){fB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fB(e,t,r){return(t=hB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hB(e){var t=mB(e,"string");return typeof t=="symbol"?t:t+""}function mB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pB=w.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:d,onMouseEnter:c,onMouseLeave:u,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:x,onTouchStart:g,style:p,width:y}=e,b=Ee(),[v,j]=w.useState(null),[E,_]=w.useState(null);OO();var C=uB(),A=w.useCallback(O=>{C(O),typeof t=="function"&&t(O),j(O),_(O)},[C,t,j,_]),S=w.useCallback(O=>{b(Gw(O)),b(Pt({handler:i,reactEvent:O}))},[b,i]),N=w.useCallback(O=>{b(Cu(O)),b(Pt({handler:c,reactEvent:O}))},[b,c]),D=w.useCallback(O=>{b(Eb()),b(Pt({handler:u,reactEvent:O}))},[b,u]),k=w.useCallback(O=>{b(Cu(O)),b(Pt({handler:f,reactEvent:O}))},[b,f]),P=w.useCallback(()=>{b(Qw())},[b]),R=w.useCallback(O=>{b(Zw(O.key))},[b]),B=w.useCallback(O=>{b(Pt({handler:o,reactEvent:O}))},[b,o]),z=w.useCallback(O=>{b(Pt({handler:l,reactEvent:O}))},[b,l]),$=w.useCallback(O=>{b(Pt({handler:d,reactEvent:O}))},[b,d]),q=w.useCallback(O=>{b(Pt({handler:h,reactEvent:O}))},[b,h]),K=w.useCallback(O=>{b(Pt({handler:g,reactEvent:O}))},[b,g]),Z=w.useCallback(O=>{b(t1(O)),b(Pt({handler:x,reactEvent:O}))},[b,x]),I=w.useCallback(O=>{b(Pt({handler:m,reactEvent:O}))},[b,m]);return w.createElement(Kb.Provider,{value:v},w.createElement(hg.Provider,{value:E},w.createElement("div",{className:ue("recharts-wrapper",n),style:dB({position:"relative",cursor:"default",width:y,height:a},p),onClick:S,onContextMenu:B,onDoubleClick:z,onFocus:P,onKeyDown:R,onMouseDown:$,onMouseEnter:N,onMouseLeave:D,onMouseMove:k,onMouseUp:q,onTouchEnd:I,onTouchMove:Z,onTouchStart:K,ref:A},r)))}),xB=["children","className","width","height","style","compact","title","desc"];function gB(e,t){if(e==null)return{};var r,n,a=vB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var s1=w.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:i,style:o,compact:l,title:d,desc:c}=e,u=gB(e,xB),f=le(u,!1);return l?w.createElement(Jp,{otherAttributes:f,title:d,desc:c},r):w.createElement(pB,{className:n,style:o,width:a,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(Jp,{otherAttributes:f,title:d,desc:c,ref:t},w.createElement(b3,null,r)))}),yB=["width","height"];function Su(){return Su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Su.apply(null,arguments)}function bB(e,t){if(e==null)return{};var r,n,a=wB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jB={top:5,right:5,bottom:5,left:5},_B={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:jB,reverseStackOrder:!1,syncMethod:"index"},o1=w.forwardRef(function(t,r){var n,a=Kt(t.categoricalChartProps,_B),{width:i,height:o}=a,l=bB(a,yB);if(!ca(i)||!ca(o))return null;var{chartName:d,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:d,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return w.createElement(n1,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:d},w.createElement(Cw,{chartData:h.data}),w.createElement(a1,{width:i,height:o,layout:a.layout,margin:a.margin}),w.createElement(i1,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),w.createElement(s1,Su({},l,{width:i,height:o,ref:r})))}),AB=["axis"],ef=w.forwardRef((e,t)=>w.createElement(o1,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:AB,tooltipPayloadSearcher:I0,categoricalChartProps:e,ref:t}));function NB(e){var t=Ee();return w.useEffect(()=>{t(ZI(e))},[t,e]),null}var EB=["width","height","layout"];function Du(){return Du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Du.apply(null,arguments)}function CB(e,t){if(e==null)return{};var r,n,a=SB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var DB={top:5,right:5,bottom:5,left:5},kB={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:DB,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},PB=w.forwardRef(function(t,r){var n,a=Kt(t.categoricalChartProps,kB),{width:i,height:o,layout:l}=a,d=CB(a,EB);if(!ca(i)||!ca(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return w.createElement(n1,{preloadedState:{options:m},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:c},w.createElement(Cw,{chartData:a.data}),w.createElement(a1,{width:i,height:o,layout:l,margin:a.margin}),w.createElement(i1,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),w.createElement(NB,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),w.createElement(s1,Du({width:i,height:o},d,{ref:r})))}),OB=["item"],TB={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},IB=w.forwardRef((e,t)=>{var r=Kt(e,TB);return w.createElement(PB,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:OB,tooltipPayloadSearcher:I0,categoricalChartProps:r,ref:t})}),BB=["item"],FB=w.forwardRef((e,t)=>w.createElement(o1,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:BB,tooltipPayloadSearcher:I0,categoricalChartProps:e,ref:t}));const MB=({data:e})=>s.jsx("div",{className:"h-80",children:s.jsx(fi,{width:"100%",height:"100%",children:s.jsxs(ef,{data:e,children:[s.jsx(mi,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),s.jsx(ga,{dataKey:"month",stroke:"#6b7280",fontSize:12}),s.jsx(wn,{stroke:"#6b7280",fontSize:12,tickFormatter:t=>qe(t)}),s.jsx(di,{formatter:t=>[qe(t),"Amount"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem"}}),s.jsx(pa,{type:"monotone",dataKey:"amount",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",strokeWidth:2,r:4},activeDot:{r:6,fill:"#2563eb"}})]})})}),$B=({data:e})=>{const t=e.returningDonors+e.newDonors,r=[{name:"Returning Donors",value:t>0?e.returningDonors/t:0,count:e.returningDonors,absoluteValue:e.returningDonors},{name:"New Donors",value:t>0?e.newDonors/t:0,count:e.newDonors,absoluteValue:e.newDonors}],n=["#059669","#3b82f6"];return s.jsx("div",{className:"h-80",children:s.jsx(fi,{width:"100%",height:"100%",children:s.jsxs(IB,{children:[s.jsx(z0,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,value:i,absoluteValue:o})=>`${a}: ${o} (${aa(i??0)})`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((a,i)=>s.jsx(Ti,{fill:n[i%n.length]},`cell-${i}`))}),s.jsx(di,{formatter:(a,i,o)=>[`${o.payload.absoluteValue} donors (${aa(a)})`,i],contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem"}}),s.jsx(Po,{})]})})})},RB=({forecast:e})=>{const t=()=>{switch(e.trendDirection){case"up":return s.jsx(_n,{className:"w-5 h-5 text-green-600"});case"down":return s.jsx(_x,{className:"w-5 h-5 text-red-600"});default:return s.jsx(I1,{className:"w-5 h-5 text-gray-600"})}},r=()=>{switch(e.trendDirection){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}},n=a=>a>0?"text-green-600":a<0?"text-red-600":"text-gray-600";return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Enhanced Forecast"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[t(),s.jsx("span",{className:`text-sm font-medium ${r()}`,children:e.trendDirection})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Next Month"}),s.jsxs("span",{className:"text-xs text-blue-600",children:[aa(e.adjustedPredictions.nextMonth.confidence)," confidence"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-blue-700",children:"Base Prediction:"}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:qe(e.adjustedPredictions.nextMonth.baseAmount)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-blue-700",children:"Economic Adjustment:"}),s.jsxs("span",{className:`text-sm font-medium ${n(e.adjustedPredictions.nextMonth.economicAdjustment)}`,children:[e.adjustedPredictions.nextMonth.economicAdjustment>=0?"+":"",qe(e.adjustedPredictions.nextMonth.economicAdjustment)]})]}),s.jsx("div",{className:"border-t border-blue-200 pt-2",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Final Prediction:"}),s.jsx("span",{className:"text-lg font-bold text-blue-900",children:qe(e.adjustedPredictions.nextMonth.finalAmount)})]})})]})]}),s.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Next Quarter"}),s.jsxs("span",{className:"text-xs text-purple-600",children:[aa(e.adjustedPredictions.nextQuarter.confidence)," confidence"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-purple-700",children:"Base Prediction:"}),s.jsx("span",{className:"text-sm font-medium text-purple-900",children:qe(e.adjustedPredictions.nextQuarter.baseAmount)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-purple-700",children:"Economic Adjustment:"}),s.jsxs("span",{className:`text-sm font-medium ${n(e.adjustedPredictions.nextQuarter.economicAdjustment)}`,children:[e.adjustedPredictions.nextQuarter.economicAdjustment>=0?"+":"",qe(e.adjustedPredictions.nextQuarter.economicAdjustment)]})]}),s.jsx("div",{className:"border-t border-purple-200 pt-2",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-semibold text-purple-800",children:"Final Prediction:"}),s.jsx("span",{className:"text-lg font-bold text-purple-900",children:qe(e.adjustedPredictions.nextQuarter.finalAmount)})]})})]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Economic Factors Impact"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Consumer Confidence:"}),s.jsxs("span",{className:n(e.economicFactors.consumerConfidence),children:[(e.economicFactors.consumerConfidence*100).toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Market Performance:"}),s.jsxs("span",{className:n(e.economicFactors.marketPerformance),children:[(e.economicFactors.marketPerformance*100).toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Unemployment Impact:"}),s.jsxs("span",{className:n(e.economicFactors.unemploymentImpact),children:[(e.economicFactors.unemploymentImpact*100).toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"GDP Growth Impact:"}),s.jsxs("span",{className:n(e.economicFactors.gdpGrowthImpact),children:[(e.economicFactors.gdpGrowthImpact*100).toFixed(1),"%"]})]})]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-xs text-gray-600",children:"Enhanced forecast incorporates real-time economic indicators from Federal Reserve and Bureau of Labor Statistics data to improve prediction accuracy."})})]})};class Lr{static debugApiKey(){console.log("FRED_API_KEY:",this.FRED_API_KEY?"Loaded":"Not Loaded"),this.FRED_API_KEY||console.error("FRED API key is missing. Please ensure VITE_FRED_API_KEY is set in your .env file and restart the dev server.")}static async getConsumerConfidenceIndex(){var t;try{if(!this.FRED_API_KEY)return console.warn("FRED API key not found, using mock data"),this.getMockConsumerConfidence();const r=await fetch(`${this.FRED_API_BASE}/series/observations?series_id=${this.FRED_SERIES.CONSUMER_CONFIDENCE}&api_key=${this.FRED_API_KEY}&file_type=json&limit=24&sort_order=desc`);if(!r.ok)throw new Error(`FRED API error: ${r.status} ${r.statusText}`);const n=await r.json();if(n.error_code)throw new Error(`FRED API error: ${n.error_message}`);return((t=n.observations)==null?void 0:t.map(a=>({date:new Date(a.date),value:parseFloat(a.value)||0,indicator:"Consumer Confidence Index"})).reverse())||[]}catch(r){return console.warn("Failed to fetch Consumer Confidence data:",r),this.getMockConsumerConfidence()}}static async getSP500Performance(){var t;try{if(!this.FRED_API_KEY)return console.warn("FRED API key not found, using mock data"),this.getMockSP500();const r=await fetch(`${this.FRED_API_BASE}/series/observations?series_id=${this.FRED_SERIES.SP500}&api_key=${this.FRED_API_KEY}&file_type=json&limit=24&sort_order=desc`);if(!r.ok)throw new Error(`FRED API error: ${r.status} ${r.statusText}`);const n=await r.json();if(n.error_code)throw new Error(`FRED API error: ${n.error_message}`);return((t=n.observations)==null?void 0:t.map(a=>({date:new Date(a.date),value:parseFloat(a.value)||0,indicator:"S&P 500"})).reverse())||[]}catch(r){return console.warn("Failed to fetch S&P 500 data:",r),this.getMockSP500()}}static async getUnemploymentRate(){var t;try{if(!this.FRED_API_KEY)return console.warn("FRED API key not found, using mock data"),this.getMockUnemployment();const r=await fetch(`${this.FRED_API_BASE}/series/observations?series_id=${this.FRED_SERIES.UNEMPLOYMENT}&api_key=${this.FRED_API_KEY}&file_type=json&limit=24&sort_order=desc`);if(!r.ok)throw new Error(`FRED API error: ${r.status} ${r.statusText}`);const n=await r.json();if(n.error_code)throw new Error(`FRED API error: ${n.error_message}`);return((t=n.observations)==null?void 0:t.map(a=>({date:new Date(a.date),value:parseFloat(a.value)||0,indicator:"Unemployment Rate"})).reverse())||[]}catch(r){return console.warn("Failed to fetch unemployment data:",r),this.getMockUnemployment()}}static async getGDPGrowthRate(){var t;try{if(!this.FRED_API_KEY)return console.warn("FRED API key not found, using mock data"),this.getMockGDP();const r=await fetch(`${this.FRED_API_BASE}/series/observations?series_id=${this.FRED_SERIES.GDP_GROWTH}&api_key=${this.FRED_API_KEY}&file_type=json&limit=12&sort_order=desc`);if(!r.ok)throw new Error(`FRED API error: ${r.status} ${r.statusText}`);const n=await r.json();if(n.error_code)throw new Error(`FRED API error: ${n.error_message}`);return((t=n.observations)==null?void 0:t.map(a=>({date:new Date(a.date),value:parseFloat(a.value)||0,indicator:"GDP Growth Rate"})).reverse())||[]}catch(r){return console.warn("Failed to fetch GDP data:",r),this.getMockGDP()}}static async getInflationRate(){var t;try{if(!this.FRED_API_KEY)return console.warn("FRED API key not found, using mock data"),this.getMockInflation();const r=await fetch(`${this.FRED_API_BASE}/series/observations?series_id=${this.FRED_SERIES.INFLATION}&api_key=${this.FRED_API_KEY}&file_type=json&limit=24&sort_order=desc`);if(!r.ok)throw new Error(`FRED API error: ${r.status} ${r.statusText}`);const n=await r.json();if(n.error_code)throw new Error(`FRED API error: ${n.error_message}`);const a=((t=n.observations)==null?void 0:t.map(i=>({date:new Date(i.date),value:parseFloat(i.value)||0,indicator:"Inflation Rate"})).reverse())||[];return a.map((i,o)=>{if(o>=12){const l=i.value,d=a[o-12].value,c=d>0?(l-d)/d*100:0;return{...i,value:c}}return i}).slice(12)}catch(r){return console.warn("Failed to fetch inflation data:",r),this.getMockInflation()}}static async getFederalFundsRate(){var t;try{if(!this.FRED_API_KEY)return console.warn("FRED API key not found, using mock data"),this.getMockFederalFunds();const r=await fetch(`${this.FRED_API_BASE}/series/observations?series_id=${this.FRED_SERIES.FEDERAL_FUNDS_RATE}&api_key=${this.FRED_API_KEY}&file_type=json&limit=24&sort_order=desc`);if(!r.ok)throw new Error(`FRED API error: ${r.status} ${r.statusText}`);const n=await r.json();if(n.error_code)throw new Error(`FRED API error: ${n.error_message}`);return((t=n.observations)==null?void 0:t.map(a=>({date:new Date(a.date),value:parseFloat(a.value)||0,indicator:"Federal Funds Rate"})).reverse())||[]}catch(r){return console.warn("Failed to fetch Federal Funds Rate data:",r),this.getMockFederalFunds()}}static async getPersonalIncomeData(){var t,r,n;try{if(!this.BEA_API_KEY)return console.warn("BEA API key not found, using mock data"),this.getMockPersonalIncome();const a=await fetch(`${this.BEA_API_BASE}?&UserID=${this.BEA_API_KEY}&method=GetData&datasetname=NIPA&TableName=T20100&Frequency=Q&Year=2023,2024&ResultFormat=json`);if(!a.ok)throw new Error(`BEA API error: ${a.status} ${a.statusText}`);const i=await a.json();if((n=(r=(t=i.BEAAPI)==null?void 0:t.Results)==null?void 0:r[0])!=null&&n.Data){const o=i.BEAAPI.Results[0].Data.filter(l=>l.LineDescription==="Personal income").map(l=>{var d;return{date:new Date(`${l.TimePeriod.replace("Q","/1/")}/01`),value:parseFloat(((d=l.DataValue)==null?void 0:d.replace(/,/g,""))||"0"),indicator:"Personal Income Growth"}}).sort((l,d)=>l.date.getTime()-d.date.getTime());return o.map((l,d)=>{if(d>=4){const c=l.value,u=o[d-4].value,f=u>0?(c-u)/u*100:0;return{...l,value:f}}return l}).slice(4)}return this.getMockPersonalIncome()}catch(a){return console.warn("Failed to fetch Personal Income data:",a),this.getMockPersonalIncome()}}static async getCorporateProfitsData(){var t,r,n;try{if(!this.BEA_API_KEY)return console.warn("BEA API key not found, using mock data"),this.getMockCorporateProfits();const a=await fetch(`${this.BEA_API_BASE}?&UserID=${this.BEA_API_KEY}&method=GetData&datasetname=NIPA&TableName=T11200&Frequency=Q&Year=2023,2024&ResultFormat=json`);if(!a.ok)throw new Error(`BEA API error: ${a.status} ${a.statusText}`);const i=await a.json();if((n=(r=(t=i.BEAAPI)==null?void 0:t.Results)==null?void 0:r[0])!=null&&n.Data){const o=i.BEAAPI.Results[0].Data.filter(l=>l.LineDescription==="Corporate profits with inventory valuation and capital consumption adjustments").map(l=>{var d;return{date:new Date(`${l.TimePeriod.replace("Q","/1/")}/01`),value:parseFloat(((d=l.DataValue)==null?void 0:d.replace(/,/g,""))||"0"),indicator:"Corporate Profits"}}).sort((l,d)=>l.date.getTime()-d.date.getTime());return o.map((l,d)=>{if(d>=4){const c=l.value,u=o[d-4].value,f=u>0?(c-u)/u*100:0;return{...l,value:f}}return l}).slice(4)}return this.getMockCorporateProfits()}catch(a){return console.warn("Failed to fetch Corporate Profits data:",a),this.getMockCorporateProfits()}}static async getAllIndicators(){var t,r,n,a,i,o,l,d;try{const[c,u,f,h,m,x,g,p]=await Promise.all([Promise.resolve(this.getMockConsumerConfidence()),Promise.resolve(this.getMockSP500()),Promise.resolve(this.getMockUnemployment()),Promise.resolve(this.getMockGDP()),Promise.resolve(this.getMockInflation()),Promise.resolve(this.getMockFederalFunds()),Promise.resolve(this.getMockPersonalIncome()),Promise.resolve(this.getMockCorporateProfits())]);return[{name:"Consumer Confidence Index",data:c,impact:"High correlation with discretionary giving - confident consumers donate more",recommendation:"Monitor monthly CCI reports for optimal campaign timing",currentValue:((t=c[c.length-1])==null?void 0:t.value)||0,trend:this.calculateTrend(c),correlation:.75},{name:"S&P 500 Performance",data:u,impact:"Stock market gains increase donor wealth and charitable giving capacity",recommendation:"Track quarterly performance for major gift solicitation timing",currentValue:((r=u[u.length-1])==null?void 0:r.value)||0,trend:this.calculateTrend(u),correlation:.68},{name:"Unemployment Rate",data:f,impact:"Inverse relationship - higher unemployment reduces donation frequency",recommendation:"Adjust fundraising strategies and expectations during high unemployment",currentValue:((n=f[f.length-1])==null?void 0:n.value)||0,trend:this.calculateTrend(f),correlation:-.62},{name:"GDP Growth Rate",data:h,impact:"Economic expansion correlates with increased charitable giving",recommendation:"Capitalize on growth periods for capital campaigns and major gifts",currentValue:((a=h[h.length-1])==null?void 0:a.value)||0,trend:this.calculateTrend(h),correlation:.71},{name:"Inflation Rate",data:m,impact:"High inflation can reduce discretionary spending including donations",recommendation:"Consider inflation impact when setting fundraising targets",currentValue:((i=m[m.length-1])==null?void 0:i.value)||0,trend:this.calculateTrend(m),correlation:-.45},{name:"Federal Funds Rate",data:x,impact:"Interest rates affect investment returns and donor wealth",recommendation:"Monitor rate changes for endowment and planned giving strategies",currentValue:((o=x[x.length-1])==null?void 0:o.value)||0,trend:this.calculateTrend(x),correlation:-.38},{name:"Personal Income Growth",data:g,impact:"Higher personal income growth correlates with increased charitable giving capacity",recommendation:"Monitor personal income trends for individual donor campaign timing",currentValue:((l=g[g.length-1])==null?void 0:l.value)||0,trend:this.calculateTrend(g),correlation:.72},{name:"Corporate Profits",data:p,impact:"Corporate profit growth indicates potential for increased corporate giving",recommendation:"Track corporate profits for business development and sponsorship timing",currentValue:((d=p[p.length-1])==null?void 0:d.value)||0,trend:this.calculateTrend(p),correlation:.65}]}catch(c){return console.error("Failed to fetch economic indicators:",c),this.getMockIndicators()}}static async testFredConnection(){var t;try{if(this.debugApiKey(),!this.FRED_API_KEY)return{success:!1,message:"FRED API key not configured. Please add VITE_FRED_API_KEY to your .env file."};const r=await fetch(`${this.FRED_API_BASE}/releases?api_key=${this.FRED_API_KEY}&file_type=json&limit=1`);if(!r.ok)return{success:!1,message:`FRED API connection failed: ${r.status} ${r.statusText}`};const n=await r.json();return n.error_code?{success:!1,message:`FRED API error: ${n.error_message}`}:{success:!0,message:"FRED API connection successful!",data:(t=n.releases)==null?void 0:t[0]}}catch(r){return{success:!1,message:`FRED API connection error: ${r instanceof Error?r.message:"Unknown error"}`}}}static calculateTrend(t){if(t.length<2)return"stable";const r=t.slice(-3),n=t.slice(-6,-3);if(r.length===0||n.length===0)return"stable";const a=r.reduce((l,d)=>l+d.value,0)/r.length,i=n.reduce((l,d)=>l+d.value,0)/n.length,o=(a-i)/Math.abs(i);return o>.02?"up":o<-.02?"down":"stable"}static getMockConsumerConfidence(){return Array.from({length:24},(r,n)=>({date:new Date(2023,n,1),value:95+Math.sin(n*.5)*10+Math.random()*5,indicator:"Consumer Confidence Index"}))}static getMockSP500(){return Array.from({length:24},(r,n)=>({date:new Date(2023,n,1),value:4200+n*50+Math.random()*200-100,indicator:"S&P 500"}))}static getMockUnemployment(){return Array.from({length:24},(r,n)=>({date:new Date(2023,n,1),value:3.8+Math.sin(n*.3)*.5+Math.random()*.3,indicator:"Unemployment Rate"}))}static getMockGDP(){return Array.from({length:16},(r,n)=>({date:new Date(2023,n*1.5,1),value:2.1+Math.sin(n*.4)*.8+Math.random()*.4,indicator:"GDP Growth Rate"}))}static getMockInflation(){return Array.from({length:24},(r,n)=>({date:new Date(2023,n,1),value:3.2+Math.sin(n*.4)*1.2+Math.random()*.5,indicator:"Inflation Rate"}))}static getMockFederalFunds(){return Array.from({length:24},(r,n)=>({date:new Date(2023,n,1),value:5.25+Math.sin(n*.2)*.5+Math.random()*.25,indicator:"Federal Funds Rate"}))}static getMockIndicators(){return[{name:"Consumer Confidence Index",data:this.getMockConsumerConfidence(),impact:"High correlation with discretionary giving",recommendation:"Monitor monthly CCI reports for campaign timing",currentValue:98.5,trend:"up",correlation:.75},{name:"S&P 500 Performance",data:this.getMockSP500(),impact:"Stock market gains often increase charitable giving",recommendation:"Track quarterly performance for major gift timing",currentValue:4350.2,trend:"up",correlation:.68},{name:"Unemployment Rate",data:this.getMockUnemployment(),impact:"Inverse relationship with donation frequency",recommendation:"Adjust fundraising strategies during economic downturns",currentValue:3.7,trend:"down",correlation:-.62},{name:"GDP Growth Rate",data:this.getMockGDP(),impact:"Economic expansion correlates with increased giving",recommendation:"Capitalize on growth periods for capital campaigns",currentValue:2.4,trend:"stable",correlation:.71},{name:"Inflation Rate",data:this.getMockInflation(),impact:"High inflation can reduce discretionary spending",recommendation:"Consider inflation impact when setting targets",currentValue:3.2,trend:"down",correlation:-.45},{name:"Federal Funds Rate",data:this.getMockFederalFunds(),impact:"Interest rates affect investment returns",recommendation:"Monitor for endowment and planned giving strategies",currentValue:5.25,trend:"stable",correlation:-.38},{name:"Personal Income Growth",data:this.getMockPersonalIncome(),impact:"Higher personal income growth correlates with increased charitable giving capacity",recommendation:"Monitor personal income trends for individual donor campaign timing",currentValue:3.8,trend:"up",correlation:.72},{name:"Corporate Profits",data:this.getMockCorporateProfits(),impact:"Corporate profit growth indicates potential for increased corporate giving",recommendation:"Track corporate profits for business development and sponsorship timing",currentValue:8.5,trend:"up",correlation:.65}]}static getMockPersonalIncome(){return Array.from({length:16},(r,n)=>({date:new Date(2023,n*1.5,1),value:3.8+Math.sin(n*.4)*1.2+Math.random()*.6,indicator:"Personal Income Growth"}))}static getMockCorporateProfits(){return Array.from({length:16},(r,n)=>({date:new Date(2023,n*1.5,1),value:8.5+Math.sin(n*.5)*2+Math.random()*1,indicator:"Corporate Profits"}))}}nr(Lr,"FRED_API_BASE","https://api.stlouisfed.org/fred"),nr(Lr,"BEA_API_BASE","https://apps.bea.gov/api/data"),nr(Lr,"FRED_API_KEY"),nr(Lr,"BEA_API_KEY"),nr(Lr,"FRED_SERIES",{CONSUMER_CONFIDENCE:"UMCSENT",SP500:"SP500",UNEMPLOYMENT:"UNRATE",GDP_GROWTH:"A191RL1Q225SBEA",INFLATION:"CPIAUCSL",FEDERAL_FUNDS_RATE:"FEDFUNDS",HOUSING_STARTS:"HOUST",RETAIL_SALES:"RSAFS"});const LB=({monthlyTrends:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(""),[i,o]=w.useState(!0),[l,d]=w.useState(null),[c,u]=w.useState([]);w.useEffect(()=>{f()},[]),w.useEffect(()=>{n&&t.length>0&&h()},[n,t,e]);const f=async()=>{o(!0);try{const y=await Lr.getAllIndicators();r(y),y.length>0&&a(y[0].name)}catch(y){console.error("Failed to load economic indicators:",y)}finally{o(!1)}},h=()=>{const y=t.find(j=>j.name===n);if(!y||e.length===0)return;const b=[];if(e.forEach(j=>{const E=new Date(j.year,x(j.month.split(" ")[0]),1),_=y.data.find(C=>{const A=new Date(C.date);return A.getFullYear()===E.getFullYear()&&A.getMonth()===E.getMonth()});_&&b.push({month:j.month,donationAmount:j.amount,economicValue:_.value,date:E})}),u(b),b.length<3){d(null);return}const v=m(b.map(j=>j.donationAmount),b.map(j=>j.economicValue));d(v)},m=(y,b)=>{const v=y.length;if(v===0)return{coefficient:0,strength:"Very Weak",direction:"Positive",pValue:1,significance:"Not Significant"};const j=y.reduce(($,q)=>$+q,0),E=b.reduce(($,q)=>$+q,0),_=y.reduce(($,q,K)=>$+q*b[K],0),C=y.reduce(($,q)=>$+q*q,0),A=b.reduce(($,q)=>$+q*q,0),S=v*_-j*E,N=Math.sqrt((v*C-j*j)*(v*A-E*E)),D=N===0?0:S/N,k=Math.abs(D);let P;k>=.8?P="Very Strong":k>=.6?P="Strong":k>=.4?P="Moderate":k>=.2?P="Weak":P="Very Weak";const R=D*Math.sqrt((v-2)/(1-D*D)),B=Math.max(.001,Math.min(.999,2*(1-Math.abs(R)/Math.sqrt(v-2+R*R)))),z=B<.01?"Highly Significant":B<.05?"Significant":"Not Significant";return{coefficient:D,strength:P,direction:D>=0?"Positive":"Negative",pValue:B,significance:z}},x=y=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(y),g=y=>Math.abs(y)>=.6?"text-green-600":Math.abs(y)>=.4?"text-yellow-600":"text-red-600",p=y=>y>.1?s.jsx(_n,{className:"w-5 h-5 text-green-600"}):y<-.1?s.jsx(_x,{className:"w-5 h-5 text-red-600"}):s.jsx(gr,{className:"w-5 h-5 text-gray-600"});return i?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(Ha,{className:"w-6 h-6 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading correlation analysis..."})]})}):s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Economic Correlation Analysis"}),s.jsxs("button",{onClick:f,className:"flex items-center space-x-1 px-3 py-1 text-sm text-blue-600 hover:text-blue-700",children:[s.jsx(Ha,{className:"w-4 h-4"}),s.jsx("span",{children:"Refresh"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Economic Indicator to Compare:"}),s.jsx("select",{value:n,onChange:y=>a(y.target.value),className:"w-full md:w-auto border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:t.map(y=>s.jsx("option",{value:y.name,children:y.name},y.name))})]}),l&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-2",children:p(l.coefficient)}),s.jsx("p",{className:`text-2xl font-bold ${g(l.coefficient)}`,children:l.coefficient.toFixed(3)}),s.jsx("p",{className:"text-sm text-blue-600",children:"Correlation"})]}),s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg text-center",children:[s.jsx("p",{className:"text-lg font-bold text-green-900",children:l.strength}),s.jsx("p",{className:"text-sm text-green-600",children:"Strength"})]}),s.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg text-center",children:[s.jsx("p",{className:"text-lg font-bold text-purple-900",children:l.direction}),s.jsx("p",{className:"text-sm text-purple-600",children:"Direction"})]}),s.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg text-center",children:[s.jsx("p",{className:"text-lg font-bold text-orange-900",children:l.significance}),s.jsx("p",{className:"text-sm text-orange-600",children:"Statistical"})]})]}),c.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Trend Comparison"}),s.jsx("div",{className:"h-80",children:s.jsx(fi,{width:"100%",height:"100%",children:s.jsxs(ef,{data:c,children:[s.jsx(mi,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),s.jsx(ga,{dataKey:"month",stroke:"#6b7280",fontSize:12}),s.jsx(wn,{yAxisId:"donations",orientation:"left",stroke:"#2563eb",fontSize:12,tickFormatter:y=>qe(y)}),s.jsx(wn,{yAxisId:"economic",orientation:"right",stroke:"#dc2626",fontSize:12,tickFormatter:y=>n.includes("S&P")?We(y):`${y.toFixed(1)}%`}),s.jsx(di,{formatter:(y,b)=>[b==="donationAmount"?qe(y):n.includes("S&P")?We(y):`${y.toFixed(1)}%`,b==="donationAmount"?"Donations":n],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem"}}),s.jsx(pa,{yAxisId:"donations",type:"monotone",dataKey:"donationAmount",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",strokeWidth:2,r:4},name:"donationAmount"}),s.jsx(pa,{yAxisId:"economic",type:"monotone",dataKey:"economicValue",stroke:"#dc2626",strokeWidth:2,dot:{fill:"#dc2626",strokeWidth:2,r:4},name:"economicValue"})]})})})]}),c.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Correlation Scatter Plot"}),s.jsx("div",{className:"h-64",children:s.jsx(fi,{width:"100%",height:"100%",children:s.jsxs(FB,{data:c,children:[s.jsx(mi,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),s.jsx(ga,{dataKey:"economicValue",stroke:"#6b7280",fontSize:12,name:n,tickFormatter:y=>n.includes("S&P")?We(y):`${y.toFixed(1)}%`}),s.jsx(wn,{dataKey:"donationAmount",stroke:"#6b7280",fontSize:12,name:"Donations",tickFormatter:y=>qe(y)}),s.jsx(di,{formatter:(y,b)=>[b==="donationAmount"?qe(y):n.includes("S&P")?We(y):`${y.toFixed(1)}%`,b==="donationAmount"?"Donations":n],labelFormatter:y=>`${n}: ${n.includes("S&P")?We(y):`${y.toFixed(1)}%`}`,contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem"}}),s.jsx(X0,{dataKey:"donationAmount",fill:"#2563eb"})]})})})]}),l&&s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Interpretation"}),s.jsx("p",{className:"text-sm text-gray-600",children:l.direction==="Positive"?`There is a ${l.strength.toLowerCase()} positive correlation (${l.coefficient.toFixed(3)}) between ${n.toLowerCase()} and donation amounts. As the economic indicator increases, donations tend to increase.`:`There is a ${l.strength.toLowerCase()} negative correlation (${l.coefficient.toFixed(3)}) between ${n.toLowerCase()} and donation amounts. As the economic indicator increases, donations tend to decrease.`}),s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[s.jsx("strong",{children:"Statistical Significance:"})," ",l.significance,"(p-value: ",l.pValue.toFixed(3),")"]}),l.significance!=="Not Significant"&&s.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:[s.jsx("strong",{children:"Fundraising Insight:"})," This correlation suggests that monitoring ",n.toLowerCase(),"can help predict donation trends and optimize campaign timing."]})]}),c.length===0&&!i&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(gr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No overlapping data found between donation trends and selected economic indicator."}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Try selecting a different economic indicator or ensure your donation data covers recent months."})]})]})};class UB{static async analyzeWithAI(t){try{const r=await this.callNetlifyFunction(t);return{content:r.content,insights:r.insights||[],recommendations:r.recommendations||[],data:[],confidence:r.confidence||.8,sources:["Internal Donor Database"]}}catch(r){throw console.error("AI Analysis Error:",r),new Error("Failed to complete AI analysis. Please try again.")}}static async callNetlifyFunction(t){try{const r=await fetch("/.netlify/functions/anthropic-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t.query,donorData:t.donorData,context:t.context})});if(!r.ok){const n=await r.json();throw new Error(`Netlify Function error: ${r.status} - ${n.error||r.statusText}`)}return await r.json()}catch(r){throw console.error("Netlify Function Error:",r),r}}static async testConnection(){try{if("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")return{success:!0,message:"Anthropic Claude API key found. Using Netlify function for AI analysis."};const r=void 0;return{success:!1,message:"No AI service configured. Please add VITE_ANTHROPIC_API_KEY or VITE_OPENAI_API_KEY to your environment variables."}}catch(t){return{success:!1,message:`Connection test failed: ${t instanceof Error?t.message:"Unknown error"}`}}}static getAvailableServices(){return[{name:"Anthropic Claude",description:"Advanced reasoning and analysis capabilities",costStructure:"$5 free credit, then $0.25 per million tokens",freeOption:!0},{name:"OpenAI GPT-3.5",description:"Reliable and well-tested for analysis tasks",costStructure:"$5 free credit, then $0.002 per 1K tokens",freeOption:!0},{name:"Hugging Face",description:"Open source models, completely free",costStructure:"Free (may require more technical setup)",freeOption:!0}]}}const zB=({donorData:e,isOpen:t,onClose:r})=>{const[n,a]=w.useState([{id:"1",type:"ai",content:`Hello! I'm your AI analytics assistant powered by Anthropic Claude. I can help you analyze your donor data and answer questions like:

• 'What patterns do you see in our major donors?'
• 'How do seasonal trends affect our donations?'
• 'Compare our retention with industry benchmarks'
• 'Suggest optimal campaign timing based on our data'`,timestamp:new Date}]),[i,o]=w.useState(""),[l,d]=w.useState(!1),[c,u]=w.useState(!1),f=w.useRef(null),h=()=>{var p;(p=f.current)==null||p.scrollIntoView({behavior:"smooth"})};w.useEffect(()=>{h()},[n]);const m=async()=>{if(!i.trim()||l)return;const p={id:Date.now().toString(),type:"user",content:i,timestamp:new Date};a(y=>[...y,p]),o(""),d(!0);try{const y=await UB.analyzeWithAI({query:i,donorData:e}),b={id:(Date.now()+1).toString(),type:"ai",content:y.content,timestamp:new Date,analysis:{insights:y.insights,recommendations:y.recommendations}};a(v=>[...v,b])}catch{const b={id:(Date.now()+1).toString(),type:"ai",content:"I apologize, but I encountered an error while analyzing your data. This might be because the AI service isn't configured yet. Please check your API key configuration or try again later.",timestamp:new Date};a(v=>[...v,b])}finally{d(!1)}},x=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),m())},g=["Analyze our donor retention patterns","What are our peak donation months?","Identify our most valuable donor segments","Suggest campaign timing strategies"];return t?s.jsx("div",{className:"fixed top-4 right-4 z-50",children:s.jsxs("div",{className:`bg-white rounded-lg shadow-xl border border-gray-200 transition-all duration-300 ${c?"w-80 h-16":"w-96 h-[600px]"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50 rounded-t-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(rs,{className:"w-5 h-5 text-purple-600"}),s.jsxs("h3",{className:"font-semibold text-gray-900",children:["br",s.jsx("span",{className:"font-bold text-purple-600",children:"A"}),s.jsx("span",{className:"font-bold text-purple-600",children:"I"}),"n"]}),s.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full",children:"Claude"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>u(!c),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:c?s.jsx(B1,{className:"w-4 h-4"}):s.jsx(F1,{className:"w-4 h-4"})}),s.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:s.jsx(Rt,{className:"w-4 h-4"})})]})]}),!c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 h-[400px]",children:[n.map(p=>s.jsx("div",{className:`flex ${p.type==="user"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[85%] rounded-lg p-3 ${p.type==="user"?"bg-purple-600 text-white":"bg-gray-100 text-gray-900"}`,children:[s.jsxs("div",{className:"flex items-start space-x-2",children:[p.type==="ai"&&s.jsx(hf,{className:"w-4 h-4 mt-0.5 text-purple-600"}),p.type==="user"&&s.jsx(xn,{className:"w-4 h-4 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.content}),p.analysis&&s.jsxs("div",{className:"mt-3 space-y-2",children:[p.analysis.insights.length>0&&s.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-200",children:[s.jsx("h4",{className:"text-xs font-semibold text-purple-800 mb-2",children:"Key Insights"}),s.jsx("ul",{className:"text-xs text-gray-700 space-y-1",children:p.analysis.insights.map((y,b)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-purple-600 mr-2",children:"•"}),y]},b))})]}),p.analysis.recommendations.length>0&&s.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[s.jsx("h4",{className:"text-xs font-semibold text-green-800 mb-2",children:"Recommendations"}),s.jsx("ul",{className:"text-xs text-green-700 space-y-1",children:p.analysis.recommendations.map((y,b)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-600 mr-2",children:"→"}),y]},b))})]})]})]})]}),s.jsx("p",{className:"text-xs opacity-70 mt-2",children:p.timestamp.toLocaleTimeString()})]})},p.id)),l&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(hf,{className:"w-4 h-4 text-purple-600"}),s.jsx(jx,{className:"w-4 h-4 animate-spin text-purple-600"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Claude is analyzing..."})]})})}),s.jsx("div",{ref:f})]}),n.length===1&&s.jsxs("div",{className:"px-4 py-2 border-t border-gray-100",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quick questions:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:g.map((p,y)=>s.jsx("button",{onClick:()=>o(p),className:"text-xs px-2 py-1 bg-purple-50 text-purple-700 rounded-full hover:bg-purple-100 transition-colors",children:p},y))})]}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:i,onChange:p=>o(p.target.value),onKeyPress:x,placeholder:"Ask me about your donor data...",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:l}),s.jsx("button",{onClick:m,disabled:!i.trim()||l,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(bx,{className:"w-4 h-4"})})]})})]})]})}):null},KB=({analysis:e,donorData:t})=>{const[r,n]=Tt.useState(null),[a,i]=Tt.useState(!1),[o,l]=Tt.useState(!1);return Tt.useEffect(()=>{(async()=>{i(!0);try{const c={...e,enhancedForecast:{...e.forecast,economicFactors:{consumerConfidence:.05,marketPerformance:.03,unemploymentImpact:-.02,gdpGrowthImpact:.04},adjustedPredictions:{nextMonth:{baseAmount:e.forecast.nextMonth.predictedAmount,economicAdjustment:e.forecast.nextMonth.predictedAmount*.08,finalAmount:e.forecast.nextMonth.predictedAmount*1.08,confidence:Math.min(.95,e.forecast.nextMonth.confidence+.05)},nextQuarter:{baseAmount:e.forecast.nextQuarter.predictedAmount,economicAdjustment:e.forecast.nextQuarter.predictedAmount*.06,finalAmount:e.forecast.nextQuarter.predictedAmount*1.06,confidence:Math.min(.95,e.forecast.nextQuarter.confidence+.03)}}}};n(c)}catch(c){console.error("Failed to load enhanced analysis:",c),n(e)}finally{i(!1)}})()},[e]),s.jsxs("div",{className:"space-y-6 relative",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Ri,{title:"Total Donors",value:We(e.totalDonors),icon:s.jsx(Qt,{className:"w-6 h-6"}),color:"blue"}),s.jsx(Ri,{title:"Total Donations",value:qe(e.totalAmount),icon:s.jsx(va,{className:"w-6 h-6"}),color:"green"}),s.jsx(Ri,{title:"Average Donation",value:qe(e.averageDonation),icon:s.jsx(_n,{className:"w-6 h-6"}),color:"purple"}),s.jsx(Ri,{title:"Total Gifts",value:We(e.donationCount),icon:s.jsx(Ax,{className:"w-6 h-6"}),color:"orange"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Donation Trends"}),s.jsx(MB,{data:e.monthlyTrends})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Donor Retention"}),s.jsx($B,{data:e.donorRetention})]})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[s.jsx("div",{children:a?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"h-16 bg-gray-200 rounded"}),s.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]})}):r!=null&&r.enhancedForecast?s.jsx(RB,{forecast:r.enhancedForecast}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsx("p",{className:"text-gray-500",children:"Enhanced forecast unavailable"})})}),s.jsx("div",{children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Stats"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Donor Retention Rate"}),s.jsx("span",{className:"text-lg font-bold text-blue-900",children:aa(e.donorRetention.retentionRate)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-green-800",children:"Average Gift Size"}),s.jsx("span",{className:"text-lg font-bold text-green-900",children:qe(e.averageDonation)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Total Gifts"}),s.jsx("span",{className:"text-lg font-bold text-purple-900",children:We(e.donationCount)})]}),s.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["View detailed donor profiles in the ",s.jsx("strong",{children:"All Donors"})," tab"]})})]})]})})]}),s.jsx("div",{children:s.jsx(LB,{monthlyTrends:e.monthlyTrends})}),s.jsx(zB,{donorData:t,isOpen:o,onClose:()=>l(!1)}),!o&&s.jsx("button",{onClick:()=>l(!0),className:"fixed top-20 right-4 z-40 bg-purple-600 text-white p-3 rounded-full shadow-lg hover:bg-purple-700 transition-colors",title:"Open AI Assistant",children:s.jsx(rs,{className:"w-6 h-6"})})]})},qB=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(sr,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security & Privacy"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(es,{className:"w-5 h-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Data Encryption"}),s.jsx("p",{className:"text-sm text-gray-600",children:"All donor data is encrypted using AES-256 encryption both in transit and at rest."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(jn,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Access Control"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Role-based access controls ensure only authorized personnel can view sensitive donor information."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Za,{className:"w-5 h-5 text-orange-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Compliance"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Built with GDPR, CCPA, and nonprofit data protection standards in mind."})]})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Recommendation:"})," Implement regular security audits, use secure backup systems, and ensure all staff handling donor data receive proper security training."]})})]}),WB=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!0),[a,i]=w.useState(null),[o,l]=w.useState(null),[d,c]=w.useState(null),[u,f]=w.useState(null),[h,m]=w.useState(!1),[x,g]=w.useState(null);w.useEffect(()=>{p(),y()},[]);const p=async()=>{try{const _=await Lr.testFredConnection();c(_)}catch{c({success:!1,message:"Failed to test API connection"})}},y=async()=>{n(!0),i(null);try{const _=await Lr.getAllIndicators();t(_),_.length>0&&l(_[0])}catch(_){i("Failed to load economic data. Using sample data for demonstration."),console.error("Economic data error:",_)}finally{n(!1)}},b=async()=>{m(!0),g(null),f(null);try{const _=new URLSearchParams({datasetid:"GHCND",locationid:"ZIP:27601",startdate:"2024-06-01",enddate:"2024-06-30",datatypeid:"TMAX,TMIN,PRCP",limit:"1000"}),C=await fetch(`/.netlify/functions/noaa-proxy?${_.toString()}`);if(!C.ok){const S=await C.json();throw new Error(S.error||"Failed to fetch weather data")}const A=await C.json();f(A.results||[])}catch(_){g(_ instanceof Error?_.message:"Unknown error fetching weather data"),console.error("Weather data fetch error:",_)}finally{m(!1)}},v=_=>{switch(_){case"Consumer Confidence Index":return s.jsx(Bi,{className:"w-5 h-5 text-blue-600"});case"S&P 500 Performance":return s.jsx(_n,{className:"w-5 h-5 text-green-600"});case"Unemployment Rate":return s.jsx(gr,{className:"w-5 h-5 text-red-600"});case"GDP Growth Rate":return s.jsx(va,{className:"w-5 h-5 text-purple-600"});case"Inflation Rate":return s.jsx(Bi,{className:"w-5 h-5 text-orange-600"});case"Federal Funds Rate":return s.jsx(gr,{className:"w-5 h-5 text-indigo-600"});default:return s.jsx(Bi,{className:"w-5 h-5 text-gray-600"})}},j=_=>{switch(_){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}},E=_=>{switch(_){case"up":return"↗";case"down":return"↘";default:return"→"}};return r?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(Ha,{className:"w-6 h-6 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading economic indicators..."})]}):s.jsxs("div",{className:"space-y-6",children:[d&&s.jsxs("div",{className:"rounded-lg p-4 border bg-blue-50 border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ts,{className:"w-5 h-5 text-blue-600"}),s.jsxs("p",{className:"font-medium text-blue-800",children:["Demo Mode: ",d.message]})]}),s.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"Real-time data integration requires backend server deployment to avoid CORS restrictions."})]}),a&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ts,{className:"w-5 h-5 text-yellow-600"}),s.jsx("p",{className:"text-yellow-800",children:a})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((_,C)=>s.jsxs("div",{className:`bg-white rounded-lg shadow-sm border p-4 cursor-pointer transition-all ${(o==null?void 0:o.name)===_.name?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}`,onClick:()=>l(_),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v(_.name),s.jsxs("span",{className:`text-sm font-medium ${j(_.trend)}`,children:[E(_.trend)," ",_.trend]})]}),s.jsx("h4",{className:"font-medium text-gray-900 text-sm mb-1",children:_.name}),s.jsx("p",{className:"text-lg font-bold text-gray-900",children:_.name.includes("Rate")||_.name.includes("Growth")?`${_.currentValue.toFixed(1)}%`:We(_.currentValue)}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Correlation: ",aa(Math.abs(_.correlation))]})]},C))}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(tl,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Weather Data Insights"})]}),s.jsx("button",{onClick:b,disabled:h,className:"flex items-center space-x-1 px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition-colors",children:h?s.jsxs(s.Fragment,{children:[s.jsx(Ha,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Loading..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(tl,{className:"w-4 h-4"}),s.jsx("span",{children:"Fetch Weather Data"})]})})]}),x&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Tu,{className:"w-5 h-5 text-red-600"}),s.jsx("p",{className:"text-red-800 text-sm",children:x})]})}),u&&u.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Location:"})," ZIP:27601 (Raleigh, NC) | ",s.jsx("strong",{children:"Period:"})," June 01-30, 2024 | ",s.jsx("strong",{children:"Data Points:"})," ",u.length]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(_n,{className:"w-4 h-4 text-orange-600 mr-2"}),s.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Avg. Max Temperature"})]}),s.jsx("p",{className:"text-xl font-bold text-orange-900",children:(()=>{const _=u.filter(N=>N.datatype==="TMAX").map(N=>N.value);if(_.length===0)return"N/A";const C=_.reduce((N,D)=>N+D,0)/_.length,A=(C/10).toFixed(1),S=(C/10*9/5+32).toFixed(1);return`${A}°C / ${S}°F`})()})]}),s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(Bi,{className:"w-4 h-4 text-blue-600 mr-2"}),s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Total Precipitation"})]}),s.jsx("p",{className:"text-xl font-bold text-blue-900",children:(()=>{const _=u.filter(N=>N.datatype==="PRCP").map(N=>N.value);if(_.length===0)return"N/A";const C=_.reduce((N,D)=>N+D,0),A=(C/10).toFixed(1),S=(C/254).toFixed(2);return`${A} mm / ${S} in`})()})]}),s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(gr,{className:"w-4 h-4 text-green-600 mr-2"}),s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Avg. Min Temperature"})]}),s.jsx("p",{className:"text-xl font-bold text-green-900",children:(()=>{const _=u.filter(N=>N.datatype==="TMIN").map(N=>N.value);if(_.length===0)return"N/A";const C=_.reduce((N,D)=>N+D,0)/_.length,A=(C/10).toFixed(1),S=(C/10*9/5+32).toFixed(1);return`${A}°C / ${S}°F`})()})]})]}),s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Data Source:"})," NOAA Climate Data Online (CDO) API - Global Historical Climatology Network Daily (GHCND)"]}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[s.jsx("strong",{children:"Note:"})," This is sample weather data for demonstration. In a production system, you would correlate this with your donor locations and donation dates."]})]})]}):!h&&!x&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(tl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No weather data loaded yet."}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'Click "Fetch Weather Data" to load sample weather data from NOAA.'})]})]}),o&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[o.name," Trend"]}),s.jsxs("button",{onClick:y,className:"flex items-center space-x-1 px-3 py-1 text-sm text-blue-600 hover:text-blue-700",children:[s.jsx(Ha,{className:"w-4 h-4"}),s.jsx("span",{children:"Refresh"})]})]}),s.jsx("div",{className:"h-64 mb-4",children:s.jsx(fi,{width:"100%",height:"100%",children:s.jsxs(ef,{data:o.data.slice(-12),children:[s.jsx(mi,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),s.jsx(ga,{dataKey:"date",tickFormatter:_=>new Date(_).toLocaleDateString("en-US",{month:"short",year:"2-digit"}),stroke:"#6b7280",fontSize:12}),s.jsx(wn,{stroke:"#6b7280",fontSize:12,tickFormatter:_=>o.name.includes("S&P")?We(_):`${_.toFixed(1)}%`}),s.jsx(di,{formatter:_=>[o.name.includes("S&P")?We(_):`${_.toFixed(1)}%`,o.name],labelFormatter:_=>new Date(_).toLocaleDateString(),contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem"}}),s.jsx(pa,{type:"monotone",dataKey:"value",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",strokeWidth:2,r:3},activeDot:{r:5,fill:"#2563eb"}})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Impact on Fundraising"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o.impact})]}),s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Recommendation"}),s.jsx("p",{className:"text-sm text-blue-600 mt-1",children:o.recommendation})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Real-time Data Integration"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("h4",{className:"font-medium text-green-800",children:"Federal Reserve Economic Data (FRED)"}),s.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Consumer Confidence, S&P 500, Unemployment, GDP, Inflation, Federal Funds Rate"}),s.jsxs("div",{className:"mt-2 text-xs text-green-700",children:[s.jsx("strong",{children:"Series IDs:"})," UMCSENT, SP500, UNRATE, A191RL1Q225SBEA, CPIAUCSL, FEDFUNDS"]})]}),s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h4",{className:"font-medium text-blue-800",children:"Bureau of Economic Analysis (BEA)"}),s.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Personal Income Growth, Corporate Profits, GDP Components"}),s.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:[s.jsx("strong",{children:"Tables:"})," T20100 (Personal Income), T11200 (Corporate Profits)"]})]}),s.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[s.jsx("h4",{className:"font-medium text-purple-800",children:"Bureau of Labor Statistics (BLS)"}),s.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"Labor Force Participation, Average Hourly Earnings, Job Openings"}),s.jsxs("div",{className:"mt-2 text-xs text-purple-700",children:[s.jsx("strong",{children:"Series IDs:"})," LNS11300000, CES0500000003, JTS00000000JOL"]})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h4",{className:"font-medium text-blue-800",children:"Data Refresh"}),s.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"All economic indicators are updated automatically from official government sources"}),s.jsx("button",{onClick:()=>{p(),y()},className:"mt-2 text-xs text-blue-700 hover:text-blue-800 underline",children:"Test All API Connections"})]}),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsx("h4",{className:"font-medium text-gray-800",children:"Data Coverage"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"11 comprehensive economic indicators covering monetary policy, employment, income, and market performance"}),s.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[s.jsx("strong",{children:"Update Frequency:"})," Monthly (FRED/BLS), Quarterly (BEA)"]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Data Sources:"})," All economic data is sourced directly from official U.S. government agencies: Federal Reserve Bank of St. Louis (FRED), Bureau of Economic Analysis (BEA), and Bureau of Labor Statistics (BLS). Data is updated monthly or quarterly depending on the indicator and provides the most current economic insights for fundraising strategy."]})})]})]})};var l1={exports:{}};(function(e,t){(function(r,n){n()})(ee,function(){function r(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function n(c,u,f){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){d(h.response,u,f)},h.onerror=function(){console.error("could not download file")},h.send()}function a(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ee=="object"&&ee.global===ee?ee:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,u,f){var h=o.URL||o.webkitURL,m=document.createElement("a");u=u||c.name||"download",m.download=u,m.rel="noopener",typeof c=="string"?(m.href=c,m.origin===location.origin?i(m):a(m.href)?n(c,u,f):i(m,m.target="_blank")):(m.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(m.href)},4e4),setTimeout(function(){i(m)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,f){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(r(c,f),u);else if(a(c))n(c,u,f);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){i(h)})}}:function(c,u,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return n(c,u,f);var m=c.type==="application/octet-stream",x=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||m&&x||l)&&typeof FileReader<"u"){var p=new FileReader;p.onloadend=function(){var v=p.result;v=g?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},p.readAsDataURL(c)}else{var y=o.URL||o.webkitURL,b=y.createObjectURL(c);h?h.location=b:location.href=b,h=null,setTimeout(function(){y.revokeObjectURL(b)},4e4)}});o.saveAs=d.saveAs=d,e.exports=d})})(l1);var HB=l1.exports;const Ua="donor_analytics_data",Qp="donor_data_key_2024";class bt{static saveData(t){try{const r=JSON.stringify(t),n=jA(r,Qp);localStorage.setItem(Ua,n)}catch(r){console.error("Failed to save donor data:",r)}}static loadData(){try{const t=localStorage.getItem(Ua);if(!t)return[];const r=_A(t,Qp);return JSON.parse(r).map(a=>({...a,firstDonation:new Date(a.firstDonation),lastDonation:new Date(a.lastDonation),donations:a.donations.map(i=>({...i,date:new Date(i.date)}))}))}catch(t){return console.error("Failed to load donor data:",t),[]}}static clearData(){localStorage.removeItem(Ua)}static mergeNewData(t,r){const n=new Map;return t.forEach(a=>{const i=this.getDonorKey(a.firstName,a.lastName);n.set(i,{...a})}),r.forEach(a=>{const i=this.getDonorKey(a.firstName,a.lastName);if(n.has(i)){const o=n.get(i),l=new Set(o.donations.map(u=>u.id)),c=a.donations.filter(u=>!l.has(u.id)).filter(u=>!o.donations.some(f=>f.date.getTime()===u.date.getTime()&&f.amount===u.amount));c.length>0&&(o.donations.push(...c),this.recalculateDonorMetrics(o)),!o.email&&a.email&&(o.email=a.email),!o.phone&&a.phone&&(o.phone=a.phone)}else n.set(i,a)}),Array.from(n.values())}static getDonorKey(t,r){return`${t.toLowerCase().trim()}_${r.toLowerCase().trim()}`}static recalculateDonorMetrics(t){t.donations.sort((r,n)=>r.date.getTime()-n.date.getTime()),t.totalAmount=t.donations.reduce((r,n)=>r+n.amount,0),t.donationCount=t.donations.length,t.averageDonation=t.totalAmount/t.donationCount,t.firstDonation=t.donations[0].date,t.lastDonation=t.donations[t.donations.length-1].date,t.donationFrequency=this.calculateDonationFrequency(t.donationCount)}static calculateDonationFrequency(t){return t===1?"one-time":t<=3?"occasional":t<=6?"regular":"frequent"}static getUploadHistory(){try{const t=localStorage.getItem(`${Ua}_history`);return t?JSON.parse(t).map(n=>({...n,date:new Date(n.date)})):[]}catch{return[]}}static saveUploadHistory(t,r){try{const n=this.getUploadHistory();n.push({date:new Date,recordsAdded:t,totalRecords:r});const a=n.slice(-50);localStorage.setItem(`${Ua}_history`,JSON.stringify(a))}catch(n){console.error("Failed to save upload history:",n)}}}class Ls{static async syncDonorDataFromDocuments(){try{if(cl)return{success:!0,processedCount:0,totalDonorsAdded:0};const{data:t,error:r}=await rt.from("documents").select("*").eq("category","Donor Data").eq("is_donor_data_processed",!1).order("created_at",{ascending:!0});if(r)throw new Error(`Failed to query documents: ${r.message}`);if(!t||t.length===0)return{success:!0,processedCount:0,totalDonorsAdded:0};let n=0;const a=[];for(const i of t)try{const{data:o,error:l}=await rt.storage.from("documents").download(i.file_path);if(l){console.error(`Failed to download document ${i.name}:`,l);continue}const d=new File([o],i.name,{type:"text/csv"}),c=await qu.parseFile(d);if(c.success&&c.data){const u=bt.loadData(),f=bt.mergeNewData(u,c.data);bt.saveData(f),bt.saveUploadHistory(c.data.length,f.length),n+=c.data.length,a.push(i.id),console.log(`Successfully processed ${i.name}: ${c.data.length} donors added`)}else console.error(`Failed to parse document ${i.name}:`,c.error)}catch(o){console.error(`Error processing document ${i.name}:`,o)}if(a.length>0){const{error:i}=await rt.from("documents").update({is_donor_data_processed:!0}).in("id",a);i&&console.error("Failed to mark documents as processed:",i)}return{success:!0,processedCount:a.length,totalDonorsAdded:n}}catch(t){return console.error("Donor data sync error:",t),{success:!1,processedCount:0,totalDonorsAdded:0,error:t instanceof Error?t.message:"Unknown sync error"}}}static async hasUnprocessedDonorData(){try{if(cl)return!1;const{data:t,error:r}=await rt.from("documents").select("id").eq("category","Donor Data").eq("is_donor_data_processed",!1).limit(1);return r?(console.error("Error checking for unprocessed data:",r),!1):t&&t.length>0}catch(t){return console.error("Error checking for unprocessed data:",t),!1}}static async getUnprocessedCount(){try{if(cl)return 0;const{count:t,error:r}=await rt.from("documents").select("*",{count:"exact",head:!0}).eq("category","Donor Data").eq("is_donor_data_processed",!1);return r?(console.error("Error getting unprocessed count:",r),0):t||0}catch(t){return console.error("Error getting unprocessed count:",t),0}}}const GB=({donorData:e,onDataCleared:t})=>{const r=bt.getUploadHistory(),[n,a]=w.useState(!1),[i,o]=w.useState(null),[l,d]=w.useState(0);Tt.useEffect(()=>{c()},[]);const c=async()=>{const m=await Ls.getUnprocessedCount();d(m)},u=async()=>{a(!0),o("Syncing donor data from document center...");const m=await Ls.syncDonorDataFromDocuments();m.success?m.processedCount>0?(o(`Successfully synced ${m.processedCount} document(s) with ${m.totalDonorsAdded} donor records`),window.location.reload()):o("No new donor data documents found to sync"):o(`Sync failed: ${m.error}`),a(!1),await c(),setTimeout(()=>o(null),5e3)},f=()=>{window.confirm("Are you sure you want to clear all donor data? This action cannot be undone.")&&(bt.clearData(),t())},h=()=>{const m=`First Name,Last Name,Email,Phone,Total Amount,Donation Count,Average Donation,First Donation,Last Donation,Frequency
`,x=e.map(y=>[y.firstName,y.lastName,y.email||"",y.phone||"",y.totalAmount,y.donationCount,y.averageDonation.toFixed(2),un(y.firstDonation,"yyyy-MM-dd"),un(y.lastDonation,"yyyy-MM-dd"),y.donationFrequency].join(",")).join(`
`),g=m+x,p=new Blob([g],{type:"text/csv;charset=utf-8;"});HB.saveAs(p,`donor-data-export-${un(new Date,"yyyy-MM-dd")}.csv`)};return s.jsxs("div",{className:"space-y-6",children:[i&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsx("p",{className:"text-blue-800 font-medium",children:i})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qn,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Document Center Integration"})]}),s.jsxs("button",{onClick:u,disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[s.jsx(Qn,{className:"w-4 h-4"}),s.jsx("span",{children:n?"Syncing...":"Sync from Documents"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Unprocessed Documents"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:We(l)}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:'Documents with "Donor Data" category awaiting processing'})]}),s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Auto-Sync Status"}),s.jsx("p",{className:"text-lg font-bold text-green-900",children:"Enabled"}),s.jsx("p",{className:"text-xs text-green-600 mt-1",children:"New uploads are automatically detected and processed"})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"How it works:"}),' Upload CSV files through the main document center using the "Donor Data" category. The system automatically detects and processes these files for analytics. Click "Sync from Documents\\" to manually check for new uploads.']})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(Qn,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Data Overview"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Total Donors"}),s.jsx("p",{className:"text-2xl font-bold text-blue-900",children:We(e.length)})]}),s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Total Donations"}),s.jsx("p",{className:"text-2xl font-bold text-green-900",children:We(e.reduce((m,x)=>m+x.donationCount,0))})]}),s.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Data Uploads"}),s.jsx("p",{className:"text-2xl font-bold text-purple-900",children:We(r.length)})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pi,{className:"w-5 h-5 text-gray-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload History"})]})}),r.length>0?s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.slice().reverse().map((m,x)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ra,{className:"w-4 h-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:un(m.date,"MMM dd, yyyy HH:mm")}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Added ",We(m.recordsAdded)," records"]})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Total: ",We(m.totalRecords)]})})]},x))}):s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No upload history available"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Management"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("button",{onClick:h,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ur,{className:"w-4 h-4"}),s.jsx("span",{children:"Export Data"})]}),s.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[s.jsx(fx,{className:"w-4 h-4"}),s.jsx("span",{children:"Clear All Data"})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Note:"})," Data is stored locally in your browser and encrypted for security. Regular exports are recommended for backup purposes."]})})]})]})},VB=({donors:e})=>{const[t,r]=w.useState(""),[n,a]=w.useState("totalAmount"),[i]=w.useState("desc"),[o,l]=w.useState("all"),d=w.useMemo(()=>e.filter(f=>{var x;const h=t===""||`${f.firstName} ${f.lastName}`.toLowerCase().includes(t.toLowerCase())||((x=f.email)==null?void 0:x.toLowerCase().includes(t.toLowerCase())),m=o==="all"||f.donationFrequency===o;return h&&m}).sort((f,h)=>{let m,x;switch(n){case"totalAmount":m=f.totalAmount,x=h.totalAmount;break;case"donationCount":m=f.donationCount,x=h.donationCount;break;case"averageDonation":m=f.averageDonation,x=h.averageDonation;break;case"lastDonation":m=f.lastDonation.getTime(),x=h.lastDonation.getTime();break;case"name":m=`${f.firstName} ${f.lastName}`.toLowerCase(),x=`${h.firstName} ${h.lastName}`.toLowerCase();break;default:m=f.totalAmount,x=h.totalAmount}return i==="asc"?m>x?1:-1:m<x?1:-1}),[e,t,n,i,o]),c=u=>{switch(u){case"frequent":return"bg-green-100 text-green-800";case"regular":return"bg-blue-100 text-blue-800";case"occasional":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Pu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search donors by name or email...",value:t,onChange:u=>r(u.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(dx,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:n,onChange:u=>a(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"totalAmount",children:"Total Amount"}),s.jsx("option",{value:"donationCount",children:"Number of Gifts"}),s.jsx("option",{value:"averageDonation",children:"Average Gift"}),s.jsx("option",{value:"lastDonation",children:"Last Donation"}),s.jsx("option",{value:"name",children:"Name"})]})]}),s.jsxs("select",{value:o,onChange:u=>l(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Donors"}),s.jsx("option",{value:"frequent",children:"Frequent"}),s.jsx("option",{value:"regular",children:"Regular"}),s.jsx("option",{value:"occasional",children:"Occasional"}),s.jsx("option",{value:"one-time",children:"One-time"})]})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600",children:[s.jsxs("span",{children:["Showing ",d.length," of ",e.length," donors"]}),s.jsxs("span",{children:["Total: ",qe(d.reduce((u,f)=>u+f.totalAmount,0))]})]})]}),s.jsx("div",{className:"p-6",children:d.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No donors found matching your criteria"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(u=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-medium text-sm mr-3",children:[u.firstName.charAt(0),u.lastName.charAt(0)]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900",children:[u.firstName," ",u.lastName]}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${c(u.donationFrequency)}`,children:u.donationFrequency})]})]})}),s.jsxs("div",{className:"space-y-2 mb-4",children:[u.email&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Zt,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"truncate",children:u.email})]}),u.phone&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(jc,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:u.phone})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{className:"text-center p-2 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"flex items-center justify-center mb-1",children:s.jsx(va,{className:"w-4 h-4 text-green-600"})}),s.jsx("p",{className:"text-lg font-bold text-green-900",children:qe(u.totalAmount)}),s.jsx("p",{className:"text-xs text-green-600",children:"Total Given"})]}),s.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"flex items-center justify-center mb-1",children:s.jsx(Ax,{className:"w-4 h-4 text-blue-600"})}),s.jsx("p",{className:"text-lg font-bold text-blue-900",children:We(u.donationCount)}),s.jsx("p",{className:"text-xs text-blue-600",children:"Gifts"})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Average Gift:"}),s.jsx("span",{className:"font-medium text-gray-900",children:qe(u.averageDonation)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"First Gift:"}),s.jsx("span",{className:"font-medium text-gray-900",children:un(u.firstDonation,"MMM yyyy")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Last Gift:"}),s.jsx("span",{className:"font-medium text-gray-900",children:un(u.lastDonation,"MMM yyyy")})]})]})]},u.id))})})]})};class za{static analyzeData(t){const r=t.length,n=t.reduce((u,f)=>u+f.totalAmount,0),a=t.reduce((u,f)=>u+f.donationCount,0),i=n/a,o=t.sort((u,f)=>f.totalAmount-u.totalAmount).slice(0,10),l=this.calculateMonthlyTrends(t),d=this.calculateRetention(t),c=this.generateForecast(l);return{totalDonors:r,totalAmount:n,averageDonation:i,donationCount:a,topDonors:o,monthlyTrends:l,donorRetention:d,forecast:c}}static calculateMonthlyTrends(t){const r=new Map,n=t.flatMap(a=>a.donations.map(i=>i.date.toISOString().substring(0,10)));return console.log("All donation dates:",[...new Set(n)].sort()),t.forEach(a=>{a.donations.forEach(i=>{const o=new Date(i.date),l=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;r.has(l)||r.set(l,{amount:0,donors:new Set});const d=r.get(l);d.amount+=i.amount,d.donors.add(a.id)})}),console.log("Monthly data map:",Object.fromEntries(r)),Array.from(r.entries()).map(([a,i])=>{const[o,l]=a.split("-"),d=new Date(parseInt(o),parseInt(l)-1,1);return{month:Ie(d,"MMM yyyy"),year:parseInt(o),amount:i.amount,donorCount:i.donors.size,averageDonation:i.amount/i.donors.size}}).sort((a,i)=>a.year-i.year||this.getMonthNumber(a.month.split(" ")[0])-this.getMonthNumber(i.month.split(" ")[0]))}static getMonthNumber(t){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(t)+1}static calculateRetention(t){const r=t.flatMap(p=>p.donations.map(y=>y.date));if(r.length===0)return{newDonors:0,returningDonors:0,retentionRate:0,churnRate:0};const n=new Date(Math.max(...r.map(p=>p.getTime()))),a=new Date(n.getFullYear(),n.getMonth(),1),i=M1(a),o=new Set,l=new Set;t.forEach(p=>{p.donations.forEach(y=>{const b=new Date(y.date.getFullYear(),y.date.getMonth(),1);b.getTime()===a.getTime()&&o.add(p.id),b.getTime()===i.getTime()&&l.add(p.id)})});const d=t.filter(p=>p.donationFrequency==="frequent").length,c=t.filter(p=>p.donationFrequency==="regular").length,u=t.filter(p=>p.donationFrequency==="occasional").length,f=t.filter(p=>p.donationFrequency==="one-time").length,h=d+c+u,m=f,x=t.length>0?h/t.length:0,g=1-x;return{newDonors:m,returningDonors:h,retentionRate:x,churnRate:g}}static generateForecast(t){if(t.length<3)return{nextMonth:{predictedAmount:0,confidence:0},nextQuarter:{predictedAmount:0,confidence:0},trendDirection:"stable"};const n=t.map(u=>u.amount).slice(-6),a=this.calculateLinearRegression(n),i=a.predict(n.length),o=(a.predict(n.length+1)+a.predict(n.length+2)+a.predict(n.length+3))/3,l=Math.max(0,Math.min(1,a.rSquared)),d=a.slope,c=d>.1?"up":d<-.1?"down":"stable";return{nextMonth:{predictedAmount:Math.max(0,i),confidence:l},nextQuarter:{predictedAmount:Math.max(0,o),confidence:l},trendDirection:c}}static calculateLinearRegression(t){const r=t.length,n=t.reduce((m,x,g)=>m+g,0),a=t.reduce((m,x)=>m+x,0),i=t.reduce((m,x,g)=>m+g*x,0),o=t.reduce((m,x,g)=>m+g*g,0),l=(r*i-n*a)/(r*o-n*n),d=(a-l*n)/r,c=a/r,u=t.reduce((m,x,g)=>{const p=l*g+d;return m+Math.pow(x-p,2)},0),f=t.reduce((m,x)=>m+Math.pow(x-c,2),0),h=1-u/f;return{slope:l,intercept:d,rSquared:h,predict:m=>l*m+d}}static comparePeriodsAnalysis(t,r){const n=this.analyzeData(t),a=this.analyzeData(r),i={donorGrowth:(a.totalDonors-n.totalDonors)/n.totalDonors,amountGrowth:(a.totalAmount-n.totalAmount)/n.totalAmount,avgDonationGrowth:(a.averageDonation-n.averageDonation)/n.averageDonation};return{period1:n,period2:a,comparison:i}}}function YB(){const[e,t]=w.useState([]),[r,n]=w.useState(null),[a,i]=w.useState("upload"),[o,l]=w.useState(!1),[d,c]=w.useState(null);Tt.useEffect(()=>{u()},[]);const u=async()=>{l(!0),c("Loading existing data...");const g=bt.loadData();c("Checking for new donor data documents...");const p=await Ls.syncDonorDataFromDocuments();if(p.success&&p.processedCount>0){c(`Synced ${p.processedCount} new document(s) with ${p.totalDonorsAdded} donor records`);const y=bt.loadData();if(t(y),y.length>0){const b=za.analyzeData(y);n(b),i("dashboard")}}else if(p.error){if(c(`Sync error: ${p.error}`),t(g),g.length>0){const y=za.analyzeData(g);n(y),i("dashboard")}}else if(c(null),t(g),g.length>0){const y=za.analyzeData(g);n(y),i("dashboard")}l(!1),p.success&&p.processedCount>0&&setTimeout(()=>c(null),5e3)},f=async()=>{l(!0),c("Manually syncing donor data...");const g=await Ls.syncDonorDataFromDocuments();if(g.success)if(g.processedCount>0){c(`Successfully synced ${g.processedCount} document(s) with ${g.totalDonorsAdded} new donor records`);const p=bt.loadData();t(p);const y=za.analyzeData(p);n(y)}else c("No new donor data documents found to sync");else c(`Sync failed: ${g.error}`);l(!1),setTimeout(()=>c(null),5e3)},h=g=>{l(!0),setTimeout(()=>{const p=bt.loadData(),y=bt.mergeNewData(p,g);bt.saveData(y),bt.saveUploadHistory(g.length,y.length),t(y);const b=za.analyzeData(y);n(b),i("dashboard"),l(!1)},1e3)},m=()=>{t([]),n(null),i("upload")},x=[{id:"upload",label:"Upload Data",icon:s.jsx(ra,{className:"w-4 h-4"})},{id:"dashboard",label:"Analytics",icon:s.jsx(gr,{className:"w-4 h-4"})},{id:"donors",label:"All Donors",icon:s.jsx(Qt,{className:"w-4 h-4"})},{id:"data",label:"Data Management",icon:s.jsx(Qn,{className:"w-4 h-4"})},{id:"security",label:"Security",icon:s.jsx(sr,{className:"w-4 h-4"})},{id:"economic",label:"Economic Insights",icon:s.jsx(_n,{className:"w-4 h-4"})}];return s.jsxs("div",{className:"bg-gray-50",children:[s.jsx("nav",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{className:"px-4",children:s.jsx("div",{className:"flex space-x-8",children:x.map(g=>s.jsxs("button",{onClick:()=>i(g.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 text-sm font-medium transition-colors ${a===g.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[g.icon,s.jsx("span",{children:g.label})]},g.id))})})}),s.jsxs("main",{className:"px-4 py-6",children:[d&&s.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qn,{className:"w-5 h-5 text-blue-600"}),s.jsx("p",{className:"text-blue-800 font-medium",children:d})]})}),o&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"}),s.jsx("span",{className:"ml-3 text-lg text-gray-600",children:d||"Analyzing donor data..."})]}),!o&&s.jsxs(s.Fragment,{children:[a==="upload"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e.length>0?"Add More Donor Data":"Upload Your Donor Data"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:e.length>0?`Add new donation records to your existing database of ${e.length} donors. New data will be merged with existing records.`:'Import your donor database to unlock powerful insights about giving patterns, retention rates, and future fundraising opportunities. You can also upload donor data through the main document center using the "Donor Data" category.'})]}),s.jsx(AA,{onDataLoaded:h,isLoading:o}),e.length>0&&s.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:s.jsxs("p",{className:"text-green-800 text-center",children:[e.length," donors with ",e.reduce((g,p)=>g+p.donationCount,0)," total donations"]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sync from Document Center"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Import donor data files uploaded through Adminizer's main document center"})]}),s.jsxs("button",{onClick:f,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[s.jsx(Qn,{className:"w-4 h-4"}),s.jsx("span",{children:"Sync Now"})]})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ra,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"How it works:"}),s.jsxs("ul",{className:"mt-1 text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:'• Upload CSV files through the main document center with category "Donor Data"'}),s.jsx("li",{children:"• Files are automatically detected and processed for analytics"}),s.jsx("li",{children:"• Data is merged with your existing donor database"}),s.jsx("li",{children:'• Click "Sync Now" to manually check for new uploads'})]})]})]})})]})]}),a==="dashboard"&&r&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Donor Analytics Dashboard"}),s.jsxs("p",{className:"text-gray-600",children:["Comprehensive insights from ",e.length," donor records"]})]}),s.jsx(KB,{analysis:r,donorData:e})]}),a==="donors"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"All Donors Directory"}),s.jsxs("p",{className:"text-gray-600 max-w-2xl mx-auto",children:["Complete directory of all ",e.length," donors, organized by total giving amount. View detailed donor profiles and giving history."]})]}),s.jsx(VB,{donors:e})]}),a==="data"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Data Management"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Manage your donor database, view upload history, and export data for backup or analysis."})]}),s.jsx(GB,{donorData:e,onDataCleared:m})]}),a==="security"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Security & Compliance"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Essential security measures and compliance requirements for protecting sensitive donor information."})]}),s.jsx(qB,{})]}),a==="economic"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Economic Market Insights"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Leverage economic indicators to optimize fundraising timing and improve donation forecasting accuracy."})]}),s.jsx(WB,{})]})]})]})]})}const XB=()=>{const e=Ar(),{documents:t}=Nr(),{isAdmin:r}=Lt(),n={title:"Fundraising & Donor Management",description:"Comprehensive donor analytics and fundraising management platform",color:"green",icon:"💰",features:["AI-powered donor analytics and insights","Donation trend analysis and forecasting","Donor retention and segmentation","Economic correlation analysis","Campaign optimization recommendations","Real-time fundraising dashboards","Donor database management","Grant and funding tracking"]},a=r,i=t.filter(o=>o.category.toLowerCase().includes("funding")||o.category.toLowerCase().includes("financial")||o.tags.some(l=>l.toLowerCase().includes("donor")||l.toLowerCase().includes("fundraising")||l.toLowerCase().includes("grant")));return a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e("/"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(ei,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:n.icon}),s.jsx("span",{children:n.title})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:n.description})]})]}),r&&s.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsx(_t,{className:"h-4 w-4"}),s.jsx("span",{children:"Manage Access"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${n.color}-500 p-3 rounded-lg`,children:s.jsx($e,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Fundraising Documents"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${n.color}-500 p-3 rounded-lg`,children:s.jsx(va,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"AI Analytics"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"Active"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${n.color}-500 p-3 rounded-lg`,children:s.jsx(_n,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Forecasting"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"Enabled"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`bg-${n.color}-500 p-3 rounded-lg`,children:s.jsx(rs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"AI Insights"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"Ready"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Fundraising & Analytics Capabilities"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.features.map((o,l)=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:`w-2 h-2 bg-${n.color}-500 rounded-full`}),s.jsx("span",{className:"text-sm text-gray-700",children:o})]},l))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(rs,{className:"h-6 w-6 text-purple-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"AI-Powered Donor Analytics"}),s.jsx("p",{className:"text-gray-600",children:"Advanced analytics platform with AI insights and economic correlation analysis"})]})]}),s.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:s.jsx(YB,{})})]}),s.jsx(Uu,{category:"fundraising",categoryTitle:n.title,color:n.color}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>e("/upload"),className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:[s.jsx($e,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Upload Grant Documents"})]}),s.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:[s.jsx(gr,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Generate Reports"})]}),s.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:[s.jsx(_t,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Analytics Settings"})]})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e("/"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(ei,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n.title}),s.jsx("p",{className:"text-gray-600 mt-1",children:n.description})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[s.jsx("div",{className:"bg-red-100 rounded-full p-6 mx-auto w-24 h-24 flex items-center justify-center mb-6",children:s.jsx(es,{className:"h-12 w-12 text-red-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Access Restricted"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["You don't have access to the ",n.title," department. This area contains sensitive donor information and requires administrator privileges."]}),s.jsx("button",{onClick:()=>e("/"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Dashboard"})]})]})};function JB(){const e=o_;return s.jsx(e,{children:s.jsxs(A1,{children:[s.jsx(z_,{}),s.jsxs(uf,{children:[s.jsx(Ct,{path:"/invite/:token",element:s.jsx(R_,{})}),s.jsx(Ct,{path:"/oauth/callback/:provider",element:s.jsx(L_,{})}),s.jsx(Ct,{path:"/*",element:s.jsx(c_,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50 pt-10",children:[s.jsx(C_,{}),s.jsxs("div",{className:"flex",children:[s.jsx(S_,{}),s.jsx("main",{className:"flex-1 p-8 transition-all duration-300",children:s.jsxs(uf,{children:[s.jsx(Ct,{path:"/",element:s.jsx(b_,{})}),s.jsx(Ct,{path:"/documents",element:s.jsx(__,{})}),s.jsx(Ct,{path:"/upload",element:s.jsx(A_,{})}),s.jsx(Ct,{path:"/operations",element:s.jsx(I_,{})}),s.jsx(Ct,{path:"/operations/:category",element:s.jsx(T_,{})}),s.jsx(Ct,{path:"/department/:department",element:s.jsx(B_,{})}),s.jsx(Ct,{path:"/department/fundraising-donor-management",element:s.jsx(XB,{})}),s.jsx(Ct,{path:"/users",element:s.jsx($_,{})}),s.jsx(Ct,{path:"/oauth",element:s.jsx(U_,{})})]})})]})]})})})]})]})})}_c.createRoot(document.getElementById("root")).render(s.jsx(Tt.StrictMode,{children:s.jsx(JB,{})}));
